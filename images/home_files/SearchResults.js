(function(b){var a=Math.min,d=Math.max,c=Math.floor,g=function(j){return"string"===b.type(j)},h=function(j,a){if(b.isArray(a)){for(var d=0,c=a.length;d<c;d++){var h=a[d];try{g(h)&&(h=eval(h)),b.isFunction(h)&&h(j)}catch(p){}}}};b.layout={version:"1.3.rc30.74",revision:0.033007,browser:{mozilla:!!b.browser.mozilla,webkit:!!b.browser.webkit||!!b.browser.safari,msie:!!b.browser.msie,isIE6:b.browser.msie&&6==b.browser.version,boxModel:!1!==b.support.boxModel||!b.browser.msie,version:b.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(j){j=b(j);if(j=j.data("layout")||j.data("parentLayout")){j=j.container;if(j.data("layoutPane")){return j}j=j.closest("."+b.layout.defaults.panes.paneClass);if(j.data("layoutPane")){return j}}return null},getParentPaneInstance:function(j){return(j=b.layout.getParentPaneElem(j))?j.data("layoutPane"):null},getParentLayoutInstance:function(j){return(j=b.layout.getParentPaneElem(j))?j.data("parentLayout"):null},getEventObject:function(b){return"object"===typeof b&&b.stopPropagation?b:null},parsePaneName:function(j){var a=b.layout.getEventObject(j);return a?(a.stopPropagation(),b(this).data("layoutEdge")):j},plugins:{draggable:!!b.fn.draggable,effects:{core:!!b.effects,slide:b.effects&&(b.effects.slide||b.effects.effect&&b.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(j){var a=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),d={width:a.css("width")-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return j.match(/^(width|height)$/)?d[j]:d},showInvisibly:function(b,a){if(b&&b.length&&(a||"none"===b.css("display"))){var d=b[0].style,d={display:d.display||"",visibility:d.visibility||""};b.css({display:"block",visibility:"hidden"});return d}return{}},getElementDimensions:function(a,c){var g={css:{},inset:{}},h=g.css,F={bottom:0},p=b.layout.cssNum,A=a.offset(),x,D,z;g.offsetLeft=A.left;g.offsetTop=A.top;c||(c={});b.each(["Left","Right","Top","Bottom"],function(d,p){x=h["border"+p]=b.layout.borderWidth(a,p);D=h["padding"+p]=b.layout.cssNum(a,"padding"+p);z=p.toLowerCase();g.inset[z]=0<=c[z]?c[z]:D;F[z]=g.inset[z]+x});h.width=a.css("width");h.height=a.height();h.top=p(a,"top",!0);h.bottom=p(a,"bottom",!0);h.left=p(a,"left",!0);h.right=p(a,"right",!0);g.outerWidth=a.outerWidth();g.outerHeight=a.outerHeight();g.innerWidth=d(0,g.outerWidth-F.left-F.right);g.innerHeight=d(0,g.outerHeight-F.top-F.bottom);g.layoutWidth=a.innerWidth();g.layoutHeight=a.innerHeight();return g},getElementStyles:function(b,a){var d={},c=b[0].style,g=a.split(","),p=["Top","Bottom","Left","Right"],h=["Color","Style","Width"],x,D,z,T,C,t;for(T=0;T<g.length;T++){if(x=g[T],x.match(/(border|padding|margin)$/)){for(C=0;4>C;C++){if(D=p[C],"border"===x){for(t=0;3>t;t++){z=h[t],d[x+D+z]=c[x+D+z]}}else{d[x+D]=c[x+D]}}}else{d[x]=c[x]}}return d},cssWidth:function(a,c){if(0>=c){return 0}if(!b.layout.browser.boxModel){return c}var g=b.layout.borderWidth,h=b.layout.cssNum,g=c-g(a,"Left")-g(a,"Right")-h(a,"paddingLeft")-h(a,"paddingRight");return d(0,g)},cssHeight:function(a,c){if(0>=c){return 0}if(!b.layout.browser.boxModel){return c}var g=b.layout.borderWidth,h=b.layout.cssNum,g=c-g(a,"Top")-g(a,"Bottom")-h(a,"paddingTop")-h(a,"paddingBottom");return d(0,g)},cssNum:function(a,d,c){a.jquery||(a=b(a));var g=b.layout.showInvisibly(a),d=b.css(a[0],d,!0),c=c&&"auto"==d?d:Math.round(parseFloat(d)||0);a.css(g);return c},borderWidth:function(a,d){a.jquery&&(a=a[0]);var c="border"+d.substr(0,1).toUpperCase()+d.substr(1);return"none"===b.css(a,c+"Style",!0)?0:Math.round(parseFloat(b.css(a,c+"Width",!0))||0)},isMouseOverElem:function(a,d){var c=b(d||this),g=c.offset(),h=g.top,g=g.left,p=g+c.outerWidth(),c=h+c.outerHeight(),A=a.pageX,x=a.pageY;return b.layout.browser.msie&&0>A&&0>x||A>=g&&A<=p&&x>=h&&x<=c},msg:function(a,d,c,g){b.isPlainObject(a)&&window.debugData?("string"===typeof d?(g=c,c=d):"object"===typeof c&&(g=c,c=null),c=c||"log( <object> )",g=b.extend({sort:!1,returnHTML:!1,display:!1},g),!0===d||g.display?debugData(a,c,g):window.console&&console.log(debugData(a,c,g))):d?alert(a):window.console?console.log(a):(d=b("#layoutLogger"),d.length||(d=b('<div id="layoutLogger" style="position: '+(b.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),d.css("left",b(window).width()-d.outerWidth()-5),b.ui.draggable&&d.draggable({handle:":first-child"})),d.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};b.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1000,resizer_drag:10000},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button \n\nInvalid ",containerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\n\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:b.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};b.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onunload".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};b.layout.transformData=function(a,d){var c=d?{panes:{},center:{}}:{},g,h,p,A,x,D,z;if("object"!==typeof a){return c}for(h in a){g=c;x=a[h];p=h.split("__");z=p.length-1;for(D=0;D<=z;D++){A=p[D],D===z?g[A]=b.isPlainObject(x)?b.layout.transformData(x):x:(g[A]||(g[A]={}),g=g[A])}}return c};b.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(a){function d(b,c){for(var g=b.split("."),h=g.length-1,p={branch:a,key:g[h]},t=0,q;t<h;t++){q=g[t],p.branch=void 0==p.branch[q]?c?p.branch[q]={}:{}:p.branch[q]}return p}var c=b.layout.backwardCompatibility.map,g,h,p,A;for(A in c){g=d(A),p=g.branch[g.key],void 0!==p&&(h=d(c[A],!0),h.branch[h.key]=p,delete g.branch[g.key])}},renameAllOptions:function(a){var d=b.layout.backwardCompatibility.renameOptions;d(a);a.defaults&&("object"!==typeof a.panes&&(a.panes={}),b.extend(!0,a.panes,a.defaults),delete a.defaults);a.panes&&d(a.panes);b.each(b.layout.config.allPanes,function(b,c){a[c]&&d(a[c])});return a}};b.fn.layout=function(j){function B(e){if(!e){return !0}var u=e.keyCode;if(33>u){return !0}var n={38:"north",40:"south",37:"west",39:"east"},a=e.shiftKey,f=e.ctrlKey,l,i,d,k;f&&(37<=u&&40>=u)&&t[n[u]].enableCursorHotkey?k=n[u]:(f||a)&&b.each(p.borderPanes,function(e,b){l=t[b];i=l.customHotkey;d=l.customHotkeyModifier;if(a&&"SHIFT"==d||f&&"CTRL"==d||f&&a){if(i&&u===(isNaN(i)||9>=i?i.toUpperCase().charCodeAt(0):i)){return k=b,!1}}});if(!k||!w[k]||!t[k].closable||q[k].isHidden){return !0}ja(k);e.stopPropagation();return e.returnValue=!1}function J(e){if(I()){this&&this.tagName&&(e=this);var u;g(e)?u=w[e]:b(e).data("layoutRole")?u=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole")){return u=b(this),!1}});if(u&&u.length){var n=u.data("layoutEdge"),e=q[n];e.cssSaved&&G(n);if(e.isSliding||e.isResizing||e.isClosed){e.cssSaved=!1}else{var a={zIndex:t.zIndexes.resizer_normal+1},f={},l=u.css("overflow"),i=u.css("overflowX"),d=u.css("overflowY");"visible"!=l&&(f.overflow=l,a.overflow="visible");i&&!i.match(/(visible|auto)/)&&(f.overflowX=i,a.overflowX="visible");d&&!d.match(/(visible|auto)/)&&(f.overflowY=i,a.overflowY="visible");e.cssSaved=f;u.css(a);b.each(p.allPanes,function(e,b){b!=n&&G(b)})}}}}function G(e){if(I()){this&&this.tagName&&(e=this);var u;g(e)?u=w[e]:b(e).data("layoutRole")?u=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole")){return u=b(this),!1}});if(u&&u.length){var e=u.data("layoutEdge"),e=q[e],n=e.cssSaved||{};!e.isSliding&&!e.isResizing&&u.css("zIndex",t.zIndexes.pane_normal);u.css(n);e.cssSaved=!1}}}var F=b.layout.browser,p=b.layout.config,A=b.layout.cssWidth,x=b.layout.cssHeight,D=b.layout.getElementDimensions,z=b.layout.getElementStyles,T=b.layout.getEventObject,C=b.layout.parsePaneName,t=b.extend(!0,{},b.layout.defaults);t.effects=b.extend(!0,{},b.layout.effects);var q={id:"layout"+b.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},X={north:null,south:null,east:null,west:null,center:null},N={data:{},set:function(e,b,n){N.clear(e);N.data[e]=setTimeout(b,n)},clear:function(e){var b=N.data;b[e]&&(clearTimeout(b[e]),delete b[e])}},Y=function(e,u,n){var a=t;(a.showErrorMessages&&!n||n&&a.showDebugMessages)&&b.layout.msg(a.name+" / "+e,!1!==u);return !1},E=function(e,u,n){var a=u&&g(u),f=a?q[u]:q,l=a?t[u]:t,i=t.name,d=e+(e.match(/_/)?"":"_end"),k=d.match(/_end$/)?d.substr(0,d.length-4):"",r=l[d]||l[k],c="NC",h=[];!a&&"boolean"===b.type(u)&&(n=u,u="");if(r){try{g(r)&&(r.match(/,/)?(h=r.split(","),r=eval(h[0])):r=eval(r)),b.isFunction(r)&&(c=h.length?r(h[1]):a?r(u,w[u],f,l,i):r(y,f,l,i))}catch(p){Y(t.errors.callbackError.replace(/EVENT/,b.trim((u||"")+" "+d)),!1),"string"===b.type(p)&&string.length&&Y("Exception:  "+p,!1)}}!n&&!1!==c&&(a?(n=w[u],l=t[u],f=q[u],n.triggerHandler("layoutpane"+d,[u,n,f,l,i]),k&&n.triggerHandler("layoutpane"+k,[u,n,f,l,i])):(m.triggerHandler("layout"+d,[y,f,l,i]),k&&m.triggerHandler("layout"+k,[y,f,l,i])));a&&"onresize_end"===e&&Za(u+"",!0);return c},$a=function(e){if(!F.mozilla){var b=w[e];"IFRAME"===q[e].tagName?b.css(p.hidden).css(p.visible):b.find("IFRAME").css(p.hidden).css(p.visible)}},ua=function(e){var b=w[e],e=p[e].dir,b={minWidth:1001-A(b,1000),minHeight:1001-x(b,1000)};"horz"===e&&(b.minSize=b.minHeight);"vert"===e&&(b.minSize=b.minWidth);return b},ba=function(e,u,n){n||(n=p[e].dir);g(u)&&u.match(/%/)&&(u="100%"===u?-1:parseInt(u,10)/100);if(0===u){return 0}if(1<=u){return parseInt(u,10)}var a=t,f=0;"horz"==n?f=v.innerHeight-(w.north?a.north.spacing_open:0)-(w.south?a.south.spacing_open:0):"vert"==n&&(f=v.innerWidth-(w.west?a.west.spacing_open:0)-(w.east?a.east.spacing_open:0));if(-1===u){return f}if(0<u){return c(f*u)}if("center"==e){return 0}var n="horz"===n?"height":"width",a=w[e],e="height"===n?Q[e]:!1,f=b.layout.showInvisibly(a),l=a.css(n),i=e?e.css(n):0;a.css(n,"auto");e&&e.css(n,"auto");u="height"===n?a.outerHeight():a.outerWidth();a.css(n,l).css(f);e&&e.css(n,i);return u},ca=function(e,b){var n=w[e],a=t[e],f=q[e],l=b?a.spacing_open:0,a=b?a.spacing_closed:0;return !n||f.isHidden?0:f.isClosed||f.isSliding&&b?a:"horz"===p[e].dir?n.outerHeight()+l:n.outerWidth()+l},U=function(e,b){if(I()){var n=t[e],K=q[e],f=p[e],l=f.dir;f.sizeType.toLowerCase();var f=void 0!=b?b:K.isSliding,i=n.spacing_open,c=p.oppositeEdge[e],k=q[c],r=w[c],g=!r||!1===k.isVisible||k.isSliding?0:"horz"==l?r.outerHeight():r.outerWidth(),c=(!r||k.isHidden?0:t[c][!1!==k.isClosed?"spacing_closed":"spacing_open"])||0,k="horz"==l?v.innerHeight:v.innerWidth,r=ua("center"),r="horz"==l?d(t.center.minHeight,r.minHeight):d(t.center.minWidth,r.minWidth),f=k-i-(f?0:ba("center",r,l)+g+c),l=K.minSize=d(ba(e,n.minSize),ua(e).minSize),f=K.maxSize=a(n.maxSize?ba(e,n.maxSize):100000,f),K=K.resizerPosition={},i=v.inset.top,g=v.inset.left,c=v.innerWidth,k=v.innerHeight,n=n.spacing_open;switch(e){case"north":K.min=i+l;K.max=i+f;break;case"west":K.min=g+l;K.max=g+f;break;case"south":K.min=i+k-f-n;K.max=i+k-l-n;break;case"east":K.min=g+c-f-n,K.max=g+c-l-n}}},Ha=function(e,u){var n=b(e),a=n.data("layoutRole"),f=n.data("layoutEdge"),l=t[f][a+"Class"],f="-"+f,i=n.hasClass(l+"-closed")?"-closed":"-open",d="-closed"===i?"-open":"-closed",i=l+"-hover "+(l+f+"-hover ")+(l+i+"-hover ")+(l+f+i+"-hover ");u&&(i+=l+d+"-hover "+(l+f+d+"-hover "));"resizer"==a&&n.hasClass(l+"-sliding")&&(i+=l+"-sliding-hover "+(l+f+"-sliding-hover "));return b.trim(i)},Ia=function(e,u){var n=b(u||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation();n.addClass(Ha(n))},Z=function(e,u){var n=b(u||this);n.removeClass(Ha(n,!0))},ab=function(){var e=b(this).data("layoutEdge"),u=q[e];!u.isClosed&&(!u.isResizing&&!q.paneResizing)&&(b.fn.disableSelection&&b("body").disableSelection(),t.maskPanesEarly&&qa(e,{resizing:!0}))},bb=function(e,u){var n=u||this,a=b(n).data("layoutEdge"),f=a+"ResizerLeave";N.clear(a+"_openSlider");N.clear(f);u?q.paneResizing||(b.fn.enableSelection&&b("body").enableSelection(),t.maskPanesEarly&&va()):N.set(f,function(){bb(e,n)},200)},I=function(){return q.initialized||q.creatingLayout?!0:wa()},wa=function(e){var a=t;if(!m.is(":visible")){return !e&&(F.webkit&&"BODY"===m[0].tagName)&&setTimeout(function(){wa(!0)},50),!1}if(!cb("center").length){return Y(a.errors.centerPaneMissing)}q.creatingLayout=!0;b.extend(v,D(m,a.inset));C(void 0);b.each(p.allPanes,function(e,b){db(b,!0)});Ja();b.each(p.borderPanes,function(e,b){w[b]&&q[b].isVisible&&(U(b),da(b))});ea("center");b.each(p.allPanes,function(e,b){eb(b)});a.scrollToBookmarkOnLoad&&(e=self.location,e.hash&&e.replace(e.hash));y.hasParentLayout?a.resizeWithWindow=!1:a.resizeWithWindow&&b(window).bind("resize."+L,vb);delete q.creatingLayout;q.initialized=!0;h(y,b.layout.onReady);E("onload_end");return !0},Ka=function(e,a){var n=C.call(this,e),d=w[n];if(d){var f=Q[n],l=q[n],i=t[n],c=t.stateManagement||{},i=a?i.children=a:i.children;if(b.isPlainObject(i)){i=[i]}else{if(!i||!b.isArray(i)){return}}b.each(i,function(e,a){b.isPlainObject(a)&&(a.containerSelector?d.find(a.containerSelector):f||d).each(function(){var e=b(this),u=e.data("layout");if(!u){fb({container:e,options:a},l);if(c.includeChildren&&q.stateData[n]){var u=(q.stateData[n].children||{})[a.instanceKey],f=a.stateManagement||(a.stateManagement={autoLoad:!0});!0===f.autoLoad&&u&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=b.extend(!0,{},u))}(u=e.layout(a))&&xa(n,u)}})})}},fb=function(e,b){var a=e.container,d=e.options,f=d.stateManagement,l=d.instanceKey||a.data("layoutInstanceKey");l||(l=(f&&f.cookie?f.cookie.name:"")||d.name);l=l?l.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;d.instanceKey=l;a.data("layoutInstanceKey",l);return l},xa=function(e,a){var n=w[e],d=X[e],f=q[e];b.isPlainObject(d)&&(b.each(d,function(e,b){b.destroyed&&delete d[e]}),b.isEmptyObject(d)&&(d=X[e]=null));!a&&!d&&(a=n.data("layout"));a&&(a.hasParentLayout=!0,n=a.options,fb(a,f),d||(d=X[e]={}),d[n.instanceKey]=a.container.data("layout"));y[e].children=X[e];a||Ka(e)},vb=function(){var e=t,b=Number(e.resizeWithWindowDelay);10>b&&(b=100);N.clear("winResize");N.set("winResize",function(){N.clear("winResize");N.clear("winResizeRepeater");var b=D(m,e.inset);(b.innerWidth!==v.innerWidth||b.innerHeight!==v.innerHeight)&&ka()},b);N.data.winResizeRepeater||gb()},gb=function(){var e=Number(t.resizeWithWindowMaxDelay);0<e&&N.set("winResizeRepeater",function(){gb();ka()},e)},hb=function(){E("onunload_start");h(y,b.layout.onUnload);E("onunload_end")},ib=function(e){e=e?e.split(","):p.borderPanes;b.each(e,function(e,a){var d=t[a];if(d.enableCursorHotkey||d.customHotkey){return b(document).bind("keydown."+L,B),!1}})},cb=function(e){e=t[e].paneSelector;if("#"===e.substr(0,1)){return m.find(e).eq(0)}var b=m.children(e).eq(0);return b.length?b:m.children("form:first").children(e).eq(0)},db=function(e,b){if(b||I()){var n=t[e],c=q[e],f=p[e],l=f.dir,i="center"===e,g={},k=w[e],r,h;k?La(e,!1,!0,!1):Q[e]=!1;k=w[e]=cb(e);if(k.length){k.data("layoutCSS")||k.data("layoutCSS",z(k,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));y[e]={name:e,pane:w[e],content:Q[e],options:t[e],state:q[e],children:X[e]};k.data({parentLayout:y,layoutPane:y[e],layoutEdge:e,layoutRole:"pane"}).css(f.cssReq).css("zIndex",t.zIndexes.pane_normal).css(n.applyDemoStyles?f.cssDemo:{}).addClass(n.paneClass+" "+n.paneClass+"-"+e).bind("mouseenter."+L,Ia).bind("mouseleave."+L,Z);f={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(h in f){k.bind("layoutpane"+h.toLowerCase()+"."+L,y[f[h]||h])}Ma(e,!1);i||(r=c.size=ba(e,n.size),i=ba(e,n.minSize)||1,h=ba(e,n.maxSize)||100000,0<r&&(r=d(a(r,h),i)),c.autoResize=n.autoResize,c.isClosed=!1,c.isSliding=!1,c.isResizing=!1,c.isHidden=!1,c.pins||(c.pins=[]));c.tagName=k[0].tagName;c.edge=e;c.noRoom=!1;c.isVisible=!0;jb(e);"horz"===l?g.height=x(k,r):"vert"===l&&(g.width=A(k,r));k.css(g);"horz"!=l&&ea(e,!0);q.initialized&&(Ja(e),ib(e));n.initClosed&&n.closable&&!n.initHidden?fa(e,!0,!0):n.initHidden||n.initClosed?Na(e):c.noRoom||k.css("display","block");k.css("visibility","visible");n.showOverflowOnHover&&k.hover(J,G);q.initialized&&eb(e)}else{w[e]=!1}}},eb=function(e){var b=w[e],a=q[e],d=t[e];b&&(b.data("layout")&&xa(e,b.data("layout")),a.isVisible&&(q.initialized?ka():la(e),d.triggerEventsOnLoad?E("onresize_end",e):Za(e,!0)),d.initChildren&&d.children&&Ka(e))},jb=function(e){e=e?e.split(","):p.borderPanes;b.each(e,function(e,b){var a=w[b],f=H[b],d=q[b],i=p[b].side,c={};if(a){switch(b){case"north":c.top=v.inset.top;c.left=v.inset.left;c.right=v.inset.right;break;case"south":c.bottom=v.inset.bottom;c.left=v.inset.left;c.right=v.inset.right;break;case"west":c.left=v.inset.left;break;case"east":c.right=v.inset.right}a.css(c);f&&d.isClosed?f.css(i,v.inset[i]):f&&!d.isHidden&&f.css(i,v.inset[i]+ca(b))}})},Ja=function(e){e=e?e.split(","):p.borderPanes;b.each(e,function(e,a){var d=w[a];H[a]=!1;P[a]=!1;if(d){var f=t[a],d=q[a],l="#"===f.paneSelector.substr(0,1)?f.paneSelector.substr(1):"",c=f.resizerClass,g=f.togglerClass,k="-"+a,r=y[a],h=r.resizer=H[a]=b("<div></div>"),r=r.toggler=f.closable?P[a]=b("<div></div>"):!1;!d.isVisible&&f.slidable&&h.attr("title",f.tips.Slide).css("cursor",f.sliderCursor);h.attr("id",l?l+"-resizer":"").data({parentLayout:y,layoutPane:y[a],layoutEdge:a,layoutRole:"resizer"}).css(p.resizers.cssReq).css("zIndex",t.zIndexes.resizer_normal).css(f.applyDemoStyles?p.resizers.cssDemo:{}).addClass(c+" "+c+k).hover(Ia,Z).hover(ab,bb).appendTo(m);f.resizerDblClickToggle&&h.bind("dblclick."+L,ja);r&&(r.attr("id",l?l+"-toggler":"").data({parentLayout:y,layoutPane:y[a],layoutEdge:a,layoutRole:"toggler"}).css(p.togglers.cssReq).css(f.applyDemoStyles?p.togglers.cssDemo:{}).addClass(g+" "+g+k).hover(Ia,Z).bind("mouseenter",ab).appendTo(h),f.togglerContent_open&&b("<span>"+f.togglerContent_open+"</span>").data({layoutEdge:a,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",a).addClass("content content-open").css("display","none").appendTo(r),f.togglerContent_closed&&b("<span>"+f.togglerContent_closed+"</span>").data({layoutEdge:a,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(r),kb(a));var f=a,j=b.layout.plugins.draggable,f=f?f.split(","):p.borderPanes;b.each(f,function(e,a){var f=t[a];if(!j||!w[a]||!f.resizable){return f.resizable=!1,!0}var u=q[a],n=t.zIndexes,d=p[a],l="horz"==d.dir?"top":"left",c=H[a],i=f.resizerClass,g=0,k,r,h=i+"-drag",K=i+"-"+a+"-drag",ub=i+"-dragging",ta=i+"-"+a+"-dragging",v=i+"-dragging-limit",x=i+"-"+a+"-dragging-limit",A=!1;u.isClosed||c.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);c.draggable({containment:m[0],axis:"horz"==d.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:n.resizer_drag,start:function(e,n){f=t[a];u=q[a];r=f.livePaneResizing;if(!1===E("ondrag_start",a)){return !1}u.isResizing=!0;q.paneResizing=a;N.clear(a+"_closeSlider");U(a);k=u.resizerPosition;g=n.position[l];c.addClass(h+" "+K);A=!1;b("body").disableSelection();qa(a,{resizing:!0})},drag:function(e,b){A||(b.helper.addClass(ub+" "+ta).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),A=!0,u.isSliding&&w[a].css("zIndex",n.pane_sliding));var d=0;b.position[l]<k.min?(b.position[l]=k.min,d=-1):b.position[l]>k.max&&(b.position[l]=k.max,d=1);d?(b.helper.addClass(v+" "+x),window.defaultStatus=0<d&&a.match(/(north|west)/)||0>d&&a.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(v+" "+x),window.defaultStatus="");r&&Math.abs(b.position[l]-g)>=f.liveResizingTolerance&&(g=b.position[l],aa(e,b,a))},stop:function(e,f){b("body").enableSelection();window.defaultStatus="";c.removeClass(h+" "+K);u.isResizing=!1;q.paneResizing=!1;aa(e,f,a,!0)}})});var aa=function(b,e,a,f){var u=e.position,n=p[a],b=t[a],e=q[a],d;switch(a){case"north":d=u.top;break;case"west":d=u.left;break;case"south":d=v.layoutHeight-u.top-b.spacing_open;break;case"east":d=v.layoutWidth-u.left-b.spacing_open}d-=v.inset[n.side];f?(!1!==E("ondrag_end",a)&&ya(a,d,!1,!0),va(!0),e.isSliding&&qa(a,{resizing:!0})):Math.abs(d-e.size)<b.liveResizingTolerance||(ya(a,d,!1,!0),$.each(lb))};d.isVisible?Oa(a):(Pa(a),ia(a,!0))}});ma()},Ma=function(b,a){if(I()){var n=t[b],d=n.contentSelector,f=y[b],l=w[b],c;d&&(c=f.content=Q[b]=n.findNestedContent?l.find(d).eq(0):l.children(d).eq(0));c&&c.length?(c.data("layoutRole","content"),c.data("layoutCSS")||c.data("layoutCSS",z(c,"height")),c.css(p.content.cssReq),n.applyDemoStyles&&(c.css(p.content.cssDemo),l.css(p.content.cssDemoPane)),l.css("overflowX").match(/(scroll|auto)/)&&l.css("overflow","hidden"),q[b].content={},!1!==a&&la(b)):f.content=Q[b]=!1}},lb=function(){var e=b(this),a=e.data("layoutMask"),a=q[a];"IFRAME"==a.tagName&&a.isVisible&&e.css({top:a.offsetTop,left:a.offsetLeft,width:a.outerWidth,height:a.outerHeight})},qa=function(e,a){var n=p[e],d=["center"],f=t.zIndexes,c=b.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:q[e].isSliding},a),i,g;c.resizing&&d.push(e);c.sliding&&d.push(p.oppositeEdge[e]);"horz"===n.dir&&(d.push("west"),d.push("east"));b.each(d,function(e,a){g=q[a];i=t[a];if(g.isVisible&&(i.maskObjects||!c.objectsOnly&&i.maskContents)){for(var n=b([]),u,d=0,h=$.length;d<h;d++){u=$.eq(d),u.data("layoutMask")===a&&(n=n.add(u))}if(!n.length){n=w[a];u=q[a];var d=t[a],h=t.zIndexes,K=b([]),p,j,v,x,A;if(d.maskContents||d.maskObjects){for(A=0;A<(d.maskObjects?2:1);A++){p=d.maskObjects&&0==A,j=document.createElement(p?"iframe":"div"),v=b(j).data("layoutMask",a),j.className="ui-layout-mask ui-layout-mask-"+a,x=j.style,x.display="block",x.position="absolute",x.background="#FFF",p&&(j.frameborder=0,j.src="about:blank",x.opacity=0,x.filter="Alpha(Opacity='0')",x.border=0),"IFRAME"==u.tagName?(x.zIndex=h.pane_normal+1,m.append(j)):(v.addClass("ui-layout-mask-inside-pane"),x.zIndex=d.maskZindex||h.content_mask,x.top=0,x.left=0,x.width="100%",x.height="100%",n.append(j)),K=K.add(j),$=$.add(j)}}n=K}n.each(function(){lb.call(this);this.style.zIndex=g.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})}})},va=function(e){if(e||!q.paneResizing){$.hide()}else{if(!e&&!b.isEmptyObject(q.panesSliding)){for(var e=$.length-1,a,n;0<=e;e--){n=$.eq(e),a=n.data("layoutMask"),t[a].maskObjects||n.hide()}}}},La=function(e,a,n,d){if(I()){var e=C.call(this,e),f=w[e],c=Q[e],i=H[e],g=P[e];f&&b.isEmptyObject(f.data())&&(f=!1);c&&b.isEmptyObject(c.data())&&(c=!1);i&&b.isEmptyObject(i.data())&&(i=!1);g&&b.isEmptyObject(g.data())&&(g=!1);f&&f.stop(!0,!0);var k=t[e],r=X[e],h=b.isPlainObject(r)&&!b.isEmptyObject(r),d=void 0!==d?d:k.destroyChildren;h&&d&&(b.each(r,function(b,e){e.destroyed||e.destroy(!0);e.destroyed&&delete r[b]}),b.isEmptyObject(r)&&(r=X[e]=null,h=!1));f&&a&&!h?f.remove():f&&f[0]&&(a=k.paneClass,d=a+"-"+e,a=[a,a+"-open",a+"-closed",a+"-sliding",d,d+"-open",d+"-closed",d+"-sliding"],b.merge(a,Ha(f,!0)),f.removeClass(a.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+L),h&&c?(c.width(c.width()),b.each(r,function(b,e){e.resizeAll()})):c&&c.css(c.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));g&&g.remove();i&&i.remove();y[e]=w[e]=Q[e]=H[e]=P[e]=!1;n||ka()}},za=function(b){var a=w[b],d=a[0].style;t[b].useOffscreenClose?(a.data(p.offscreenReset)||a.data(p.offscreenReset,{left:d.left,right:d.right}),a.css(p.offscreenCSS)):a.hide().removeData(p.offscreenReset)},mb=function(b){var a=w[b],b=t[b],d=p.offscreenCSS,c=a.data(p.offscreenReset),f=a[0].style;a.show().removeData(p.offscreenReset);b.useOffscreenClose&&c&&(f.left==d.left&&(f.left=c.left),f.right==d.right&&(f.right=c.right))},Na=function(b,a){if(I()){var d=C.call(this,b),c=t[d],f=q[d],l=H[d];w[d]&&!f.isHidden&&!(q.initialized&&!1===E("onhide_start",d))&&(f.isSliding=!1,delete q.panesSliding[d],l&&l.hide(),!q.initialized||f.isClosed?(f.isClosed=!0,f.isHidden=!0,f.isVisible=!1,q.initialized||za(d),ea("horz"===p[d].dir?"":"center"),(q.initialized||c.triggerEventsOnLoad)&&E("onhide_end",d)):(f.isHiding=!0,fa(d,!1,a)))}},Aa=function(b,a,d,c){if(I()){var b=C.call(this,b),f=q[b];w[b]&&f.isHidden&&!1!==E("onshow_start",b)&&(f.isShowing=!0,f.isSliding=!1,delete q.panesSliding[b],!1===a?fa(b,!0):na(b,!1,d,c))}},ja=function(b,a){if(I()){var d=T(b),c=C.call(this,b),f=q[c];d&&d.stopImmediatePropagation();f.isHidden?Aa(c):f.isClosed?na(c,!!a):fa(c)}},fa=function(b,a,d,c){function f(){k.isMoving=!1;ia(l,!0);var b=p.oppositeEdge[l];q[b].noRoom&&(U(b),da(b));if(!c&&(q.initialized||g.triggerEventsOnLoad)){h||E("onclose_end",l),h&&E("onshow_end",l),j&&E("onhide_end",l)}}var l=C.call(this,b);if(!q.initialized&&w[l]){b=q[l],za(l),b.isClosed=!0,b.isVisible=!1}else{if(I()){var i=w[l],g=t[l],k=q[l],r,h,j;m.queue(function(b){if(!i||!g.closable&&!k.isShowing&&!k.isHiding||!a&&k.isClosed&&!k.isShowing){return b()}var e=!k.isShowing&&!1===E("onclose_start",l);h=k.isShowing;j=k.isHiding;delete k.isShowing;delete k.isHiding;if(e){return b()}r=!d&&!k.isClosed&&"none"!=g.fxName_close;k.isMoving=!0;k.isClosed=!0;k.isVisible=!1;j?k.isHidden=!0:h&&(k.isHidden=!1);k.isSliding?ra(l,!1):ea("horz"===p[l].dir?"":"center",!1);Pa(l);r?(Ba(l,!0),i.hide(g.fxName_close,g.fxSettings_close,g.fxSpeed_close,function(){Ba(l,!1);k.isClosed&&f();b()})):(za(l),f(),b())})}}},Pa=function(a){var d=H[a],c=P[a],g=t[a],f=p[a].side,l=g.resizerClass,i=g.togglerClass,h="-"+a;d.css(f,v.inset[f]).removeClass(l+"-open "+l+h+"-open").removeClass(l+"-sliding "+l+h+"-sliding").addClass(l+"-closed "+l+h+"-closed");g.resizable&&b.layout.plugins.draggable&&d.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");c&&(c.removeClass(i+"-open "+i+h+"-open").addClass(i+"-closed "+i+h+"-closed").attr("title",g.tips.Open),c.children(".content-open").hide(),c.children(".content-closed").css("display","block"));Qa(a,!1);q.initialized&&ma()},na=function(b,a,d,c){function f(){k.isMoving=!1;$a(l);k.isSliding||ea("vert"==p[l].dir?"center":"",!1);Oa(l)}if(I()){var l=C.call(this,b),g=w[l],h=t[l],k=q[l],r,j;m.queue(function(b){if(!g||!h.resizable&&!h.closable&&!k.isShowing||k.isVisible&&!k.isSliding){return b()}if(k.isHidden&&!k.isShowing){b(),Aa(l,!0)}else{k.autoResize&&k.size!=h.size?ga(l,h.size,!0,!0,!0):U(l,a);var e=E("onopen_start",l);if("abort"===e){return b()}"NC"!==e&&U(l,a);if(k.minSize>k.maxSize){return Qa(l,!1),!c&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),b()}a?ra(l,!0):k.isSliding?ra(l,!1):h.slidable&&ia(l,!1);k.noRoom=!1;da(l);j=k.isShowing;delete k.isShowing;r=!d&&k.isClosed&&"none"!=h.fxName_open;k.isMoving=!0;k.isVisible=!0;k.isClosed=!1;j&&(k.isHidden=!1);r?(Ba(l,!0),g.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,function(){Ba(l,!1);k.isVisible&&f();b()})):(mb(l),f(),b())}})}},Oa=function(a,d){var c=w[a],g=H[a],f=P[a],l=t[a],i=q[a],h=p[a].side,k=l.resizerClass,r=l.togglerClass,j="-"+a;g.css(h,v.inset[h]+ca(a)).removeClass(k+"-closed "+k+j+"-closed").addClass(k+"-open "+k+j+"-open");i.isSliding?g.addClass(k+"-sliding "+k+j+"-sliding"):g.removeClass(k+"-sliding "+k+j+"-sliding");Z(0,g);l.resizable&&b.layout.plugins.draggable?g.draggable("enable").css("cursor",l.resizerCursor).attr("title",l.tips.Resize):i.isSliding||g.css("cursor","default");f&&(f.removeClass(r+"-closed "+r+j+"-closed").addClass(r+"-open "+r+j+"-open").attr("title",l.tips.Close),Z(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));Qa(a,!i.isSliding);b.extend(i,D(c));q.initialized&&(ma(),la(a,!0));if(!d&&(q.initialized||l.triggerEventsOnLoad)&&c.is(":visible")){E("onopen_end",a),i.isShowing&&E("onshow_end",a),q.initialized&&E("onresize_end",a)}},nb=function(b){function a(){f.isClosed?f.isMoving||na(c,!0):ra(c,!0)}if(I()){var d=T(b),c=C.call(this,b),f=q[c],b=t[c].slideDelay_open;d&&d.stopImmediatePropagation();f.isClosed&&d&&"mouseenter"===d.type&&0<b?N.set(c+"_openSlider",a,b):a()}},Ra=function(a){function c(){f.isClosed?ra(g,!1):f.isMoving||fa(g)}if(I()){var n=T(a),g=C.call(this,a),a=t[g],f=q[g],l=f.isMoving?1000:300;!f.isClosed&&!f.isResizing&&("click"===a.slideTrigger_close?c():a.preventQuickSlideClose&&f.isMoving||a.preventPrematureSlideClose&&n&&b.layout.isMouseOverElem(n,w[g])||(n?N.set(g+"_closeSlider",c,d(a.slideDelay_close,l)):c()))}},Ba=function(b,a){var d=w[b],c=q[b],f=t[b],g=t.zIndexes;a?(qa(b,{animation:!0,objectsOnly:!0}),d.css({zIndex:g.pane_animate}),"south"==b?d.css({top:v.inset.top+v.innerHeight-d.outerHeight()}):"east"==b&&d.css({left:v.inset.left+v.innerWidth-d.outerWidth()})):(va(),d.css({zIndex:c.isSliding?g.pane_sliding:g.pane_normal}),"south"==b?d.css({top:"auto"}):"east"==b&&!d.css("left").match(/\-99999/)&&d.css({left:"auto"}),F.msie&&(f.fxOpacityFix&&"slide"!=f.fxName_open&&d.css("filter")&&1==d.css("opacity"))&&d[0].style.removeAttribute("filter"))},ia=function(b,a){var d=t[b],c=H[b],f=d.slideTrigger_open.toLowerCase();if(c&&(!a||d.slidable)){f.match(/mouseover/)?f=d.slideTrigger_open="mouseenter":f.match(/(click|dblclick|mouseenter)/)||(f=d.slideTrigger_open="click");if(d.resizerDblClickToggle&&f.match(/click/)){c[a?"unbind":"bind"]("dblclick."+L,ja)}c[a?"bind":"unbind"](f+"."+L,nb).css("cursor",a?d.sliderCursor:"default").attr("title",a?d.tips.Slide:"")}},ra=function(b,a){function d(a){N.clear(b+"_closeSlider");a.stopPropagation()}var c=t[b],f=q[b],g=t.zIndexes,i=c.slideTrigger_close.toLowerCase(),h=a?"bind":"unbind",k=w[b],r=H[b];N.clear(b+"_closeSlider");a?(f.isSliding=!0,q.panesSliding[b]=!0,ia(b,!1)):(f.isSliding=!1,delete q.panesSliding[b]);k.css("zIndex",a?g.pane_sliding:g.pane_normal);r.css("zIndex",a?g.pane_sliding+2:g.resizer_normal);i.match(/(click|mouseleave)/)||(i=c.slideTrigger_close="mouseleave");r[h](i,Ra);"mouseleave"===i&&(k[h]("mouseleave."+L,Ra),r[h]("mouseenter."+L,d),k[h]("mouseenter."+L,d));a?"click"===i&&!c.resizable&&(r.css("cursor",a?c.sliderCursor:"default"),r.attr("title",a?c.tips.Close:"")):N.clear(b+"_closeSlider")},da=function(a,d,c,g){var d=t[a],f=q[a],l=p[a],i=w[a],h=H[a],k="vert"===l.dir,r=!1;if("center"===a||k&&f.noVerticalRoom){(r=0<=f.maxHeight)&&f.noRoom?(mb(a),h&&h.show(),f.isVisible=!0,f.noRoom=!1,k&&(f.noVerticalRoom=!1),$a(a)):!r&&!f.noRoom&&(za(a),h&&h.hide(),f.isVisible=!1,f.noRoom=!0)}"center"!==a&&(f.minSize<=f.maxSize?(f.size>f.maxSize?ga(a,f.maxSize,c,!0,g):f.size<f.minSize?ga(a,f.minSize,c,!0,g):h&&(f.isVisible&&i.is(":visible"))&&(c=f.size+v.inset[l.side],b.layout.cssNum(h,l.side)!=c&&h.css(l.side,c)),f.noRoom&&(f.wasOpen&&d.closable?d.autoReopen?na(a,!1,!0,!0):f.noRoom=!1:Aa(a,f.wasOpen,!0,!0))):f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(d.closable?fa(a,!0,!0):Na(a,!0))))},ya=function(b,a,d,c,f){if(I()){var b=C.call(this,b),g=t[b],h=q[b],f=f||g.livePaneResizing&&!h.isResizing;h.autoResize=!1;ga(b,a,d,c,f)}},ga=function(e,c,g,h,f){function l(){for(var a="width"===aa?r.outerWidth():r.outerHeight(),a=[{pane:i,count:1,target:c,actual:a,correct:c===a,attempt:c,cssSize:z}],e=a[0],h={},l="Inaccurate size after resizing the "+i+"-pane.";!e.correct;){h={pane:i,count:e.count+1,target:c};h.attempt=e.actual>c?d(0,e.attempt-(e.actual-c)):d(0,e.attempt+(c-e.actual));h.cssSize=("horz"==p[i].dir?x:A)(w[i],h.attempt);r.css(aa,h.cssSize);h.actual="width"==aa?r.outerWidth():r.outerHeight();h.correct=c===h.actual;1===a.length&&(Y(l,!1,!0),Y(e,!1,!0));Y(h,!1,!0);if(3<a.length){break}a.push(h);e=a[a.length-1]}k.size=c;b.extend(k,D(r));k.isVisible&&r.is(":visible")&&(ta&&ta.css(Ya,c+v.inset[Ya]),la(i));!g&&(!B&&q.initialized&&k.isVisible)&&E("onresize_end",i);g||(k.isSliding||ea("horz"==p[i].dir?"":"center",B,f),ma());e=p.oppositeEdge[i];c<F&&q[e].noRoom&&(U(e),da(e,!1,g));1<a.length&&Y(l+"\nSee the Error Console for details.",!0,!0)}if(I()){var i=C.call(this,e),j=t[i],k=q[i],r=w[i],ta=H[i],Ya=p[i].side,aa=p[i].sizeType.toLowerCase(),B=k.isResizing&&!j.triggerEventsDuringLiveResize,y=!0!==h&&j.animatePaneSizing,F,z;m.queue(function(e){U(i);F=k.size;c=ba(i,c);c=d(c,ba(i,j.minSize));c=a(c,k.maxSize);if(c<k.minSize){e(),da(i,!1,g)}else{if(!f&&c===F){return e()}k.newSize=c;!g&&(q.initialized&&k.isVisible)&&E("onresize_start",i);z=("horz"==p[i].dir?x:A)(w[i],c);if(y&&r.is(":visible")){var h=b.layout.effects.size[i]||b.layout.effects.size.all,h=j.fxSettings_size.easing||h.easing,v=t.zIndexes,m={};m[aa]=z+"px";k.isMoving=!0;r.css({zIndex:v.pane_animate}).show().animate(m,j.fxSpeed_size,h,function(){r.css({zIndex:k.isSliding?v.pane_sliding:v.pane_normal});k.isMoving=!1;delete k.newSize;l();e()})}else{r.css(aa,z),delete k.newSize,r.is(":visible")?l():(k.size=c,b.extend(k,D(r))),e()}}})}},ea=function(a,c,g){a=(a?a:"east,west,center").split(",");b.each(a,function(a,e){if(w[e]){var h=t[e],i=q[e],j=w[e],k=!0,r={},p=b.layout.showInvisibly(j),m={top:ca("north",!0),bottom:ca("south",!0),left:ca("west",!0),right:ca("east",!0),width:0,height:0};m.width=v.innerWidth-m.left-m.right;m.height=v.innerHeight-m.bottom-m.top;m.top+=v.inset.top;m.bottom+=v.inset.bottom;m.left+=v.inset.left;m.right+=v.inset.right;b.extend(i,D(j));if("center"===e){if(!g&&i.isVisible&&m.width===i.outerWidth&&m.height===i.outerHeight){return j.css(p),!0}b.extend(i,ua(e),{maxWidth:m.width,maxHeight:m.height});r=m;i.newWidth=r.width;i.newHeight=r.height;r.width=A(j,r.width);r.height=x(j,r.height);k=0<=r.width&&0<=r.height;if(!q.initialized&&h.minWidth>m.width){var h=h.minWidth-i.outerWidth,m=t.east.minSize||0,B=t.west.minSize||0,y=q.east.size,z=q.west.size,C=y,G=z;0<h&&(q.east.isVisible&&y>m)&&(C=d(y-m,y-h),h-=y-C);0<h&&(q.west.isVisible&&z>B)&&(G=d(z-B,z-h),h-=z-G);if(0===h){y&&y!=m&&ga("east",C,!0,!0,g);z&&z!=B&&ga("west",G,!0,!0,g);ea("center",c,g);j.css(p);return}}}else{i.isVisible&&!i.noVerticalRoom&&b.extend(i,D(j),ua(e));if(!g&&!i.noVerticalRoom&&m.height===i.outerHeight){return j.css(p),!0}r.top=m.top;r.bottom=m.bottom;i.newSize=m.height;r.height=x(j,m.height);i.maxHeight=r.height;k=0<=i.maxHeight;k||(i.noVerticalRoom=!0)}k?(!c&&q.initialized&&E("onresize_start",e),j.css(r),"center"!==e&&ma(e),i.noRoom&&(!i.isClosed&&!i.isHidden)&&da(e),i.isVisible&&(b.extend(i,D(j)),q.initialized&&la(e))):!i.noRoom&&i.isVisible&&da(e);j.css(p);delete i.newSize;delete i.newWidth;delete i.newHeight;if(!i.isVisible){return !0}"center"===e&&(i=F.isIE6||!F.boxModel,w.north&&(i||"IFRAME"==q.north.tagName)&&w.north.css("width",A(w.north,v.innerWidth)),w.south&&(i||"IFRAME"==q.south.tagName)&&w.south.css("width",A(w.south,v.innerWidth)));!c&&q.initialized&&E("onresize_end",e)}})},ka=function(a){C(a);if(m.is(":visible")){if(q.initialized){if(!0===a&&b.isPlainObject(t.outset)&&m.css(t.outset),b.extend(v,D(m,t.inset)),v.outerHeight){!0===a&&jb();if(!1===E("onresizeall_start")){return !1}var d,c,g;b.each(["south","north","east","west"],function(b,a){w[a]&&(c=t[a],g=q[a],g.autoResize&&g.size!=c.size?ga(a,c.size,!0,!0,!0):(U(a),da(a,!1,!0,!0)))});ea("",!0,!0);ma();b.each(p.allPanes,function(a,b){(d=w[b])&&q[b].isVisible&&E("onresize_end",b)});E("onresizeall_end")}}else{wa()}}},Za=function(a,d){var c=C.call(this,a);t[c].resizeChildren&&(d||xa(c),c=X[c],b.isPlainObject(c)&&b.each(c,function(b,a){a.resizeAll()}))},la=function(a,c){if(I()){var h=C.call(this,a),h=h?h.split(","):p.allPanes;b.each(h,function(a,e){function h(a){return d(j.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function i(){var a=t[e].contentIgnoreSelector,a=k.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),b=a.filter(":visible"),d=b.filter(":last");m={top:k[0].offsetTop,height:k.outerHeight(),numFooters:a.length,hiddenFooters:a.length-b.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=d.length?d[0].offsetTop+d.outerHeight()-m.bottom+h(d):h(k)}var n=w[e],k=Q[e],r=t[e],j=q[e],m=j.content;if(!n||!k||!n.is(":visible")){return !0}if(!k.length&&(Ma(e,!1),!k)){return}if(!1!==E("onsizecontent_start",e)){if(!j.isMoving&&!j.isResizing||r.liveContentResizing||c||void 0==m.top){i(),0<m.hiddenFooters&&"hidden"===n.css("overflow")&&(n.css("overflow","visible"),i(),n.css("overflow","hidden"))}n=j.innerHeight-(m.spaceAbove-j.css.paddingTop)-(m.spaceBelow-j.css.paddingBottom);if(!k.is(":visible")||m.height!=n){var v=k,r=v;g(v)?r=w[v]:v.jquery||(r=b(v));v=x(r,n);r.css({height:v,visibility:"visible"});0<v&&0<r.innerWidth()?r.data("autoHidden")&&(r.show().data("autoHidden",!1),F.mozilla||r.css(p.hidden).css(p.visible)):r.data("autoHidden")||r.hide().data("autoHidden",!0);m.height=n}q.initialized&&E("onsizecontent_end",e)}})}},ma=function(a){a=(a=C.call(this,a))?a.split(","):p.borderPanes;b.each(a,function(a,e){var d=t[e],f=q[e],h=w[e],i=H[e],j=P[e],k;if(h&&i){var r=p[e].dir,m=f.isClosed?"_closed":"_open",B=d["spacing"+m],y=d["togglerAlign"+m],m=d["togglerLength"+m],z;if(0===B){i.hide()}else{!f.noRoom&&!f.isHidden&&i.show();"horz"===r?(z=v.innerWidth,f.resizerLength=z,h=b.layout.cssNum(h,"left"),i.css({width:A(i,z),height:x(i,B),left:-9999<h?h:v.inset.left})):(z=h.outerHeight(),f.resizerLength=z,i.css({height:x(i,z),width:A(i,B),top:v.inset.top+ca("north",!0)}));Z(d,i);if(j){if(0===m||f.isSliding&&d.hideTogglerOnSlide){j.hide();return}j.show();if(!(0<m)||"100%"===m||m>z){m=z,y=0}else{if(g(y)){switch(y){case"top":case"left":y=0;break;case"bottom":case"right":y=z-m;break;default:y=c((z-m)/2)}}else{h=parseInt(y,10),y=0<=y?h:z-m+h}}if("horz"===r){var D=A(j,m);j.css({width:D,height:x(j,B),left:y,top:0});j.children(".content").each(function(){k=b(this);k.css("marginLeft",c((D-k.outerWidth())/2))})}else{var C=x(j,m);j.css({height:C,width:A(j,B),top:y,left:0});j.children(".content").each(function(){k=b(this);k.css("marginTop",c((C-k.outerHeight())/2))})}Z(0,j)}if(!q.initialized&&(d.initHidden||f.noRoom)){i.hide(),j&&j.hide()}}}})},kb=function(a){if(I()){var b=C.call(this,a),a=P[b],d=t[b];a&&(d.closable=!0,a.bind("click."+L,function(a){a.stopPropagation();ja(b)}).css("visibility","visible").css("cursor","pointer").attr("title",q[b].isClosed?d.tips.Open:d.tips.Close).show())}},Qa=function(a,d){b.layout.plugins.buttons&&b.each(q[a].pins,function(c,g){b.layout.buttons.setPinState(y,b(g),a,d)})},m=b(this).eq(0);if(!m.length){return Y(t.errors.containerMissing)}if(m.data("layoutContainer")&&m.data("layout")){return m.data("layout")}var w={},Q={},H={},P={},$=b([]),v=q.container,L=q.id,y={options:t,state:q,container:m,panes:w,contents:Q,resizers:H,togglers:P,hide:Na,show:Aa,toggle:ja,open:na,close:fa,slideOpen:nb,slideClose:Ra,slideToggle:function(a){a=C.call(this,a);ja(a,!0)},setSizeLimits:U,_sizePane:ga,sizePane:ya,sizeContent:la,swapPanes:function(a,c){function g(a){var d=w[a],c=Q[a];return !d?!1:{pane:a,P:d?d[0]:!1,C:c?c[0]:!1,state:b.extend(!0,{},q[a]),options:b.extend(!0,{},t[a])}}function h(a,c){if(a){var e=a.P,f=a.C,g=a.pane,i=p[c],j=b.extend(!0,{},q[c]),n=t[c],l={resizerCursor:n.resizerCursor};b.each(["fxName","fxSpeed","fxSettings"],function(a,b){l[b+"_open"]=n[b+"_open"];l[b+"_close"]=n[b+"_close"];l[b+"_size"]=n[b+"_size"]});w[c]=b(e).data({layoutPane:y[c],layoutEdge:c}).css(p.hidden).css(i.cssReq);Q[c]=f?b(f):!1;t[c]=b.extend(!0,{},a.options,l);q[c]=b.extend(!0,{},a.state);e.className=e.className.replace(RegExp(n.paneClass+"-"+g,"g"),n.paneClass+"-"+c);Ja(c);i.dir!=p[g].dir?(e=m[c]||0,U(c),e=d(e,q[c].minSize),ya(c,e,!0,!0)):H[c].css(i.side,v.inset[i.side]+(q[c].isVisible?ca(c):0));a.state.isVisible&&!j.isVisible?Oa(c,!0):(Pa(c),ia(c,!0));a=null}}if(I()){var f=C.call(this,a);q[f].edge=c;q[c].edge=f;if(!1===E("onswap_start",f)||!1===E("onswap_start",c)){q[f].edge=f,q[c].edge=c}else{var j=g(f),i=g(c),m={};m[f]=j?j.state.size:0;m[c]=i?i.state.size:0;w[f]=!1;w[c]=!1;q[f]={};q[c]={};P[f]&&P[f].remove();P[c]&&P[c].remove();H[f]&&H[f].remove();H[c]&&H[c].remove();H[f]=H[c]=P[f]=P[c]=!1;h(j,c);h(i,f);j=i=m=null;w[f]&&w[f].css(p.visible);w[c]&&w[c].css(p.visible);ka();E("onswap_end",f);E("onswap_end",c)}}},showMasks:qa,hideMasks:va,initContent:Ma,addPane:db,removePane:La,createChildren:Ka,refreshChildren:xa,enableClosable:kb,disableClosable:function(a,b){if(I()){var c=C.call(this,a),d=P[c];d&&(t[c].closable=!1,q[c].isClosed&&na(c,!1,!0),d.unbind("."+L).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(I()){var a=C.call(this,a),b=H[a];b&&b.data("draggable")&&(t[a].slidable=!0,q[a].isClosed&&ia(a,!0))}},disableSlidable:function(a){if(I()){var a=C.call(this,a),b=H[a];b&&(t[a].slidable=!1,q[a].isSliding?fa(a,!1,!0):(ia(a,!1),b.css("cursor","default").attr("title",""),Z(null,b[0])))}},enableResizable:function(a){if(I()){var a=C.call(this,a),b=H[a],c=t[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),q[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(I()){var a=C.call(this,a),b=H[a];b&&b.data("draggable")&&(t[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),Z(null,b[0]))}},allowOverflow:J,resetOverflow:G,destroy:function(a,c){b(window).unbind("."+L);b(document).unbind("."+L);"object"===typeof a?C(a):c=a;m.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(t.containerClass).unbind("."+L);$.remove();b.each(p.allPanes,function(a,b){La(b,!1,!0,c)});m.data("layoutCSS")&&!m.data("layoutRole")&&m.css(m.data("layoutCSS")).removeData("layoutCSS");"BODY"===v.tagName&&(m=b("html")).data("layoutCSS")&&m.css(m.data("layoutCSS")).removeData("layoutCSS");h(y,b.layout.onDestroy);hb();for(var d in y){d.match(/^(container|options)$/)||delete y[d]}y.destroyed=!0;return y},initPanes:I,resizeAll:ka,runCallbacks:E,hasParentLayout:!1,children:X,north:!1,south:!1,west:!1,east:!1,center:!1},Sa;var R,Ta,O,Ca,ha,oa,S,j=b.layout.transformData(j,!0),j=b.layout.backwardCompatibility.renameAllOptions(j);if(!b.isEmptyObject(j.panes)){R=b.layout.optionsMap.noDefault;ha=0;for(oa=R.length;ha<oa;ha++){O=R[ha],delete j.panes[O]}R=b.layout.optionsMap.layout;ha=0;for(oa=R.length;ha<oa;ha++){O=R[ha],delete j.panes[O]}}R=b.layout.optionsMap.layout;var wb=b.layout.config.optionRootKeys;for(O in j){Ca=j[O],0>b.inArray(O,wb)&&0>b.inArray(O,R)&&(j.panes[O]||(j.panes[O]=b.isPlainObject(Ca)?b.extend(!0,{},Ca):Ca),delete j[O])}b.extend(!0,t,j);b.each(p.allPanes,function(a,c){p[c]=b.extend(!0,{},p.panes,p[c]);Ta=t.panes;S=t[c];if("center"===c){R=b.layout.optionsMap.center;a=0;for(oa=R.length;a<oa;a++){if(O=R[a],!j.center[O]&&(j.panes[O]||!S[O])){S[O]=Ta[O]}}}else{S=t[c]=b.extend(!0,{},Ta,S);var d=t[c],g=t.panes;d.fxSettings||(d.fxSettings={});g.fxSettings||(g.fxSettings={});b.each(["_open","_close","_size"],function(a,e){var h="fxName"+e,j="fxSpeed"+e,k="fxSettings"+e,m=d[h]=d[h]||g[h]||d.fxName||g.fxName||"none",p=b.effects&&(b.effects[m]||b.effects.effect&&b.effects.effect[m]);if("none"===m||!t.effects[m]||!p){m=d[h]="none"}m=t.effects[m]||{};h=m.all||null;m=m[c]||null;d[j]=d[j]||g[j]||d.fxSpeed||g.fxSpeed||null;d[k]=b.extend(!0,{},h,m,g.fxSettings,d.fxSettings,g[k],d[k])});delete d.fxName;delete d.fxSpeed;delete d.fxSettings;S.resizerClass||(S.resizerClass="ui-layout-resizer");S.togglerClass||(S.togglerClass="ui-layout-toggler")}S.paneClass||(S.paneClass="ui-layout-pane")});var Da=j.zIndex,sa=t.zIndexes;0<Da&&(sa.pane_normal=Da,sa.content_mask=d(Da+1,sa.content_mask),sa.resizer_normal=d(Da+2,sa.resizer_normal));delete t.panes;var xb=t,ob=q;ob.creatingLayout=!0;h(y,b.layout.onCreate);if(!1===E("onload_start")){Sa="cancel"}else{var Ua=m[0],V=b("html"),pb=v.tagName=Ua.tagName,qb=v.id=Ua.id,rb=v.className=Ua.className,M=t,Ea=M.name,Va={},Fa=m.data("parentLayout"),Ga=m.data("layoutEdge"),Wa=Fa&&Ga,pa=b.layout.cssNum,Xa,W;v.selector=m.selector.split(".slice")[0];v.ref=(M.name?M.name+" layout / ":"")+pb+(qb?"#"+qb:rb?".["+rb+"]":"");v.isBody="BODY"===pb;!Wa&&!v.isBody&&(Xa=m.closest("."+b.layout.defaults.panes.paneClass),Fa=Xa.data("parentLayout"),Ga=Xa.data("layoutEdge"),Wa=Fa&&Ga);m.data({layout:y,layoutContainer:L}).addClass(M.containerClass);var sb={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(Ea in sb){m.bind("layout"+Ea.toLowerCase()+"."+L,y[sb[Ea]||Ea])}Wa&&(y.hasParentLayout=!0,Fa.refreshChildren(Ga,y));m.data("layoutCSS")||(v.isBody?(m.data("layoutCSS",b.extend(z(m,"position,margin,padding,border"),{height:m.css("height"),overflow:m.css("overflow"),overflowX:m.css("overflowX"),overflowY:m.css("overflowY")})),V.data("layoutCSS",b.extend(z(V,"padding"),{height:"auto",overflow:V.css("overflow"),overflowX:V.css("overflowX"),overflowY:V.css("overflowY")}))):m.data("layoutCSS",z(m,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{Va={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};m.css(Va);M.inset&&!b.isPlainObject(M.inset)&&(W=parseInt(M.inset,10)||0,M.inset={top:W,bottom:W,left:W,right:W});if(v.isBody){M.outset?b.isPlainObject(M.outset)||(W=parseInt(M.outset,10)||0,M.outset={top:W,bottom:W,left:W,right:W}):M.outset={top:pa(V,"paddingTop"),bottom:pa(V,"paddingBottom"),left:pa(V,"paddingLeft"),right:pa(V,"paddingRight")},V.css(Va).css({height:"100%",border:"none",padding:0,margin:0}),F.isIE6?(m.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),M.inset||(M.inset=D(m).inset)):(m.css({width:"auto",height:"auto",margin:0,position:"absolute"}),m.css(M.outset)),b.extend(v,D(m,M.inset))}else{var tb=m.css("position");(!tb||!tb.match(/(fixed|absolute|relative)/))&&m.css("position","relative");m.is(":visible")&&(b.extend(v,D(m,M.inset)),1>v.innerHeight&&Y(M.errors.noContainerHeight.replace(/CONTAINER/,v.ref)))}pa(m,"minWidth")&&m.parent().css("overflowX","auto");pa(m,"minHeight")&&m.parent().css("overflowY","auto")}catch(yb){}ib();b(window).bind("unload."+L,hb);h(y,b.layout.onLoad);xb.initPanes&&wa();delete ob.creatingLayout;Sa=q.initialized}return"cancel"===Sa?null:y};b(function(){var a=b.layout.browser;a.msie&&(a.boxModel=b.support.boxModel)})})(jQuery);(function(b){b.ui||(b.ui={});b.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(a){for(var d=document.cookie,d=d?d.split(";"):[],c,g=0,h=d.length;g<h;g++){if(c=b.trim(d[g]).split("="),c[0]==a){return decodeURIComponent(c[1])}}return null},write:function(a,b,c){var g="",h="",j=!1,c=c||{},B=c.expires;if(B&&B.toUTCString){h=B}else{if(null===B||"number"===typeof B){h=new Date,0<B?h.setDate(h.getDate()+B):(h.setFullYear(1970),j=!0)}}h&&(g+=";expires="+h.toUTCString());c.path&&(g+=";path="+c.path);c.domain&&(g+=";domain="+c.domain);c.secure&&(g+=";secure");document.cookie=a+"="+(j?"":encodeURIComponent(b))+g},clear:function(a){b.ui.cookie.write(a,"",{expires:-1})}};b.cookie||(b.cookie=function(a,d,c){var g=b.ui.cookie;if(null===d){g.clear(a)}else{if(void 0===d){return g.read(a)}g.write(a,d,c)}});b.layout.plugins.stateManagement=!0;b.layout.config.optionRootKeys.push("stateManagement");b.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};b.layout.optionsMap.layout.push("stateManagement");b.layout.state={saveCookie:function(a,d,c){var g=a.options,h=g.stateManagement,c=b.extend(!0,{},h.cookie,c||null),a=a.state.stateData=a.readState(d||h.stateKeys);b.ui.cookie.write(c.name||g.name||"Layout",b.layout.state.encodeJSON(a),c);return b.extend(!0,{},a)},deleteCookie:function(a){a=a.options;b.ui.cookie.clear(a.stateManagement.cookie.name||a.name||"Layout")},readCookie:function(a){a=a.options;return(a=b.ui.cookie.read(a.stateManagement.cookie.name||a.name||"Layout"))?b.layout.state.decodeJSON(a):{}},loadCookie:function(a){var d=b.layout.state.readCookie(a);d&&(a.state.stateData=b.extend(!0,{},d),a.loadState(d));return d},loadState:function(a,d,c){if(b.isPlainObject(d)&&!b.isEmptyObject(d)){if(d=a.state.stateData=b.layout.transformData(d),c=b.extend({animateLoad:!1,includeChildren:a.options.stateManagement.includeChildren},c),a.state.initialized){var g=!c.animateLoad,h,j,B,J;b.each(b.layout.config.borderPanes,function(c,x){p=d[x];b.isPlainObject(p)&&(s=p.size,h=p.initClosed,j=p.initHidden,ar=p.autoResize,B=a.state[x],J=B.isVisible,ar&&(B.autoResize=ar),J||a._sizePane(x,s,!1,!1,!1),!0===j?a.hide(x,g):!0===h?a.close(x,!1,g):!1===h?a.open(x,!1,g):!1===j&&a.show(x,!1,g),J&&a._sizePane(x,s,!1,!1,g))});if(c.includeChildren){var G,F;b.each(a.children,function(a,c){(G=d[a]?d[a].children:0)&&c&&b.each(c,function(a,b){F=G[a];b&&F&&b.loadState(F)})})}}else{var p=b.extend(!0,{},d);b.each(b.layout.config.allPanes,function(a,b){p[b]&&delete p[b].children});b.extend(!0,a.options,p)}}},readState:function(a,d){"string"===b.type(d)&&(d={keys:d});d||(d={});var c=a.options.stateManagement,g=d.includeChildren,g=void 0!==g?g:c.includeChildren,c=d.stateKeys||c.stateKeys,h={isClosed:"initClosed",isHidden:"initHidden"},j=a.state,B=b.layout.config.allPanes,J={},G,F,p,A,x,D;b.isArray(c)&&(c=c.join(","));for(var c=c.replace(/__/g,".").split(","),z=0,T=c.length;z<T;z++){G=c[z].split("."),F=G[0],G=G[1],0>b.inArray(F,B)||(p=j[F][G],void 0!=p&&("isClosed"==G&&j[F].isSliding&&(p=!0),(J[F]||(J[F]={}))[h[G]?h[G]:G]=p))}g&&b.each(B,function(c,d){x=a.children[d];A=j.stateData[d];b.isPlainObject(x)&&!b.isEmptyObject(x)&&(D=J[d]||(J[d]={}),D.children||(D.children={}),b.each(x,function(a,c){c.state.initialized?D.children[a]=b.layout.state.readState(c):A&&(A.children&&A.children[a])&&(D.children[a]=b.extend(!0,{},A.children[a]))}))});return J},encodeJSON:function(a){function d(a){var g=[],h=0,j,B,J,G=b.isArray(a);for(j in a){B=a[j],J=typeof B,"string"==J?B='"'+B+'"':"object"==J&&(B=d(B)),g[h++]=(!G?'"'+j+'":':"")+B}return(G?"[":"{")+g.join(",")+(G?"]":"}")}return d(a)},decodeJSON:function(a){try{return b.parseJSON?b.parseJSON(a):window.eval("("+a+")")||{}}catch(d){return{}}},_create:function(a){var d=b.layout.state,c=a.options.stateManagement;b.extend(a,{readCookie:function(){return d.readCookie(a)},deleteCookie:function(){d.deleteCookie(a)},saveCookie:function(b,c){return d.saveCookie(a,b,c)},loadCookie:function(){return d.loadCookie(a)},loadState:function(b,c){d.loadState(a,b,c)},readState:function(b){return d.readState(a,b)},encodeJSON:d.encodeJSON,decodeJSON:d.decodeJSON});a.state.stateData={};if(c.autoLoad){if(b.isPlainObject(c.autoLoad)){b.isEmptyObject(c.autoLoad)||a.loadState(c.autoLoad)}else{if(c.enabled){if(b.isFunction(c.autoLoad)){var g={};try{g=c.autoLoad(a,a.state,a.options,a.options.name||"")}catch(h){}g&&(b.isPlainObject(g)&&!b.isEmptyObject(g))&&a.loadState(g)}else{a.loadCookie()}}}}},_unload:function(a){var d=a.options.stateManagement;if(d.enabled&&d.autoSave){if(b.isFunction(d.autoSave)){try{d.autoSave(a,a.state,a.options,a.options.name||"")}catch(c){}}else{a.saveCookie()}}}};b.layout.onCreate.push(b.layout.state._create);b.layout.onUnload.push(b.layout.state._unload);b.layout.plugins.buttons=!0;b.layout.defaults.autoBindCustomButtons=!1;b.layout.optionsMap.layout.push("autoBindCustomButtons");b.layout.buttons={init:function(a){var d=a.options.name||"",c;b.each("toggle open close pin toggle-slide open-slide".split(" "),function(g,h){b.each(b.layout.config.borderPanes,function(g,B){b(".ui-layout-button-"+h+"-"+B).each(function(){c=b(this).data("layoutName")||b(this).attr("layoutName");(void 0==c||c===d)&&a.bindButton(this,h,B)})})})},get:function(a,d,c,g){var h=b(d),a=a.options,j=a.errors.addButtonError;h.length?0>b.inArray(c,b.layout.config.borderPanes)?(b.layout.msg(j+" "+a.errors.pane+": "+c,!0),h=b("")):(d=a[c].buttonClass+"-"+g,h.addClass(d+" "+d+"-"+c).data("layoutName",a.name)):b.layout.msg(j+" "+a.errors.selector+": "+d,!0);return h},bind:function(a,d,c,g){var h=b.layout.buttons;switch(c.toLowerCase()){case"toggle":h.addToggle(a,d,g);break;case"open":h.addOpen(a,d,g);break;case"close":h.addClose(a,d,g);break;case"pin":h.addPin(a,d,g);break;case"toggle-slide":h.addToggle(a,d,g,!0);break;case"open-slide":h.addOpen(a,d,g,!0)}return a},addToggle:function(a,d,c,g){b.layout.buttons.get(a,d,c,"toggle").click(function(b){a.toggle(c,!!g);b.stopPropagation()});return a},addOpen:function(a,d,c,g){b.layout.buttons.get(a,d,c,"open").attr("title",a.options[c].tips.Open).click(function(b){a.open(c,!!g);b.stopPropagation()});return a},addClose:function(a,d,c){b.layout.buttons.get(a,d,c,"close").attr("title",a.options[c].tips.Close).click(function(b){a.close(c);b.stopPropagation()});return a},addPin:function(a,d,c){var g=b.layout.buttons,h=g.get(a,d,c,"pin");if(h.length){var j=a.state[c];h.click(function(d){g.setPinState(a,b(this),c,j.isSliding||j.isClosed);j.isSliding||j.isClosed?a.open(c):a.close(c);d.stopPropagation()});g.setPinState(a,h,c,!j.isClosed&&!j.isSliding);j.pins.push(d)}return a},setPinState:function(a,b,c,g){var h=b.attr("pin");if(!(h&&g===("down"==h))){var a=a.options[c],h=a.buttonClass+"-pin",j=h+"-"+c,c=h+"-up "+j+"-up",h=h+"-down "+j+"-down";b.attr("pin",g?"down":"up").attr("title",g?a.tips.Unpin:a.tips.Pin).removeClass(g?c:h).addClass(g?h:c)}},syncPinBtns:function(a,d,c){b.each(a.state[d].pins,function(g,h){b.layout.buttons.setPinState(a,b(h),d,c)})},_load:function(a){var d=b.layout.buttons;b.extend(a,{bindButton:function(b,c,j){return d.bind(a,b,c,j)},addToggleBtn:function(b,c,j){return d.addToggle(a,b,c,j)},addOpenBtn:function(b,c,j){return d.addOpen(a,b,c,j)},addCloseBtn:function(b,c){return d.addClose(a,b,c)},addPinBtn:function(b,c){return d.addPin(a,b,c)}});for(var c=0;4>c;c++){a.state[b.layout.config.borderPanes[c]].pins=[]}a.options.autoBindCustomButtons&&d.init(a)},_unload:function(){}};b.layout.onLoad.push(b.layout.buttons._load);b.layout.plugins.browserZoom=!0;b.layout.defaults.browserZoomCheckInterval=1000;b.layout.optionsMap.layout.push("browserZoomCheckInterval");b.layout.browserZoom={_init:function(a){!1!==b.layout.browserZoom.ratio()&&b.layout.browserZoom._setTimer(a)},_setTimer:function(a){if(!a.destroyed){var d=a.options,c=a.state,g=a.hasParentLayout?5000:Math.max(d.browserZoomCheckInterval,100);setTimeout(function(){if(!a.destroyed&&d.resizeWithWindow){var g=b.layout.browserZoom.ratio();g!==c.browserZoom&&(c.browserZoom=g,a.resizeAll());b.layout.browserZoom._setTimer(a)}},g)}},ratio:function(){function a(a,b){return(100*(parseInt(a,10)/parseInt(b,10))).toFixed()}var d=window,c=screen,g=document,h=g.documentElement||g.body,j=b.layout.browser,B=j.version,J,G,F;return j.msie&&8<B||!j.msie?!1:c.deviceXDPI&&c.systemXDPI?a(c.deviceXDPI,c.systemXDPI):j.webkit&&(J=g.body.getBoundingClientRect)?a(J.left-J.right,g.body.offsetWidth):j.webkit&&(G=d.outerWidth)?a(G,d.innerWidth):(G=c.width)&&(F=h.clientWidth)?a(G,F):!1}};b.layout.onReady.push(b.layout.browserZoom._init)})(jQuery);$(function(){$.extend($.fn.disableTextSelect=function(){return this.each(function(){if($.browser.mozilla){$(this).css("MozUserSelect","none")}else{if($.browser.msie){$(this).bind("selectstart",function(){return false})}else{$(this).mousedown(function(){return false})}}})});$(".noSelect").disableTextSelect()});(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);$(function(){$("a.f-integration-redirect,a.f-integration-postredirect,a.f-integration-doccentralpublic").click(function(a){a.preventDefault();var b=$(this).attr("fullWindow");var e=$(this).attr("hideAddressBar");var f=null;var c=null;var d=null;DoIntegrationPointReDirect(this.href,f,c,b,e,d)});$("a.f-integration-multiredirect").click(function(a){a.preventDefault();var g=$(this);var b=g.attr("fullWindow")||g.hasClass("f-integration-full-window");var i=g.attr("hideAddressBar")||g.hasClass("f-integration-hide-address-bar");var j=null;var c=null;var d=null;var k=window.dataController.getSelectedListings();if(k==""){$.jGrowl("Please select one or more listings.");return}if(g.attr("rel")!=""){var e=k.split(",").length;var f=g.attr("rel");if(f<e){$.jGrowl("You have selected too many listings for this integration (maximum: "+f+").  Please reduce the number of selected listings and try again.",{life:5000});return}}var h=this.href.replace(/%7BlistingId%7D/i,k);DoIntegrationPointReDirect(h,j,c,b,i,d)})});function DoIntegrationPointReDirect(g,c,b,e,a,d){var f=getWindowSettings(c,b,e,a,d);var h=getWindowOptions(f);window.open(g,f.name,h.join(","));return false}function DoIntegrationPointRequestRedirect(d,e,f,c,a,b){if(d.length>0){$.ajax(d,{timeout:8000,success:function(j,h){if(j==null||j.status=="error"||j.message.length<1){$.jGrowl("Form Simplicity denied service access.",{life:5000});return}d=j.message;if(parent.parent.window.openNewBrowser&&(c||a)){parent.parent.window.openNewBrowser(d,c,a)}else{var g=getWindowSettings(winHeight,winWidth,c,a,b);var i=getWindowOptions(g);window.open(d,g.name,i.join(","))}},error:function(){$.jGrowl("Form Simplicity service is not available.",{life:5000});return}})}else{$.jGrowl("Form Simplicity service is not available.",{life:5000});return}}function getWindowSettings(c,b,e,a,d){var f={name:"_blank",windowOpts:{status:"yes",titlebar:"yes",toolbar:"yes",left:null,top:null,width:null,height:null,location:"yes",scrollbars:"yes"}};if(c!=null||b!=null){f.windowOpts.width=b;f.windowOpts.height=c}if(e!==undefined&&((typeof(e)==="string"&&e.toLowerCase()=="true")||(typeof(e)==="boolean"&&e))){var h=1020;var g=713;if(screen){h=parseInt(screen.width,10)-16;g=parseInt(screen.height,10)-60}f.windowOpts.status="no";f.windowOpts.titlebar="no";f.windowOpts.toolbar="no";f.windowOpts.left="0";f.windowOpts.top="0";f.windowOpts.width=h;f.windowOpts.height=g}if(a!==undefined&&((typeof(a)==="string"&&a.toLowerCase()=="true")||(typeof(a)==="boolean"&&a))){f.windowOpts.location="no"}$.extend(f,d);return f}function getWindowOptions(a){var c=[];for(var b in a.windowOpts){if(a.windowOpts.hasOwnProperty(b)&&a.windowOpts[b]!=null){c.push(b+"="+a.windowOpts[b])}}return c};$(function(){$("a.f-integration-hillsidecart-link").click(function(a){a.preventDefault();var e=$(this);var b="What list would you like to add this listing to?";var c=prompt(b,"");if(c==null){return}var d=e.attr("href")+"?ids="+e.find("img.f-integration-hillsidecart-link").attr("listingid")+"&name="+encodeURIComponent(c);UpdateHillside(d)});$("a.f-integration-multihillsidecart").click(function(b){b.preventDefault();var e=$(this);var g=window.dataController.getSelectedListings();if(g==""){$.jGrowl("Please select one or more listings.");return}var c=g.split(",").length;if(e.attr("rel")!=""){var d=e.attr("rel");if(d<c){$.jGrowl("You have selected too many listings for this integration (maximum: "+d+").  Please reduce the number of selected listings and try again.",{life:5000});return}}var a=c==1?"What list would you like to add this listing to?":"What list would you like to add these listings to?";var h=prompt(a,"");if(h==null){return}var f=this.href+"?ids="+g+"&name="+encodeURIComponent(h);UpdateHillside(f)})});function UpdateHillside(a){$.ajax({url:a}).done(function(b){$.jGrowl(b.result)})};function resizePage(){var h=30;var j=false;var d=0;if($("#AddCMASection").length>0||$("#AddCMSection").length>0){d=25}$("#MiddleSection>div").each(function(){if($(this).css("display")!="none"){j=true}});var k=$(window).width();var a=j?67:0;var c=$(window).height()-d-h-a;$("#"+dataController.getTargetFrame()).height(c);if(isTabletDevice()){try{$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.overflow="auto";$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.height=c+"px"}catch(g){}}var l=120;var i=178;var b=165;var f=0;if(k>1050){f=k-1050>100?100:k-1050}$("#ViewReportsParent").width(i);$("#txtViewName").width(l);$("#ViewReportsContainer").css("width","108px");$(".ui-jqgrid").css("right",b+f)}function useCMAListings(e,f,j,a,b,c){parent.$.fn.colorbox.close();var i=frameElement.id;var k=frameElement.id.substring(0,frameElement.id.indexOf("_"));if(a!=2&&a!=3){i=k+"_2"}var d=parent.document.getElementById(i).contentWindow;var h=(e==1)?dataController.getSelectedListings().split(",").slice(0,j).join():(e==2)?dataController.getListingSet(0,j,false):dataController.CurrentID;if(a==2||a==3){appendCMASubTab(c,b,0,h)}else{d.Focus.ClientCatalog.data["cma-2-comparables_Ids"]=d.Focus.ClientCatalog.data["cma-2-comparables_Ids"]||[];var g=h.split(",");$.each(g,function(m,l){if($.inArray(l,d.Focus.ClientCatalog.data["cma-2-comparables_Ids"])==-1){d.Focus.ClientCatalog.data["cma-2-comparables_Ids"].push(g[m])}});parent.$("#"+k).tabs("select","#"+i);d.$("#cma-2-comparables").parent().attr("rel","completedStep");d.$("#cma-2-comparablesList_frame").remove();parent.__dirtyBitTracker.setDirtyBit();d.Focus.Breadcrumb.navigate("cma-2-comparablesList",comparableListUrl+"&listingIDs="+d.Focus.ClientCatalog.data["cma-2-comparables_Ids"].toString(),true)}}$(function(){$(window).resize(resizePage);resizePage();if(dataController.UrlHistories.length>-1){$(".noSelect_back_arrow").addClass("ui-state-disabled")}else{$(".noSelect_back_arrow").removeClass("ui-state-disabled")}if(!$.focusFx){$.focusFx={}}$.extend($.focusFx,{loadViewSelectorNode:function(a,c,d){var b=$("a",a);var e;if(c){if(!d){dataController.setViewFromNode(b)}e=dataController.loadView(d,b)}else{dataController.init(b)}if($("#ReportsBase").css("display")!="none"){$("#ViewReportsContainer").click()}return e},postTreeLoad:function(){var c=$("#ViewSelected").length>0?$("#ViewSelected").val():"";var a=null;if(c.length>0){var b=JSON.parse(c);a=$('#Reports li a[viewID="'+b.viewID+'"]')}else{a=$('#Reports li[isDefaultResult="true"] a')}if($.tree.focused()!=undefined){$.tree.focused().select_branch(a)}}});$.extend($.expr[":"],{containsExact:function(d,c,b){return $.trim($(d).text().toLowerCase())===b[3].toLowerCase()},containsExactCase:function(d,c,b){return $.trim($(d).text())===b[3]}});$(".sf-menu").superfish({onShow:function(){var a=$(this).siblings(".child-menu-div");var c=$(this);var d=a.position().left+a.offset().left;var e=a.position().top+a.offset().top+(a.height()*2);var b=$("#ifDivView");c.css("z-Index","20");b.width(c.width()+40);b.height(c.height());b.css("top",e);b.css("left",d);if(dataController.ShowPDF||dataController.AutoPrintCMASummary){if($.browser.msie||$.browser.mozilla){$("#ifDivView").show()}else{$("#TopSection").height($("#TopSection").height()+b.height()+2)}}},onHide:function(){if($.browser.msie||$.browser.mozilla){$("#ifDivView").hide()}else{$("#TopSection").height(27)}}});$("#ViewReportsContainer").click(function(){$("#Reports").height($(window).height()-75);$("#ReportsBase").css("left",$(window).width()-290);if($("#ReportsBase").css("display")=="none"){$("#ReportsBase").fadeIn("fast");$(".noSelect_arrow").removeClass("noSelect_arrow").addClass("noSelect_arrow_up");if(dataController.ShowPDF||dataController.AutoPrintCMASummary){$("#ReportsBase").css("z-Index","20");var c=$("#"+dataController.getTargetFrame()).width();var a=$("#ReportsBase").width();var b=c-a;$("#"+dataController.getTargetFrame()).attr("width",b-20+"px");$("#"+dataController.getTargetFrame()).css("width",b-20+"px")}}else{$(".noSelect_arrow_up").removeClass("noSelect_arrow_up").addClass("noSelect_arrow");$("#ReportsBase").fadeOut("fast");$("#"+dataController.getTargetFrame()).attr("width","100%");$("#"+dataController.getTargetFrame()).css("width","100%")}});$("#ar-close").click(function(){$("#ViewReportsContainer").click()});$(".noSelect_back_arrow").hover(function(){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if($(this).hasClass("ui-state-disabled")){}else{$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$(".noSelect_back_arrow").click(function(){dataController.getPreviousView()});$(".ui-pg-button").hover(function(a){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(a){if(!$(this).hasClass("ui-state-disabled")){$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$("#Stats").click(function(){dataController.ToggleStats();if(dataController.ShowPDF){dataController.loadView()}});$("#ChangeGeocode").unbind("click").click(function(b){b.preventDefault();if(dataController.SelectedIDs.length==0){alert("Please select a listing")}else{var f=false;var c=480,a=385;if($(this).attr("cboxwidth")){c=$(this).attr("cboxwidth")}if($(this).attr("cboxheight")){a=$(this).attr("cboxheight")}var d=$(this).attr("href");parent.$.fn.colorbox({href:d+"&searchID="+frameElement.id+"&listingId="+dataController.CurrentID,iframe:true,open:true,width:c,height:a,title:"Change Geocode",close:'<button id="Save">Save</button><button id="Close">Cancel</button>',onClosed:false})}});$("#Maintain").unbind("click").click(function(){var d=dataController.getSelectedListings();if(d.length==0){d=dataController.CurrentID}else{var b=false;var a=d.split(",");for(var c=0;c<a.length;c++){if(a[c].toString()==dataController.CurrentID.toString()){b=true;break}}if(!b){d=d+","+dataController.CurrentID}}$("#maintainlink").attr("tabDescription","Listings").attr("subTabDescription","Listings").attr("targetEx","frmMain").attr("url",maintainUrl+"/?listingID="+d).click(parent.loadItem);$("#maintainlink").click()});$("#ShowChecked").click(function(){var a=dataController.SelectedIDs;if(a.length==0){alert("Please select some Listings")}else{dataController.ShowCheckedIDs=new Array(dataController.SelectedIDs.length);for(var c=0;c<dataController.SelectedIDs.length;c++){dataController.ShowCheckedIDs[c]=dataController.SelectedIDs[c]}var d=document.getElementById("ifSpreadsheet")!=null?document.getElementById("ifSpreadsheet").contentWindow:null;dataController.ShowChecked=true;if(dataController.showSelectedIDs()){var b=d!=null&&d.$&&!(dataController.CurrentType=="Spreadsheet"&&dataController.ShowPDF);if(b){d.setGridUrl();var e=d.$("#grid");e.setGridParam({page:1});e.trigger("reloadGrid");$("#Stats").trigger("reloadStats")}if(dataController.CurrentType!="Spreadsheet"||(dataController.CurrentType=="Spreadsheet"&&dataController.ShowPDF)){if(b){d.reloadCurrentView=true}else{dataController.loadView()}}}}});$("#ShowAll").click(function(){if(dataController.ShowChecked){var a=document.getElementById("ifSpreadsheet")!=null?document.getElementById("ifSpreadsheet").contentWindow:null;dataController.ShowChecked=false;if(dataController.showAllIDs()){var b=a!=null&&a.$&&!(dataController.CurrentType=="Spreadsheet"&&dataController.ShowPDF);if(b){a.setGridUrl();a.$("#grid").trigger("reloadGrid");$("#Stats").trigger("reloadStats")}if(dataController.CurrentType!="Spreadsheet"||(dataController.CurrentType=="Spreadsheet"&&dataController.ShowPDF)){if(b){a.reloadCurrentView=true}else{dataController.loadView()}}}}});$(".HoverAction").click(function(a){var c=$(this);var b=c.attr("id");$("#dialog"+b).toggle();if($("#dialog"+b).hasClass("NotLoaded")){$("#dialog"+b).removeClass("NotLoaded").show();$.ajax({type:"POST",data:"&listingIDs="+((dataController!=null&&dataController.ShowChecked==true)?dataController.getSelectedListings():""),url:c.attr("rel"),success:function(d){try{$("#dialog"+b).html(d);resizePage()}catch(e){alert(e)}},error:function(d){this.ajaxRetryOnError(d,"Error retrieving data from server.")}})}else{resizePage()}});$("#ExportCSV").click(function(){if(dataController.CurrentViewID==2){$.jGrowl("Export is not available for this report.");return}var b="?";var a="&";var c="t="+dataController.TotalRecords;var e="s="+dataController.getSelectedListings();var h="cv="+dataController.LastViewedSpreadsheetID;var d="";var g="";var f=dataController.SortArray[dataController.LastViewedSpreadsheetID];if(f!=null){$.each(f,function(j,i){if(i!=null&&i.sidx!=null&&i.sidx.length>0){d+=i.sidx+",";g+=i.sord+","}})}d=d.length>0?"&sc="+d.substring(0,d.length-1):"";g=g.length>0?"&so="+g.substring(0,g.length-1):"";b+=e+a+c+a+h+a+"searchID="+frameElement.id+d+g;parent.$.fn.colorbox({href:exportCSVUrl+b,open:true,iframe:true,width:"400px",height:"300px",title:"Export to (CSV) Excel",close:'<button id="Export">Export</button><button id="Cancel">Cancel</button>',onClosed:false})});$("#ExportXLS").click(function(){dataController.getExcelReport(false)});$("#ExportSpreadsheetXLS").click(function(){dataController.getExcelReport(true)});$("#LookupStatus").click(function(){if(dataController.SelectedIDs.length<1){$.jGrowl("You have 0 listings selected to change the "+lookUpTitle);return false}else{var a="?target="+lookUpStatusTarget+"&lids="+dataController.getSelectedListings();parent.$.fn.colorbox({href:lookUpStatusUrl+a,open:true,iframe:true,width:"400px",height:"400px",title:"Modify "+lookUpTitle,close:'<button id="Save">Save</button><button id="Cancel">Cancel</button>',onClosed:false})}});$(".f-form-popup-print").click(function(c){c.preventDefault();if(!$(this).hasClass("sf-disabled")){if(dataController.CurrentType=="Spreadsheet"||(searchType!="TAX"&&dataController.CurrentViewID==vidHotsheet)){var b="Print";if($(this).attr("cboxsavebuttontext")){b=$(this).attr("cboxsavebuttontext")}var f=480,a=385;if($(this).attr("cboxwidth")){f=$(this).attr("cboxwidth")}if($(this).attr("cboxheight")){a=$(this).attr("cboxheight")}var d=$(this).attr("href");if(dataController.CurrentViewID==vidHotsheet){d+="/Hotsheet"}d+=d.indexOf("?")>0?"&searchID=":"?searchID=";d+=window.frameElement.id;d+="&jqGridId=grid&childId="+dataController.getTargetFrame();parent.$.fn.colorbox({href:d,iframe:true,open:true,title:$(this).attr("title"),width:f,height:a,close:'<button id="Print">'+b+'</button><button id="Close">Cancel</button>',onClosed:false})}else{if(!dataController.CurrentIsQuickPrint){if(dataController.CurrentViewID==vidCMASummary){dataController.ShowPDF=true;dataController.AutoPrintCMASummary=true}dataController.AutoPrint=true;dataController.loadView(null,null,"true")}else{var g=document.getElementById(dataController.getTargetFrame()).contentWindow;if(g!=null){if(isTabletDevice()){try{$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.overflow="none";$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.height="100%"}catch(c){}}g.focus();DoPrintWithBrowserCheck(g);if(isTabletDevice()){setTimeout("resizePage()",1000)}}}}}});$(".f-form-popup").click(function(b){b.preventDefault();var a="Save";if($(this).attr("cboxsavebuttontext")){a=$(this).attr("cboxsavebuttontext")}if(!$(this).hasClass("sf-disabled")){var c=480,f=385;if($(this).attr("cboxwidth")){c=$(this).attr("cboxwidth")}if($(this).attr("cboxheight")){f=$(this).attr("cboxheight")}var d=$(this).attr("href");d+=d.indexOf("?")>0?"&searchID=":"?searchID=";d+=window.frameElement.id;d+="&jqGridId=grid";parent.$.fn.colorbox({href:d,iframe:true,open:true,title:$(this).attr("title"),width:c,height:f,close:'<button id="Save">'+a+'</button><button id="Close">Cancel</button>',onClosed:false})}});$("#Sort").click(function(){if(dataController.CurrentType=="Spreadsheet"){var b=480,a=385;if($(this).attr("cboxwidth")){b=$(this).attr("cboxwidth")}if($(this).attr("cboxheight")){a=$(this).attr("cboxheight")}var c="&viewId="+dataController.CurrentViewID;var d="&layoutId=";if(dataController.CurrentViewID.substring(0,1)=="c"){d+=dataController.CurrentViewID.substring(1,dataController.CurrentViewID.length)}parent.$.fn.colorbox({href:sortUrl+"?searchID="+frameElement.id+c+d+"&classid="+classID,iframe:true,open:true,width:b,height:a,title:"Set Sort",close:'<button id="Save">Save</button><button id="Close">Cancel</button>',onClosed:false})}});$("#Customize").click(function(){if(dataController.CurrentIsCustomizable==true){var h="&callingWindow="+frameElement.id;if(searchType=="TAX"&&dataController.CurrentType=="Report"){var c="&viewID="+dataController.CurrentViewID+"&taxDBId="+classID+"&fromSearch=true"+h;parent.$.fn.colorbox({href:customizeLayoutUrl+c,open:true,iframe:true,width:"1000",height:"700",close:'<button id="Close">Done</button>',title:dataController.CurrentViewName+" Field Prefs",onClosed:false})}else{if(dataController.CurrentViewID.substring(0,1)=="c"){var a=dataController.CurrentViewID.substring(1,dataController.CurrentViewID.length);var g=classID;var e="";if(classID==0){g=minClassID;var j=document.getElementById(dataController.getTargetFrame()).contentWindow;if(j!=null){var k=j.$("#classList").val();if(k.length>0){var b=k.split(",");g=b[0]}}}var f=window.top.getAppHeight();f=f>900?850:f-50;parent.$.fn.colorbox({href:customizeLayoutUrl+"?layoutId="+a+h+"&classID="+g+e,open:true,iframe:true,width:"1000",height:f,close:'<button id="Close">Cancel</button>',title:dataController.CurrentViewName+" Field Prefs",onClosed:false})}else{var g=classID;var e="";if(classID==0&&dataController.hasClassSpecificPrefs(dataController.CurrentViewID)){g=minClassID;e="&showClassList=true";var j=document.getElementById(dataController.getTargetFrame()).contentWindow;if(j!=null){var k=j.$("#classList").val();if(k.length>0){var b=k.split(",");g=b[0];if(b.length==1){e=""}}}}else{if(classID==0&&dataController.CurrentPageSize==1){e="&listingID="+dataController.CurrentID}}var i=customizeUrl.indexOf("?")==-1?"?":"&";var d="Save";if($(this).attr("cboxsavebuttontext")){d=$(this).attr("cboxsavebuttontext")}parent.$.fn.colorbox({href:customizeUrl+i+"viewID="+dataController.CurrentViewID+"&classID="+g+h+e,open:true,iframe:true,width:"970",height:"500",close:'<button id="Save">'+d+'</button><button id="Close">Cancel</button>',title:dataController.CurrentViewName+" Field Prefs",onClosed:false})}}}});$("#OpenInTax").click(function(){var c="?&searchID="+frameElement.id;c+="&selectedIds="+dataController.getSelectedListings();c+="&totalCount="+dataController.TotalRecords;c+="&currentID="+dataController.CurrentID;c+="&classId="+classID;var b=JSON.stringify({viewID:"1",name:"Tax Spreadsheet",perPage:"1",type:"Spreadsheet"});c+="&selectedView="+b;var a=taxSwitchUrl+c;parent.$.fn.colorbox({href:a,open:true,iframe:true,width:"330",height:"300",title:"Tax Switch Options",close:'<button id="Ok" >Select</button><button id="Close" >Cancel</button>',onClosed:false})});$("#Correction").click(function(){if(dataController.CurrentIsCorrectionable){parent.$.fn.minbox({open:true,iframe:true,width:"900",height:"500",title:"Correction E-Mail",close:'<button id="Ok">E-Mail</button><button id="Minimize">Minimize</button><button id="Close">Cancel</button>',onClosed:false,minUrl:correctionUrl+"?&searchID="+frameElement.id+"&listingID="+dataController.CurrentID+"&viewId= "+dataController.CurrentViewID,minName:"emailcorrection",dialogSelect:$("#minboxwarning")})}});$("#Print").click(function(){if(!dataController.CurrentIsQuickPrint){dataController.AutoPrint=true;dataController.loadView(null,null,"true")}else{var a=document.getElementById(dataController.getTargetFrame()).contentWindow;if(a!=null){if(isTabletDevice()){try{$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.overflow="none";$("#"+dataController.getTargetFrame()).get(0).contentDocument.getElementById("divHtmlReport").style.height="100%"}catch(b){}}a.focus();DoPrintWithBrowserCheck(window);if(isTabletDevice()){setTimeout("resizePage()",1000)}}}});$("#PrintPlus").click(function(){if(!$(this).hasClass("sf-disabled")&&(dataController.SpreadsheetLoaded||dataController.CurrentType!="Spreadsheet")){loadPrintPlus()}});$("#Email").click(function(){if($("#Email").hasClass("sf-disabled")==false){if(dataController.CurrentViewID==26){ShowEmail("","")}else{loadEmail()}}});$("#SaveFavorites").click(function(){var b="&";var d=dataController.SelectedIDs.length;var c="selectedCount="+d;var a=dataController.TotalRecords;var g=a;if(g>maxListingCartListings){g=maxListingCartListings}var g="totalCount="+g;var e="currentListing="+dataController.CurrentID;var f="searchClass="+classID;var h="searchID="+window.frameElement.id;parent.$.fn.colorbox({href:addToListingCartUrl+"?"+c+b+g+b+e+b+h+b+f,open:true,iframe:true,width:485,height:475,title:"Listing Cart",close:'<button id="Save">Save</button><button id="Close" onClick="javascript:$.fn.colorbox.close();">Cancel</button>',onClosed:false})});$("#AddToCMA").click(function(){var b="&";var c="selectedCount="+dataController.SelectedIDs.length;var f="totalCount="+dataController.TotalRecords.toString();var d="currentListing="+dataController.CurrentID;var e="searchID="+window.frameElement.id;var a=$("#fromCMA").val().toLowerCase()=="true"?"&fromCMA=true":"";parent.$.fn.colorbox({href:addComparableUrl+"?"+c+b+f+b+d+b+e+a,open:true,iframe:true,width:550,height:350,title:"Comparable Listing Options",close:'<button id="Select">Select</button><button id="Close">Cancel</button>',onClosed:false})});$("#saveToContact").click(function(){parent.$.fn.colorbox({href:saveSearchForContactUrl+"?searchID="+window.frameElement.id+"&searchType="+searchType+"&ssid="+(saveSearchID||0)+"&templateid="+templateID+"&contactIds="+contactID+"&saveCriteriaFromSession=true&isAddingNewForContact="+isAddingNewForContact+"&isFromContactManager="+$("#fromCM").val(),iframe:true,open:true,title:"Save Search",width:480,height:200,close:'<button id="Save">Save</button><button id="Close">Cancel</button>',onClosed:false})});$("#saveToContactListingCart").click(function(){var b="&";var d="selectedCount="+dataController.SelectedIDs.length;var a=dataController.TotalRecords;if(a>maxListingCartListings){a=maxListingCartListings}var h="totalCount="+a;var e="currentListing="+dataController.CurrentID;var g="searchClass="+classID;var f="searchID="+window.frameElement.id;var i="isFromContactManager=true";var c="contactId="+contactID;parent.$.fn.colorbox({href:saveListingCartForContactUrl+"?"+d+b+h+b+e+b+f+b+g+b+i+b+c,iframe:true,open:true,title:"SaveTo Listing Cart",width:480,height:150,close:'<button id="Save">Save</button><button id="Close">Cancel</button>',onClosed:false})});$("#SHOWHTML").click(function(){if(!$(this).hasClass("sf-disabled")){dataController.ShowPDF=false;$(".f-form-popup-print").removeClass("sf-disabled");dataController.LastViewedSpreadsheetID=-1;dataController.loadView();if(dataController.ShowPDF){$("#SHOWHTML").find("ins").removeClass("pdf_html_checked");$("#SHOWHTML").find("ins").addClass("pdf_html");$("#SHOWPDF").find("ins").removeClass("pdf_html");$("#SHOWPDF").find("ins").addClass("pdf_html_checked")}else{$("#SHOWHTML").find("ins").removeClass("pdf_html");$("#SHOWHTML").find("ins").addClass("pdf_html_checked");$("#SHOWPDF").find("ins").removeClass("pdf_html_checked");$("#SHOWPDF").find("ins").addClass("pdf_html")}}});$("#SHOWPDF").click(function(){if(!$(this).hasClass("sf-disabled")){dataController.ShowPDF=true;$(".f-form-popup-print").addClass("sf-disabled");dataController.LastViewedSpreadsheetID=-1;dataController.loadView();if(dataController.ShowPDF){$("#SHOWHTML").find("ins").removeClass("pdf_html_checked");$("#SHOWHTML").find("ins").addClass("pdf_html");$("#SHOWPDF").find("ins").removeClass("pdf_html");$("#SHOWPDF").find("ins").addClass("pdf_html_checked")}else{$("#SHOWHTML").find("ins").removeClass("pdf_html");$("#SHOWHTML").find("ins").addClass("pdf_html_checked");$("#SHOWPDF").find("ins").removeClass("pdf_html_checked");$("#SHOWPDF").find("ins").addClass("pdf_html")}}});$("#GetDrivingDirections").click(function(){showDrivingDirections()});$("#CreateListingSlideshow").click(function(){if(dataController.SelectedIDs.length==0){$.jGrowl("Please select at least one listing.");return}if(dataController.SelectedIDs.length>maxListingSlideshowListings){$.jGrowl("The Listing Slideshow is limited to the MLS defined amount of "+maxListingSlideshowListings+" listings.");return}var a=classID;if(classID==0){a=minClassID}var b=dataController.getSelectedListings();parent.$.fn.colorbox({href:listingSlideshowUrl+"?ids="+b+"&searchId="+window.frameElement.id+"&classId="+a,open:true,iframe:true,width:1010,height:720,title:"Create Listing Slideshow ("+dataController.SelectedIDs.length+" Selected Listings)",close:'<button id="Create">Create Slideshow</button><button id="Close">Cancel</button>',onClosed:false})});$("#FavoriteExport").click(function(){parent.$.fn.colorbox({href:exportFavoritesURL+"?searchID="+window.frameElement.id,open:true,iframe:true,width:550,height:350,title:"Favorite Custom Exports",close:'<button id="Select">Select</button><button id="Close">Cancel</button>',onClosed:false})});$("#ManageExport").click(function(){dataController.CurrentViewID=vidExportCustom;dataController.loadView()});$("#PocketRealEstateExport").click(function(){dataController.CurrentViewID=vidPRE;dataController.loadView()});$("#Stats").bind("reloadStats",reloadStats);$("#main").fadeIn();if(showReducedResultsMessage){parent.$.fn.colorbox({href:reducedResultsUrl,open:true,iframe:true,width:"500",height:"350",title:"Reduced Result Set",close:'<button id="OK">Continue</button> &nbsp; <button id="OkAndHide">Continue & Hide</button>',onClosed:false});parent.$("#cboxClose").unbind("click");parent.$("#OK").click(function(){parent.$.fn.colorbox.close()});parent.$("#OkAndHide").click(function(){$.ajax({url:disableReducedResultsUrl,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:function(a){this.ajaxRetryOnError(a,"Error disabling reduced result message.")}});parent.$.fn.colorbox.close()})}});function reloadStats(){if($("#dialogStats").css("display")!="none"){$.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",url:statsUrl,data:getData(null,1),success:function(a){updateStats(a)},error:function(a){this.ajaxRetryOnError(a,"Error retrieving data from server.")}})}else{$("#dialogStats").addClass("NotLoaded")}}function updateStats(a){var b=$("#dialogStats");$("#HighAskingPrice",b).text(a.HighAskingPriceString);$("#LowAskingPrice",b).text(a.LowAskingPriceString);$("#AverageAskingPrice",b).text(a.AverageAskingPriceString);$("#MedianAskingPrice",b).text(a.MedianAskingPriceString);$("#TotalAskingPrice",b).text(a.TotalAskingPriceString);$("#SearchCount",b).text(dataController.IDs.length);$("#HighSoldPrice",b).text(a.HighSoldPriceString);$("#LowSoldPrice",b).text(a.LowSoldPriceString);$("#AverageSoldPrice",b).text(a.AverageSoldPriceString);$("#MedianSoldPrice",b).text(a.MedianSoldPriceString);$("#TotalSoldPrice",b).text(a.TotalSoldPriceString);$("#HighDOM",b).text(a.HighDOM);$("#LowDOM",b).text(a.LowDOM);$("#AverageDOM",b).text(a.AverageDOM);$("#MedianDOM",b).text(a.MedianDOM)}function displayPDF(){var a=document.getElementById(dataController.getTargetFrame()).contentWindow.$("#grid")[0].p.postData;var b=getData(a)}function getData(b,d){if(document.getElementById("ifSpreadsheet").contentWindow&&document.getElementById("ifSpreadsheet").contentWindow.$){var g=document.getElementById("ifSpreadsheet").contentWindow.$("#grid");if(g.length>0){var a=g[0].p;var e=a.colModel;if(b!=null){b.sidx2=null;b.sord2=null;b.sidx3=null;b.sord3=null;$.each(e,function(j,i){if(!i.hidden&&i.index&&i.sortorder){if(i.sortorder=="1"){$.extend(b,{sidx:i.index,sord:i.sortasc?"asc":"desc"})}else{if(i.sortorder=="2"){$.extend(b,{sidx2:i.index,sord2:i.sortasc?"asc":"desc"})}else{if(i.sortorder=="3"){$.extend(b,{sidx3:i.index,sord3:i.sortasc?"asc":"desc"})}}}}})}}}var c=d!=null?d:dataController!=null?dataController.CurrentViewID:1;if(dataController!=null&&dataController.getTargetFrame()!="ifSpreadsheet"){c=dataController.LastViewedSpreadsheetID}var h='{"viewID":'+c;h+=',"searchID":"'+frameElement.id+'"';if(dataController!=null&&dataController.ShowChecked==true){h+=',"ids":'+JSON.stringify(dataController.ShowCheckedIDs)}var f=$("#fromSetWidth");if(f.length>0&&f.val()=="True"){h+=',"useMlsPrefs": "True"'}dataController.GridPagingData=(b!=null)?JSON.stringify(b):"";h+=',"paging":'+JSON.stringify(b);return h+"}"}function loadPrintPlus(f,b){b=b!=null?b:dataController.CurrentViewID;var c=$("#dialogStats").css("display")!="none";var a=printUrl+(printUrl.indexOf("?")>0?"&selectedCount=":"?selectedCount=");var d=a+dataController.SelectedIDs.length+"&totalCount="+dataController.TotalRecords+"&currentID="+dataController.CurrentID+"&searchID="+frameElement.id+"&viewID="+b+"&showStats="+c;d=d+"&classid="+classID;var g=$("#Reports a[viewid="+vidVirtualEarth+"]");d+="&ShowParcel="+g.attr("ShowParcel");d+="&BingPageSize="+g.attr("perpage");if(b==vidVirtualEarth){d+="&Latitude="+dataController.CurrentVirtualEarth.Latitude;d+="&Longitude="+dataController.CurrentVirtualEarth.Longitude;d+="&ZoomLevel="+dataController.CurrentVirtualEarth.ZoomLevel}parent.$.fn.colorbox({href:d,open:true,iframe:true,width:"950",height:"600",title:"Print+",close:'<button id="Print">Print</button><button id="PrintPreview">Print / Preview</button><button id="Close">Close</button>',onClosed:false})}function loadEmail(a){a=a!=null?a:dataController.CurrentViewID;var g=250;var f="";var c=0;var b=false;if(dataController.SelectedIDs.length>0){if(dataController.SelectedIDs.length>g){b=true;var e=dataController.getSelectedListings().split(",").slice(0,g);f+=e;c+=g}else{f+=dataController.getSelectedListings();c+=dataController.SelectedIDs.length}}var d="";if(emailUrl.indexOf("?")>-1){d+="&"}else{d+="?"}d+="sc="+dataController.SelectedIDs.length.toString();d+="&t="+dataController.TotalRecords;d+="&cid="+dataController.CurrentID;d+="&sid="+frameElement.id;d+="&vid="+a;d+="&l="+f;d+="&clid="+classID;d+="&stats="+dataController.ShowStats;if(b){d+="&maxexceeded="+g}parent.$.fn.minbox({open:true,width:"950",height:"600",title:"E-Mail Reports",close:'<button id="Ok">E-Mail</button><button id="Minimize">Minimize</button><button id="Close">Cancel</button>',onClosed:false,minUrl:emailUrl+d,minName:"emailreports",dialogSelect:$("#minboxwarning")})}function ShowEmail(a,d){var b="";if(dataController.SelectedDocs.length>0){b=dataController.SelectedDocs.join()}var c=emailComposeUrl+"?to="+a+"&subject="+d+"&attachments="+b+"&assocDocsAttachments=true&listingID="+dataController.CurrentID;parent.$.fn.minbox({open:true,width:"905px",height:"620px",title:"Compose E-Mail",close:'<button id="Ok">E-Mail</button><button id="Minimize">Minimize</button><button id="Close">Cancel</button>',onClosed:false,minUrl:c,minName:"email",dialogSelect:$("#minboxwarning")})}function showDrivingDirections(){if(dataController.SelectedIDs.length==0){$.jGrowl("Please select at least one listing.");return}var a=24;if(dataController.SelectedIDs.length>a){$("#confirmation").text("Only the first "+a+" will be used for driving directions.  Do you wish to continue?").dialog({autoOpen:true,draggable:false,modal:true,resizable:false,title:"Too many listings selected",buttons:{Cancel:function(){$(this).dialog("close")},Ok:function(){$(this).dialog("close");launchDrivingDirections(dataController.getSelectedListings().split(",").slice(0,a).join(","))}}})}else{launchDrivingDirections(dataController.getSelectedListings())}}function launchDrivingDirections(a){parent.$.fn.colorbox({href:drivingDirectionsUrl+"?ids="+a+"&searchId="+window.frameElement.id+"&isTax="+(searchType=="TAX"),open:true,iframe:true,width:960,height:650,title:"Driving Directions",close:'<button id="Calculate">Calculate Directions</button><button id="Close">Cancel</button>',onClosed:false})};var cmaTabId=null;var parentFrame=null;var cmaIndexURLFinal=null;var cmaTabName=null;var newTabKey="";function appendCMASubTab(d,a,c,e,b){a=a||0;c=c||0;e=e||"";b=b||"";parentFrame=parent.parent.parent;newTabKey="c_"+a;if(parentFrame.$("#app_tab_switcher a[tabdescription='CMA']").length>0){cmaTabId=parentFrame.$("#app_tab_switcher a[tabdescription='CMA']").attr("href").replace("#","")}if(cmaTabId==null){var f=parent.parent.parent.parent.$('a[secsubtabaction="'+cmaIndexURL+'/Index/0"]');if(f){f.attr("secSubTabAction",cmaIndexURL+"/Index?cmaId="+a+"&contactid="+c+"&comparableIds="+e+"&formAction="+b);f.attr("secsubtabdescription",d);f.click();f.attr("secSubTabAction",cmaIndexURL+"/Index/0");f.attr("secsubtabdescription","Create Wizard")}}else{cmaIndexURLFinal=cmaIndexURL;cmaTabName=d;cmaIndexURLFinal+="?cmaId="+a+"&contactid="+c+"&comparableIds="+e+"&formAction="+b;if(parentFrame.$("#"+cmaTabId+"_2").length>0){var g=parentFrame.$('iframe[rel="'+newTabKey+'"]');if(g.length>0){if(e.length>0){AddComparables(e)}else{DisplayCMATab()}}else{$("#confirmSaveDialog").dialog("open")}}else{parentFrame.appendSubTabSingle(cmaTabName,cmaTabId,cmaIndexURLFinal,newTabKey)}}}function AddComparables(a){var b=parent.document.getElementById(cmaTabId+"_2").contentWindow;b.Focus.ClientCatalog.data["cma-2-comparables_Ids"]=b.Focus.ClientCatalog.data["cma-2-comparables_Ids"]||[];var c=a.split(",");$.each(c,function(e,d){if($.inArray(d,b.Focus.ClientCatalog.data["cma-2-comparables_Ids"])==-1){b.Focus.ClientCatalog.data["cma-2-comparables_Ids"].push(c[e])}});b.$("#cma-2-comparables").parent().attr("rel","completedStep");b.$("#cma-2-comparablesList_frame").remove();parent.__dirtyBitTracker.setDirtyBit();DisplayCMATab()}function DisplayCMATab(){parentFrame.$("#"+cmaTabId).tabs("select","#"+cmaTabId+"_1");parentFrame.$("#"+cmaTabId).tabs("select","#"+cmaTabId+"_2")}$("#confirmSaveDialog").dialog({autoOpen:false,bgiframe:true,draggable:false,modal:true,resizable:false,buttons:{Cancel:function(){$(this).dialog("close")},OK:function(){DisplayCMATab();$(this).dialog("close")}}});Array.prototype.move=function(b,a){if(a>=this.length){var c=a-this.length;while((c--)+1){this.push(undefined)}}this.splice(a,0,this.splice(b,1)[0]);return this};var dataController=new DataController();function DataController(){this.IDs=new Array();this.SelectedIDs=new Array();this.ArrangedIDs=new Array();this.UrlHistories=new Array();this.TotalUnfilteredRecords=0;this.TotalRecords=0;this.SortName="";this.SortDesc="";this.GridPageSize=100;this.GridObject=null;this.SortArray=new Array();this.GridPagingData="";this.ShowDisclaimer=false;this.AllowGridDblClick=true;this.CurrentViewName="";this.CurrentViewID=0;this.LastViewedSpreadsheetID=-1;this.CurrentPage=1;this.TotalPage=0;this.CurrentID=0;this.CurrentUniqueID=0;this.CurrentIndex=0;this.CurrentPageSize=1;this.CurrentType="Spreadsheet";this.CurrentIsCustomizable=false;this.CurrentIsEmailable=false;this.CurrentIsCorrectionable=false;this.CurrentIsQuickPrint=false;this.CurrentIsExcel=false;this.CurrentIsPagingControl=true;this.SelectedDocs=new Array();this.ShowChecked=false;this.ShowCheckedIDs=new Array();this.ShowPDF=false;this.AutoPrint=false;this.AutoPrintCMASummary=false;this.SpreadsheetLoaded=false;this.ShowDrivingDirectionPanel=false;this.UseCompactMapping=false;this.ShowStats=false;this.FromNode=false;this.UseAllListings=true;this.MaxDate="";this.IncludeListingSummary=false;this.BMRDollarRangeGroup=5000;this.BMRAllClassInfo=1;this.BMRClassMonthlyInfo=1;this.BMRPriceRangeInfo=1;this.BMROfficeID=0;this.BMRUseFirm=0;this.BMROrgJson="";this.CurrentVirtualEarth={page:0,perPage:0,Latitude:0,Longitude:0,ZoomLevel:0};this.ToggleStats=function(){if(!this.FromNode){if(this.ShowStats===false){this.ShowStats=true}else{this.ShowStats=false}if(this.CurrentType=="Spreadsheet"){showStatsOnSpreadsheets=showStatsOnSpreadsheets===false?true:false}else{showStatsOnReports=showStatsOnReports===false?true:false}}};this.getPreviousView=function(){var b=this.UrlHistories[this.UrlHistories.length-2];this.UrlHistories.pop();if(b==vidExportCustom||b==vidPRE){this.CurrentViewID=b;this.loadView()}else{var a=$("#Reports a[viewid="+b+"]");if(a.length==1){$.tree.focused().select_branch(a)}}if(this.UrlHistories.length<=1){$(".noSelect_back_arrow").addClass("ui-state-disabled")}};this.addViewToHistory=function(b){var a=this.UrlHistories[this.UrlHistories.length-1];if(b!=a){this.UrlHistories[this.UrlHistories.length]=b}if(this.UrlHistories.length>1){$(".noSelect_back_arrow").removeClass("ui-state-disabled")}};this.getTargetFrame=function(){return(!this.ShowPDF&&this.AutoPrint)?"ifPrintView":(this.CurrentType=="Spreadsheet")?"ifSpreadsheet":"ifView"};this.setVirtualEarth=function(b,c,a){this.CurrentVirtualEarth={page:this.CurrentPage,perPage:this.CurrentPageSize,Latitude:b,Longitude:c,ZoomLevel:a}};this.spreadSheetLoad=function(a,b,h,g,d,e,i){this.GridObject=i;var f=true;if(this.searchUsesUniqueIds()&&!this.viewUsesUniqueIds()){f=false}if(f&&(h!=this.TotalRecords||g!=this.SortName||d!=this.SortDesc)){this.TotalRecords=h;this.SortName=g;this.SortDesc=d;this.IDs=new Array(h);this.CurrentID=0;this.CurrentIndex=0}this.GridPageSize=e;this.CurrentPageSize=e;this.CurrentPage=b;var c=b*e;if(h>0&&a.length>0){if(f){this.addIDs(a,b,e);if(this.CurrentIndex<(c-e)||this.CurrentIndex>c||this.CurrentID==0){this.CurrentID=this.IDs[c-e].ID;this.CurrentUniqueID=this.IDs[c-e].UniqueID;this.setIndexFromID(this.CurrentID,this.CurrentUniqueID)}}this.syncSpreadsheetSelectedIds(a,i);this.setNav();this.SpreadsheetLoaded=true}else{$.jGrowl("No records found!")}};this.syncSpreadsheetSelectedIds=function(a,b){if(this.SelectedIDs.length>0){for(var f=0;f<a.length;f++){for(var d=0;d<this.SelectedIDs.length;d++){var c=a[f];if(c!=null&&c.length>0){var e=c.split(":");if(e[0]==this.SelectedIDs[d].ID&&e[1]==this.SelectedIDs[d].UniqueID){b.setSelection(a[f],false)}}}}}};this.updateTabCount=function(b,a){var c=a.toString();if(b!=null&&b>0){c=b.toString()+" of "+c}this.setViewName(this.CurrentViewName,c)};this.showAllIDs=function(){this.TotalRecords=this.TotalUnfilteredRecords;this.IDs=this.IDsBackup;this.updateTabCount(null,this.TotalUnfilteredRecords);return true};this.showSelectedIDs=function(){if(this.TotalUnfilteredRecords==0){this.TotalUnfilteredRecords=this.TotalRecords}this.TotalRecordsBackup=this.TotalRecords;this.TotalRecords=this.SelectedIDs.length;this.IDsBackup=this.IDs;this.IDs=[].concat(this.SelectedIDs);this.CurrentPage=1;this.CurrentIndex=0;this.CurrentID=this.IDs[0].ID;this.updateTabCount(this.TotalRecords,this.TotalUnfilteredRecords);return true};this.addArrangedIDs=function(a){if(this.ArrangedIDs[this.CurrentViewID]==null){this.ArrangedIDs[this.CurrentViewID]=new Array()}this.ArrangedIDs[this.CurrentViewID][this.CurrentPage]=a};this.addIDs=function(a,b,f){var d=b*f;var h=0;for(var c=d-f;c<d;c++){if(h<a.length){var e=a[h++];if(e!=null&&e.length>0){var g=e.split(":");this.IDs[c]={ID:g[0],UniqueID:g[1]}}}}};this.backgroundLoad=function(b,c){var a=Math.ceil((b+1)/dataController.GridPageSize);var d=new Object();d.page=a;d.rows=dataController.GridPageSize;$.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",async:c,url:idsService,data:getData(d,1),success:function(e){if(dataController.TotalRecords!=e.records||dataController.IDs.length!=dataController.TotalRecords){dataController.TotalRecords=e.records;dataController.IDs=new Array(dataController.TotalRecords)}var f=new Array();$.each(e.rows,function(g,h){f.push(h.id)});dataController.addIDs(f,a,dataController.GridPageSize);if(c){dataController.CurrentID=dataController.IDs[dataController.CurrentIndex].ID;dataController.CurrentUniqueID=dataController.IDs[dataController.CurrentIndex].UniqueID;dataController.setCurrentPage();dataController.loadView()}},error:function(e){this.ajaxRetryOnError(e,"Error retrieving data from server.")}})};this.getExcelReport=function(a){var b=(a)?$("#ifSpreadsheet"):$("#ifView");if(b.length>0){if(b.attr("src").indexOf("&useXls=true")==-1){b.attr("src",b.attr("src")+"&useXls=true")}else{b.attr("src",b.attr("src"))}}else{$.jGrowl("Export failed to generate this file.")}};this.move=function(c){if(this.CurrentType=="Spreadsheet"){this.CurrentPage+=c;if(this.ShowPDF){this.CurrentIndex+=c*this.CurrentPageSize;dataController.LastViewedSpreadsheetID=-1;dataController.loadView()}else{var a=document.getElementById(this.getTargetFrame()).contentWindow;a.$("#grid").setGridParam({page:this.CurrentPage});a.$("#grid").trigger("reloadGrid")}}else{c=c*this.CurrentPageSize;if(this.IDs.length>this.CurrentIndex+c&&this.CurrentIndex+c>=0){this.CurrentIndex+=c;if(this.IDs[this.CurrentIndex]!=null){this.CurrentID=this.IDs[this.CurrentIndex].ID;this.CurrentUniqueID=this.IDs[this.CurrentIndex].UniqueID}var b=false;var d;for(d=0;d<=this.CurrentPageSize-1;d++){if(this.IDs[this.CurrentIndex+d]==null&&(this.CurrentIndex+d)<this.IDs.length){b=true;break}}if(b){this.backgroundLoad(this.CurrentIndex+d,true)}else{this.setCurrentPage();this.loadView()}}}};this.selectID=function(e,b,c){var a=-1;for(var d=0;d<this.SelectedIDs.length;d++){if(this.SelectedIDs[d].ID==e&&this.SelectedIDs[d].UniqueID==b){a=d}}if(c==null){if(a>=0){this.SelectedIDs.splice(a,1)}else{this.pushSelectedID(e,b)}this.setIndexFromID(e,b)}else{if(c&&a<0){this.pushSelectedID(e,b)}else{if(!c&&a>=0){this.SelectedIDs.splice(a,1)}}}};this.pushSelectedID=function(b,a){this.SelectedIDs.push({ID:b,UniqueID:a})};this.pushSelectedDoc=function(b){for(var a=0;a<this.SelectedDocs.length;a++){if(b==this.SelectedDocs[a]){return}}this.SelectedDocs.push(b)};this.popSelectedDoc=function(b){for(var a=this.SelectedDocs.length;a>=0;a--){if(b==this.SelectedDocs[a]){this.SelectedDocs.splice(a,1)}}};this.getSelectedListings=function(){var a="";for(var b=0;b<this.SelectedIDs.length;b++){a+=this.SelectedIDs[b].ID+","}return a.length>0?a.substring(0,a.length-1):""};this.getSelectedUniqueIds=function(){var a="";for(var b=0;b<this.SelectedIDs.length;b++){a+=this.SelectedIDs[b].UniqueID+","}return a.length>0?a.substring(0,a.length-1):""};this.isSelected=function(c,a){for(var b=0;b<this.SelectedIDs.length;b++){if((this.SelectedIDs[b].ID==c&&this.SelectedIDs[b].UniqueID==a)||(a!=0&&this.SelectedIDs[b].UniqueID==a)||(this.SelectedIDs[b].ID==c&&a==0)){return true}}return false};this.setIndexFromID=function(d,b){var a=this.CurrentPage*this.CurrentPageSize;for(var c=a-this.CurrentPageSize;c<a;c++){if(this.IDs[c]!=null&&this.IDs[c].ID==d&&this.IDs[c].UniqueID==b){this.CurrentIndex=c;break}}this.CurrentID=d;this.CurrentUniqueID=b};this.loadIntegrationView=function(d,b,e){this.setIndexFromID(d,b);var c="";var a;if(e=="Quick View"){a=$('#Reports li[isDefault="true"]');this.CurrentType="Report";this.CurrentPageSize=1;c=$.focusFx.loadViewSelectorNode(a,true,true)}else{if(e=="History"){a=$('#Reports li a[id="v_property_history_report"]').parent();this.CurrentType="Report";this.CurrentPageSize=1;c=$.focusFx.loadViewSelectorNode(a,true,true)}else{if(e=="Map"){a=$('#Reports li a[id="v_bing_map"]').parent();this.ShowStats=false;this.CurrentType="Report";this.UseCompactMapping=true;c=$.focusFx.loadViewSelectorNode(a,true,true)+"&compact=true";this.UseCompactMapping=false}else{if(e=="Paragon Tax"||e=="Tax"){a=$('#Reports li a[id="v_paragon_tax"]').parent();this.CurrentType="Report";this.CurrentViewID=24;this.CurrentPageSize=1;c=$.focusFx.loadViewSelectorNode(a,true,false)}else{if(e=="Associated Docs"){a=$('#Reports li a[id="v_associated_docs"]').parent();this.CurrentType="Report";this.CurrentViewID=26;this.CurrentPageSize=1;c=$.focusFx.loadViewSelectorNode(a,true,false)}}}}}return c};this.loadDefaultView=function(d,b,a){if(this.AllowGridDblClick){if(d!=null){this.setIndexFromID(d,b)}var c=$('#Reports li[isDefault="true"]');if(a){this.CurrentType="Report";this.CurrentPageSize=1;return $.focusFx.loadViewSelectorNode(c,true,true)}if(c.length>0){$.tree.focused().select_branch(c)}else{$.jGrowl("Error setting default double click view.")}}};this.getDefaultViewID=function(){var b="";var a=$('#Reports li[isDefault="true"]');if(a.length>0){b=$("a",a).attr("viewID")}return b};this.init=function(a){$("#first").click(this.first);$("#prev").click(this.prev);$("#next").click(this.next);$("#last").click(this.last);this.setViewFromNode(a);if(this.CurrentType!="Spreadsheet"){this.backgroundLoad(this.CurrentIndex,true)}else{this.loadView()}};this.setViewFromNode=function(a){this.FromNode=true;this.setView(a.attr("viewID"),a.text(),a.attr("perPage"),a.attr("viewType"),a.attr("customizable")!=null?a.attr("customizable").toLowerCase()=="true":false,a.attr("emailable")!=null?a.attr("emailable").toLowerCase()=="true":false,a.attr("quickprint")!=null?a.attr("quickprint").toLowerCase()=="true":false,a.attr("correction")!=null?a.attr("correction").toLowerCase()=="true":false,a.attr("pagingcontrol")!=null?a.attr("pagingcontrol").toLowerCase()=="true":true,a.attr("showstats")!=null?a.attr("showstats").toLowerCase()=="true":false,a.attr("exportXls")!=null?a.attr("exportXls").toLowerCase()=="true":false)};this.setView=function(b,e,g,i,f,k,a,h,c,d,j){this.CurrentViewID=b!=null?b:this.CurrentViewID;this.CurrentViewName=e!=null?e:this.CurrentViewName;this.CurrentPageSize=g!=null?parseInt(g,10):this.CurrentPageSize;this.CurrentType=i!=null?i:this.CurrentType;this.CurrentIsCustomizable=f!=null?f:this.CurrentIsCustomizable;this.CurrentIsEmailable=k!=null?k:this.CurrentIsEmailable;this.CurrentIsQuickPrint=a!=null?a:this.CurrentIsQuickPrint;this.CurrentIsQuickPrint=a!=null?a:this.CurrentIsQuickPrint;this.CurrentIsExcel=j;this.CurrentIsCorrectionable=h!=null?h:this.CurrentIsCorrectionable;this.CurrentIsPagingControl=c!=null?c:true;this.ShowStats=this.CurrentType=="Spreadsheet"?showStatsOnSpreadsheets:showStatsOnReports};this.getArrangedIds=function(b){if(this.ArrangedIDs[this.CurrentViewID]==null||this.ArrangedIDs[this.CurrentViewID][this.CurrentPage]==null){return""}var d=[];for(var c=0;c<this.ArrangedIDs[this.CurrentViewID][this.CurrentPage].length;c++){var a=this.ArrangedIDs[this.CurrentViewID][this.CurrentPage][c].split(":");d.push(a[b])}return d.join(",")};this.getArrangedListingIds=function(){return this.getArrangedIds(0)};this.getArrangedUniqueIds=function(){return this.getArrangedIds(1)};this.searchUsesListingIds=function(){return searchType!="TOUR_OPEN_HOUSE"&&searchType!="TAX"&&searchType!="HOTSHEET_SEARCH"};this.searchUsesUniqueIds=function(){return searchType=="TOUR_OPEN_HOUSE"||searchType=="HOTSHEET_SEARCH"};this.viewUsesUniqueIds=function(){return searchType=="TOUR_OPEN_HOUSE"||(searchType=="HOTSHEET_SEARCH"&&this.CurrentViewID==vidHotSheetGrid)};this.loadView=function(l,j,m){l=l!=null?l:false;var k="";var p=null;var s=this.AutoPrint?"&autoPrint=true":"";if(!l){this.setCurrentPage()}if(this.CurrentViewID==vidExportCustom||this.CurrentViewID==vidPRE){dataController.CurrentIsPagingControl=false;dataController.CurrentType="Export";dataController.FromNode=true;dataController.ShowStats=false;k=this.CurrentViewID==vidExportCustom?exportMappingURL:preExportMappingURL}else{if(this.CurrentType=="Spreadsheet"){k=spreadsheetUrl+"&viewID="+this.CurrentViewID+"&page="+this.CurrentPage+"&usePDF="+this.ShowPDF+"&searchID="+frameElement.id+s+"&showStats="+this.ShowStats;try{k+="&defaultSort="+defaultSpreadsheetSort}catch(d){}if((this.ShowPDF||this.AutoPrint)&&this.ShowChecked==true){k+="&listingIDs="+this.getSelectedListings()}else{if(this.ShowPDF&&this.ArrangedIDs.length>0&&this.ArrangedIDs[this.CurrentViewID]!=null){if(this.searchUsesListingIds()){var o=this.getArrangedListingIds();if(o.length>0){k+="&listingIDs="+o}}else{if(this.searchUsesUniqueIds()){var a=this.getArrangedUniqueIds();if(a.length>0){k+="&uniqueIDs="+a}}}}}k+="&pagingData="+this.GridPagingData;$("#radPDFGroupHTML").removeAttr("disabled");$("#radPDFGroupPDF").removeAttr("disabled")}else{var b="",r="",t="";if(searchType=="TAX"){b=this.getListings(this.CurrentPageSize)}else{if(this.CurrentViewID==vidFirmInventoryReport||this.CurrentViewID==vidMarketShare||this.CurrentViewID==vidCurMarAnl||this.CurrentViewID==vidMarketSum||this.CurrentViewID==vidSoldMarAnl||this.CurrentViewID==vidSoldPrcAnl||this.CurrentViewID==vidCMASummary||this.CurrentViewID==vidHotsheet){if(this.ShowChecked&&this.SelectedIDs.length>0){b=this.getSelectedListings()}else{if(this.CurrentViewID==vidCMASummary){t="&PagingData="+this.GridPagingData}else{b=""}}}else{if(this.searchUsesUniqueIds()&&this.CurrentViewID!=vidHotDetail){r=this.getListings(this.CurrentPageSize,true);if(this.CurrentViewID==vidMarketConditionsAddendum&&this.UseAllListings){r=""}}else{if(this.CurrentViewID==vidCMASummary){if(this.TotalRecords>maxCMAListings){p="First "+maxCMAListings+" Listings"}b=""}else{if(this.CurrentViewID==vidPropHist){if(this.SelectedIDs.length>=1){b=this.getSelectedListings()}else{b=this.getListings(this.CurrentPageSize)}}else{if(this.CurrentViewID==vidMarketConditionsAddendum||this.CurrentViewID==vidBrokerManagementReport){if(this.UseAllListings){if(this.ShowChecked){b=this.getListingSet(0,this.TotalRecords,null,false)}else{b=""}}else{if(this.SelectedIDs.length>=1){b=this.getSelectedListings()}}}else{if(this.ShowDrivingDirectionPanel){b=this.getSelectedListings()}else{b=this.getListings(this.CurrentPageSize)}}}}}}}var n=j!=undefined?j.attr("viewID"):this.CurrentViewID;if(n==undefined){n=this.CurrentViewID}if(n==vidVirtualEarth&&this.UseCompactMapping){b=this.CurrentID}k=reportUrl+"?listingIDs="+b+"&screenWidth="+$(window).width()+"&uniqueIDs="+r+"&viewID="+n+"&usePDF="+this.ShowPDF+"&searchID="+frameElement.id+s+"&listingMode="+(searchType=="ADDRESS_ARCHIVE_SEARCH"?"3":"0");k+=t;if(this.ShowDrivingDirectionPanel){k+="&showDrivingDirections=true&showStats=false";this.ShowDrivingDirectionPanel=false}if(this.CurrentViewID==vidMarketConditionsAddendum){k+="&maxDate="+this.MaxDate+"&mcaIncludeSummary="+this.IncludeListingSummary}if(this.CurrentViewID==vidBrokerManagementReport){k+="&bmrDollarRangeGroup="+this.BMRDollarRangeGroup+"&bmrAllClassInfo="+this.BMRAllClassInfo+"&bmrClassMonthlyInfo="+this.BMRClassMonthlyInfo;k+="&bmrPriceRangeInfo="+this.BMRPriceRangeInfo+"&bmrOfficeID="+this.BMROfficeID+"&bmrUseFirm="+this.BMRUseFirm}if(this.CurrentViewID==vidCMA){k+="&currListingIndex="+this.CurrentPage;k+="&classID="+classID}if(this.CurrentViewID==vidFullDetail&&m=="true"){k+="&ShowDisclaimer=true"}if(this.CurrentViewID==vidVirtualEarth){var i=$("#Reports a[viewid="+vidVirtualEarth+"]");var c=i.attr("ShowParcel");k+="&ShowParcel="+c;if((this.ShowPDF||m)&&this.CurrentVirtualEarth.page==this.CurrentPage&&this.CurrentVirtualEarth.perPage==this.CurrentPageSize){k+="&Latitude="+this.CurrentVirtualEarth.Latitude;k+="&Longitude="+this.CurrentVirtualEarth.Longitude;k+="&ZoomLevel="+this.CurrentVirtualEarth.ZoomLevel}if(m=="true"){k=k.replace("&usePDF=false","&usePDF=true")}}}}if(!l){this.setNav();this.setMenu()}if(this.FromNode){if(this.ShowStats){if(!$("#dialogStats").is(":visible")){$(".HoverAction").trigger("click")}}else{if($("#dialogStats").is(":visible")){$(".HoverAction").trigger("click")}}}if(!l){var u=this.getTargetFrame();if(this.LastViewedSpreadsheetID!=this.CurrentViewID){if(k.length>maxQueryStringLength){var h=k.indexOf("?");var f="&"+k.substring(h+1);k=k.substring(0,h);$.ajax({type:"POST",url:k,data:f,success:function(e){document.getElementById(u).contentWindow.document.write(e)},error:function(e){this.ajaxRetryOnError(e,"Error retrieving data from server.")}})}else{document.getElementById(u).src=k}}else{var q=document.getElementById(u);if(q.contentWindow&&q.contentWindow.$){var g=q.contentWindow.$("#grid");g.resetSelection();this.syncSpreadsheetSelectedIds(g.getDataIDs(),g)}}if(this.CurrentType=="Spreadsheet"&&this.LastViewedSpreadsheetID!=this.CurrentViewID){this.LastViewedSpreadsheetID=this.CurrentViewID}this.setViewName(this.CurrentViewName,p);this.addViewToHistory(this.CurrentViewID)}if(this.AutoPrint&&this.CurrentViewID==vidCMASummary){dataController.ShowPDF=false}else{this.AutoPrintCMASummary=false}this.AutoPrint=false;this.FromNode=false;return k};this.setCurrentPage=function(){this.CurrentPage=Math.ceil((this.CurrentIndex+1)/this.CurrentPageSize)};this.first=function(a){if(!$(a.currentTarget).hasClass("ui-state-disabled")){dataController.move(1-dataController.CurrentPage)}};this.prev=function(a){if(!$(a.currentTarget).hasClass("ui-state-disabled")){dataController.move(-1)}};$("#txtCurPage").keypress(function(a){if(a.keyCode=="13"){var b=$(this).val();dataController.movePage(b)}});$("#txtCurPage").change(function(){var a=$(this).val();dataController(a)});this.movePage=function(b){var a=0;if(!isNaN(b)&&b>0&&b<dataController.CurrentPage){a=dataController.CurrentPage-b;if(a>0){dataController.move(parseInt("-"+a.toString(),10))}else{$("#txtCurPage").val(dataController.CurrentPage.toString())}}else{if(!isNaN(b)&&b>0&&b>dataController.CurrentPage&&b<=dataController.TotalPage){a=b-dataController.CurrentPage;dataController.move(a)}else{$("#txtCurPage").val(dataController.CurrentPage.toString())}}};this.next=function(a){if(!$(a.currentTarget).hasClass("ui-state-disabled")){dataController.move(1)}};this.last=function(a){if(!$(a.currentTarget).hasClass("ui-state-disabled")){dataController.move(dataController.TotalPage-dataController.CurrentPage)}};this.setNav=function(){this.TotalPage=Math.ceil(this.TotalRecords/this.CurrentPageSize);$("#pageLabel").text(this.CurrentPageSize==1?this.searchUsesListingIds()?"Listing ":"Records ":"Page ");$("#sp_1").text(this.TotalPage);$("#txtCurPage").val(this.CurrentPage);if(this.CurrentPage>1){$("#first").removeClass("ui-state-disabled");$("#prev").removeClass("ui-state-disabled")}else{$("#first").addClass("ui-state-disabled").removeClass("ui-state-hover");$("#prev").addClass("ui-state-disabled").removeClass("ui-state-hover")}if(this.CurrentPage!=this.TotalPage){$("#next").removeClass("ui-state-disabled");$("#last").removeClass("ui-state-disabled")}else{$("#next").addClass("ui-state-disabled").removeClass("ui-state-hover");$("#last").addClass("ui-state-disabled").removeClass("ui-state-hover")}if(this.CurrentIsPagingControl){$("#pager_left").show()}else{$("#pager_left").hide()}if(this.CurrentType=="Spreadsheet"){$("#ifSpreadsheet").show();$("#ifView").hide()}else{$("#ifSpreadsheet").hide();$("#ifView").show()}$("#Email").removeClass("sf-disabled")};this.setMenu=function(){$("#SHOWPDF").removeClass("sf-disabled");$("#SHOWHTML").removeClass("sf-disabled");var a=false;for(var b=0;b<pdfExclusionList.length;b++){if(this.CurrentViewID==pdfExclusionList[b]){a=true;break}}if(a){$("#SHOWPDF").addClass("sf-disabled");$("#SHOWHTML").addClass("sf-disabled")}$("#SHOWPDF").removeClass("sf-disabled");$("#SHOWHTML").removeClass("sf-disabled");a=false;for(var b=0;b<pdfExclusionList.length;b++){if(this.CurrentViewID==pdfExclusionList[b]){a=true;break}}if(a){$("#SHOWPDF").addClass("sf-disabled");$("#SHOWHTML").addClass("sf-disabled")}$("#Correction").removeClass("sf-disabled");if(!this.CurrentIsCorrectionable){$("#Correction").addClass("sf-disabled")}$("#Customize").removeClass("sf-disabled");if(!this.CurrentIsCustomizable){$("#Customize").addClass("sf-disabled")}$("#Sort").removeClass("sf-disabled");if(this.CurrentType!="Spreadsheet"){$("#Sort").addClass("sf-disabled")}$("#ExportXLS").addClass("sf-hidden");$("#ExportCSV").removeClass("sf-hidden");if(this.CurrentIsExcel){$("#ExportCSV").addClass("sf-hidden");$("#ExportXLS").removeClass("sf-hidden")}};this.getListingSet=function(d,c,e,g){var a="";var f=new Array();if(c>this.TotalRecords){c=this.TotalRecords}try{for(var b=d;b<c;b++){if(this.IDs[b]==null){this.backgroundLoad(b,false)}if(g){f.push({ID:this.IDs[b].ID,UniqueID:this.IDs[b].UniqueID})}else{a+=(e?this.IDs[b].UniqueID:this.IDs[b].ID)+","}}}catch(h){}a=a.substring(0,a.length-1);return g?f:a};this.getListings=function(d,c,a){if(d<=1&&this.CurrentID!=0){return c?this.CurrentUniqueID:this.CurrentID}else{var b=this.CurrentIndex%d;return this.getListingSet(this.CurrentIndex-b,this.CurrentIndex-b+d,c,a)}};this.findAndLoadViewId=function(b){var a=$("#Reports a[viewid="+b+"]");if(a.length==1){this.setViewFromNode(a);this.loadView()}};this.syncView=function(b){if(this.CurrentViewID!=b){var a=$("#Reports a[viewid="+b+"]");if(a.length==1){this.setViewFromNode(a);this.setViewName(this.CurrentViewName);this.setNav();this.setMenu()}else{$.jGrowl("Error syncing view.")}}};this.hasClassSpecificPrefs=function(a){return(a==vidHotsheet||a==vidHistory||a==vidCMASummary)};this.setViewName=function(c,f){var a=frameElement.id;var b=a.substring(0,a.indexOf("_"));var h=parent.$("a[href=#"+a+"] span");if(h.length==0){a=a.substring(0,a.lastIndexOf("_"));h=parent.$("a[href=#"+a+"] span.secondTab")}if(h.length==1&&parent.$("a[href=#"+b+"]").attr("tabdescription")!="Parcel Tax Results"){var e="";if(f==null){var d=String(h.html());var g=d.lastIndexOf(" (");if(g>0){e=c+d.substring(g)}else{e=c}}else{e=c+" ("+f+")"}h.html(e)}};this.hasPrintPlusAccess=function(){var a=true;for(var b=0;b<printPlusExclusionList.length;b++){if(this.CurrentViewID==printPlusExclusionList[b]){a=false;break}}return a};this.setExportMenu=function(a){if(a){$("#ExportXLS").removeClass("sf-hidden");$("#ExportCSV").addClass("sf-hidden")}else{$("#ExportCSV").removeClass("sf-hidden");$("#ExportXLS").addClass("sf-hidden")}}};var removeFavorite=false;var tempNode;var myFirstSelect=false;var firstSelect;$(function(){if(typeof($.fn.tree)=="function"){firstSelect=true;$("#Reports,#ReportsToh").tree({opened:["nodeFavorites","nodeDefault"],selected:"nodeSelected",ui:{theme_path:window.focusAppPath+"Scripts/jstree/themes/paragon/style.css",theme_name:"paragon"},rules:{valid_children:["root"]},types:{"default":{max_depth:0,valid_children:"none"},favoritesItem:{icon:{position:"-16px -16px"}},normalItem:{icon:{image:window.focusAppPath+"Content/images/Tree/report.png"}},defaultContainer:{draggable:false,icon:{image:window.focusAppPath+"Content/images/Tree/default_view_folder.png"}},defaultItem:{draggable:false,icon:{image:window.focusAppPath+"Content/images/Tree/default_report.png"}},favoritesContainer:{draggable:false,valid_children:"favoritesItem",max_depth:1},normalContainer:{draggable:false,valid_children:"normalItem",max_depth:1}},callback:{beforemove:function(d,a,c,b){return removeFavorite||b.get_type(a)=="favoritesItem"},ondblclk:function(){return false},onselect:function(b,g){var r=$(b).attr("rel");if(r!=null&&r.indexOf("Container")<0){if(b.innerHTML.indexOf("iPointSv")>0){var e=b.innerHTML.indexOf("iPointSv");var o=b.innerHTML.substring(e,b.innerHTML.indexOf('"',e)).split("~");var l=o[0].replace("iPointSv_","");var c=o[1]=="null"?null:o[1];var n=o[2]=="null"?null:o[2];var p=o[3];var i=o[4];var f=o[5];var h=b.innerText;var j=integrationUrl+"/"+dataController.CurrentID+"/"+l;if(p=="Redirect"){DoIntegrationPointReDirect(j,c,n,i,f,null)}else{parent.$.fn.colorbox({href:j,open:true,iframe:true,height:c+"px",width:n+"px",title:h,close:'<button id="Close" onClick="javascript:parent.$.fn.colorbox.close();" >Close</button>',onClosed:false})}return false}if($(b).attr("colorbox")=="true"){var a="?";var d="&";var s=0;var m="sc=";var q="t="+dataController.TotalRecords;var k="cv="+dataController.CurrentViewID;if(dataController.SelectedIDs.length>0){s=dataController.SelectedIDs.length}m+=s.toString();tempNode=b;a+=q+d+m+d+k+d+"searchID="+frameElement.id;if(b.innerHTML.indexOf("broker_management_report")==-1){parent.$.fn.colorbox({href:marketConditionsAddendumUrl+a,open:true,iframe:true,width:"600px",height:"300px",title:"Market Conditions Addendum Report",close:'<button id="Generate">Generate Report</button><button id="Cancel">Cancel</button>',onClosed:false})}else{parent.$.fn.colorbox({href:brokerManagementReportUrl+a,open:true,iframe:true,width:"710px",height:"550px",title:"Broker Management Report",close:'<button id="Generate">Generate Report</button><button id="Cancel">Cancel</button>',onClosed:false})}}else{$.focusFx.loadViewSelectorNode(b,!firstSelect);firstSelect=false}}else{g.toggle_branch(b)}},onmove:function(a){if(!removeFavorite){$.tree.focused().set_type("favoritesItem",a)}else{$.tree.focused().set_type("normalItem",a)}saveFavorites();removeFavorite=false}}});$("#Reports li>a>ins").click(function(a){if($(this).parent().parent().attr("rel")=="favoritesItem"){a.stopPropagation();removeFavorite=true;var b=$(this).parent().parent();$.tree.focused().cut(b);var c=$("#"+b.attr("parentHeader"));if($.tree.focused().paste(c)===false){$.jGrowl("Could not remove favorite item from list.")}}});$("#ReportsOpenAll").click(function(){$.tree.focused().open_all();try{resizeReports()}catch(a){}});$("#ReportsCloseAll").click(function(){$.tree.focused().close_all();try{resizeReports()}catch(a){}})}if($.focusFx.postTreeLoad){$.focusFx.postTreeLoad()}});function CallMarketConditionsAddendumReport(c,a,b){dataController.UseAllListings=c;dataController.MaxDate=a;dataController.IncludeListingSummary=b;$.focusFx.loadViewSelectorNode(tempNode,!firstSelect)}function CallBrokerManagementReport(h,g,e,b,f,a,c,d){dataController.UseAllListings=h;dataController.BMRDollarRangeGroup=g;dataController.BMRAllClassInfo=e;dataController.BMRClassMonthlyInfo=b;dataController.BMRPriceRangeInfo=f;dataController.BMROfficeID=c;dataController.BMRUseFirm=a;if(d.length>0){dataController.BMROrgJson=d}$.focusFx.loadViewSelectorNode(tempNode,!firstSelect)}function saveFavorites(){var a="";$('#Reports li[rel="favoritesItem"] a').each(function(){a+=$(this).attr("viewid")+","});a=a.length>0?a.substring(0,a.length-1):"";$.ajax({url:saveFavoritesUrl,type:"POST",data:JSON.stringify({favoritesList:a}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){$.jGrowl("Saved Favorites")},error:function(b){this.ajaxRetryOnError(b,"Error saving favorites")}})};var wsJson="";function doReportIntegrationUpdates(){updateWalkScore();updateShowingTimeListings();updateDocCentralPublicListings()}function doSpreadsheetIntegrationUpdates(){if(typeof isShowingTimeActionIconEnabled!=="undefined"&&isShowingTimeActionIconEnabled){updateShowingTimeListings()}if(typeof isDocCentralPublicActionIconEnabled!=="undefined"&&isDocCentralPublicActionIconEnabled){updateDocCentralPublicListings()}}function updateWalkScore(){var a=$("a.f-integration-walkscore");var b="";if(a.length>0){showBlockUiMessage("Updating Walk Score...");try{$.each(a,function(d,f){if(b.length<1){var e=this.firstChild.getAttribute("listingid");getWalkScoreJson(e);if(wsJson.indexOf("Error")==-1){b=displayWalkScore(wsJson)}}f.parentElement.innerHTML=b})}catch(c){}hideBlockUiMessage()}}function getWalkScoreJson(a){$.ajax({type:"GET",dataType:"json",data:{listingId:a,testing:false},url:walkScoreUrl,success:function(c,b){if(c.status=="OK"){wsJson=c.message;return}else{$.jGrowl(c.message);wsJson="Error Updating Walk Score";return}},error:function(d,c,b){if(!this.ajaxRetryOnError(d,b)){hideBlockUiMessage();wsJson="Error Updating Walk Score"}}})}function displayWalkScore(jsonStr){var json=(jsonStr)?eval("("+jsonStr+")"):"";if(json&&json.status==1){var htmlStr='<a target="_blank" href="'+json.ws_link+'"><img src="'+json.logo_url+'" /><span class="walkscore-scoretext">'+json.walkscore+"</span></a>"}else{if(json&&json.status==2){var htmlStr='<a target="_blank" href="'+json.ws_link+'"><img src="'+json.logo_url+'" /> <span class="walkscore-noscoretext">Get Score</span></a>'}else{var htmlStr='<a target="_blank" href="http://www.walkscore.com"><img src="http://www2.walkscore.com/images/api-logo.gif" /> <span class="walkscore-noscoretext">Get Score</span></a> '}}var infoIconHtml='<span id="ws_info"><a href="http://www.walkscore.com/how-it-works.shtml" target="_blank"><img src="http://cdn.walkscore.com/images/api-more-info.gif" width="13" height="13"" /></a></span>';htmlStr="<p>"+htmlStr+infoIconHtml+"</p>";return htmlStr}function updateShowingTimeListings(){if(typeof(isShowingTimeEnabled)=="undefined"||!isShowingTimeEnabled){return false}var c=document.getElementById(dataController.getTargetFrame()).contentWindow;var f=c.$(".skittles").length;var d=c.$(".links").length;if(f+d<1){return false}var b=(dataController.CurrentPageSize*dataController.CurrentPage)-dataController.CurrentPageSize;var e=b+dataController.CurrentPageSize;var a=dataController.getListingSet(b,(e>dataController.TotalRecords?dataController.TotalRecords:e),false);showBlockUiMessage("Updating Showing Time Listing(s)...");$.ajax({type:"POST",dataType:"json",timeout:30000,data:{ids:a},url:showingTimeListingStatusUrl,success:function(h,g){if(h.status=="OK"){showShowingTimeIcons(h.message)}else{$.jGrowl(h.message);cleanupContextMenu();hideBlockUiMessage();return false}},error:function(i,h,g){if(!this.ajaxRetryOnError(i,g)){cleanupContextMenu();hideBlockUiMessage()}}})}function showShowingTimeIcons(c){showBlockUiMessage("Processing Received Listing(s) List...");var a=JSON.parse(c);var b=document.getElementById(dataController.getTargetFrame()).contentWindow;jQuery.each(a,function(e,d){b.$(".f-integration-showingtime[class*=f-listing-"+d+"\\:],.f-integration-showingtime.f-listing-"+d).show().addClass("f-integration-showingtime-enabled")});cleanupShowingTimeItems(b.$);cleanupContextMenu();hideBlockUiMessage()}function updateDocCentralPublicListings(){if(typeof(isDocCentralPublicEnabled)=="undefined"||!isDocCentralPublicEnabled){return false}var c=document.getElementById(dataController.getTargetFrame()).contentWindow;var f=c.$(".skittles").length;var d=c.$(".links").length;if(f+d<1){return false}var b=(dataController.CurrentPageSize*dataController.CurrentPage)-dataController.CurrentPageSize;var e=b+dataController.CurrentPageSize;var a=dataController.getListingSet(b,(e>dataController.TotalRecords?dataController.TotalRecords:e),false);showBlockUiMessage("Updating DocCentral Public Documents Listing(s)...");$.ajax({type:"POST",dataType:"json",data:{ids:a},url:docCentralPublicListingStatusUrl,success:function(h,g){if(h.status=="OK"){showDocCentralPublicIcons(h.message)}else{$.jGrowl(h.message);cleanupContextMenu();hideBlockUiMessage();return false}},error:function(i,h,g){if(!this.ajaxRetryOnError(i,g)){cleanupContextMenu();hideBlockUiMessage()}}})}function showDocCentralPublicIcons(c){if(c.length<1){return false}showBlockUiMessage("Processing Received Listing(s) List...");var b=document.getElementById(dataController.getTargetFrame()).contentWindow;var a=JSON.parse(c);jQuery.each(a,function(e,h){var d=h.ListingID;var f=h.AccessCode;var g=b.$(".f-integration-doccentralpublic[class*=f-listing-"+d+"\\:],.f-integration-doccentralpublic.f-listing-"+d);g.parent().attr("rel",f);g.show().addClass("f-integration-doccentralpublic-enabled")});cleanupDocCentralItems(b.$);cleanupContextMenu();hideBlockUiMessage()}function showBlockUiMessage(b){var c=document.getElementById(dataController.getTargetFrame()).contentWindow.$;var a=c("#BlockUiMessage");if(a.length==0){c('<div id="BlockUiMessage" />').appendTo("body");a=c("#BlockUiMessage").css({position:"absolute",top:c(document.getElementById(dataController.getTargetFrame()).contentWindow).height()-17,height:16,width:"100%",zIndex:999})}a.show().block({message:b,fadeIn:0,overlayCSS:{backgroundColor:"#000",opacity:0.2},css:{border:"none",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.85,color:"#fff",fontSize:"125%",fontWeight:"bold"}})}function hideBlockUiMessage(){var a=document.getElementById(dataController.getTargetFrame()).contentWindow.$;a("#BlockUiMessage").unblock().hide()}function cleanupShowingTimeItems(a){a(".f-integration-showingtime:not(.f-integration-showingtime-enabled)").parent().parent("li.f-context-menu-item").andSelf().remove()}function cleanupDocCentralItems(a){a(".f-integration-doccentralpublic:not(.f-integration-doccentralpublic-enabled)").parent().parent("li.f-context-menu-item").andSelf().remove()}function cleanupContextMenu(){var a=document.getElementById(dataController.getTargetFrame()).contentWindow.$;a("img.f-integration-context").each(function(){var b=a("#"+a(this).attr("rel"));var c=b.find("li.f-context-menu-item");if(c.length==0){b.remove();a(this).remove()}})};jQuery.fn.delay=function(b,a){this.each(function(){setTimeout(a,b)});return this};/*
 * jQuery blockUI plugin
 * Version 2.60.0-2013.04.05
 * @requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(){function a(o){o.fn._fadeIn=o.fn.fadeIn;var j=o.noop||function(){};var f=/MSIE/.test(navigator.userAgent);var e=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var l=document.documentMode||0;var n=o.isFunction(document.createElement("div").style.setExpression);o.blockUI=function(r){i(window,r)};o.unblockUI=function(r){b(window,r)};o.growlUI=function(s,r,t,u){var v=o('<div class="growlUI"></div>');if(s){v.append("<h1>"+s+"</h1>")}if(r){v.append("<h2>"+r+"</h2>")}if(t===undefined){t=3000}o.blockUI({message:v,fadeIn:700,fadeOut:1000,centerY:false,timeout:t,showOverlay:false,onUnblock:u,css:o.blockUI.defaults.growlCSS})};o.fn.block=function(r){if(this[0]===window){o.blockUI(r);return this}var s=o.extend({},o.blockUI.defaults,r||{});this.each(function(){var t=o(this);if(s.ignoreIfBlocked&&t.data("blockUI.isBlocked")){return}t.unblock({fadeOut:0})});return this.each(function(){if(o.css(this,"position")=="static"){this.style.position="relative";o(this).data("blockUI.static",true)}this.style.zoom=1;i(this,r)})};o.fn.unblock=function(r){if(this[0]===window){o.unblockUI(r);return this}return this.each(function(){b(this,r)})};o.blockUI.version=2.6;o.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var g=null;var q=[];function i(J,L){var H,r;var D=(J==window);var u=(L&&L.message!==undefined?L.message:undefined);L=o.extend({},o.blockUI.defaults,L||{});if(L.ignoreIfBlocked&&o(J).data("blockUI.isBlocked")){return}L.overlayCSS=o.extend({},o.blockUI.defaults.overlayCSS,L.overlayCSS||{});H=o.extend({},o.blockUI.defaults.css,L.css||{});if(L.onOverlayClick){L.overlayCSS.cursor="pointer"}r=o.extend({},o.blockUI.defaults.themedCSS,L.themedCSS||{});u=u===undefined?L.message:u;if(D&&g){b(window,{fadeOut:0})}if(u&&typeof u!="string"&&(u.parentNode||u.jquery)){var w=u.jquery?u[0]:u;var E={};o(J).data("blockUI.history",E);E.el=w;E.parent=w.parentNode;E.display=w.style.display;E.position=w.style.position;if(E.parent){E.parent.removeChild(w)}}o(J).data("blockUI.onUnblock",L.onUnblock);var A=L.baseZ;var y,O,N,G;if(f||L.forceIframe){y=o('<iframe class="blockUI" style="z-index:'+(A++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+L.iframeSrc+'"></iframe>')}else{y=o('<div class="blockUI" style="display:none"></div>')}if(L.theme){O=o('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(A++)+';display:none"></div>')}else{O=o('<div class="blockUI blockOverlay" style="z-index:'+(A++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(L.theme&&D){G='<div class="blockUI '+L.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:fixed">';if(L.title){G+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(L.title||"&nbsp;")+"</div>"}G+='<div class="ui-widget-content ui-dialog-content"></div>';G+="</div>"}else{if(L.theme){G='<div class="blockUI '+L.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:absolute">';if(L.title){G+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(L.title||"&nbsp;")+"</div>"}G+='<div class="ui-widget-content ui-dialog-content"></div>';G+="</div>"}else{if(D){G='<div class="blockUI '+L.blockMsgClass+' blockPage" style="z-index:'+(A+10)+';display:none;position:fixed"></div>'}else{G='<div class="blockUI '+L.blockMsgClass+' blockElement" style="z-index:'+(A+10)+';display:none;position:absolute"></div>'}}}N=o(G);if(u){if(L.theme){N.css(r);N.addClass("ui-widget-content")}else{N.css(H)}}if(!L.theme){O.css(L.overlayCSS)}O.css("position",D?"fixed":"absolute");if(f||L.forceIframe){y.css("opacity",0)}var B=[y,O,N],x=D?o("body"):o(J);o.each(B,function(){this.appendTo(x)});if(L.theme&&L.draggable&&o.fn.draggable){N.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var v=n&&(!o.support.boxModel||o("object,embed",D?null:J).length>0);if(e||v){if(D&&L.allowBodyStretch&&o.support.boxModel){o("html,body").css("height","100%")}if((e||!o.support.boxModel)&&!D){var K=d(J,"borderTopWidth"),R=d(J,"borderLeftWidth");var M=K?"(0 - "+K+")":0;var I=R?"(0 - "+R+")":0}o.each(B,function(z,T){var t=T[0].style;t.position="absolute";if(z<2){if(D){t.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+L.quirksmodeOffsetHack+') + "px"')}else{t.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(D){t.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{t.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(I){t.setExpression("left",I)}if(M){t.setExpression("top",M)}}else{if(L.centerY){if(D){t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}t.marginTop=0}else{if(!L.centerY&&D){var U=(L.css&&L.css.top)?parseInt(L.css.top,10):0;var S="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+U+') + "px"';t.setExpression("top",S)}}}})}if(u){if(L.theme){N.find(".ui-widget-content").append(u)}else{N.append(u)}if(u.jquery||u.nodeType){o(u).show()}}if((f||L.forceIframe)&&L.showOverlay){y.show()}if(L.fadeIn){var Q=L.onBlock?L.onBlock:j;var C=(L.showOverlay&&!u)?Q:j;var F=u?Q:j;if(L.showOverlay){O._fadeIn(L.fadeIn,C)}if(u){N._fadeIn(L.fadeIn,F)}}else{if(L.showOverlay){O.show()}if(u){N.show()}if(L.onBlock){L.onBlock()}}p(1,J,L);if(D){g=N[0];q=o(L.focusableElements,g);if(L.focusInput){setTimeout(h,20)}}else{c(N[0],L.centerX,L.centerY)}if(L.timeout){var P=setTimeout(function(){if(D){o.unblockUI(L)}else{o(J).unblock(L)}},L.timeout);o(J).data("blockUI.timeout",P)}}function b(v,r){var u;var y=(v==window);var x=o(v);var w=x.data("blockUI.history");var s=x.data("blockUI.timeout");if(s){clearTimeout(s);x.removeData("blockUI.timeout")}r=o.extend({},o.blockUI.defaults,r||{});p(0,v,r);if(r.onUnblock===null){r.onUnblock=x.data("blockUI.onUnblock");x.removeData("blockUI.onUnblock")}var t;if(y){t=o("body").children().filter(".blockUI").add("body > .blockUI")}else{t=x.find(">.blockUI")}if(r.cursorReset){if(t.length>1){t[1].style.cursor=r.cursorReset}if(t.length>2){t[2].style.cursor=r.cursorReset}}if(y){g=q=null}if(r.fadeOut){u=t.length;t.fadeOut(r.fadeOut,function(){if(--u===0){k(t,w,r,v)}})}else{k(t,w,r,v)}}function k(s,u,r,t){var z=o(t);s.each(function(w,A){if(this.parentNode){this.parentNode.removeChild(this)}});if(u&&u.el){u.el.style.display=u.display;u.el.style.position=u.position;if(u.parent){u.parent.appendChild(u.el)}z.removeData("blockUI.history")}if(z.data("blockUI.static")){z.css("position","static")}if(typeof r.onUnblock=="function"){r.onUnblock(t,r)}var x=o(document.body),v=x.width(),y=x[0].style.width;x.width(v-1).width(v);x[0].style.width=y}function p(w,s,r){var v=s==window,u=o(s);if(!w&&(v&&!g||!v&&!u.data("blockUI.isBlocked"))){return}u.data("blockUI.isBlocked",w);if(!v||!r.bindEvents||(w&&!r.showOverlay)){return}var t="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(w){o(document).bind(t,r,m)}else{o(document).unbind(t,m)}}function m(u){if(u.keyCode&&u.keyCode==9){if(g&&u.data.constrainTabKey){var s=q;var t=!u.shiftKey&&u.target===s[s.length-1];var v=u.shiftKey&&u.target===s[0];if(t||v){setTimeout(function(){h(v)},10);return false}}}var r=u.data;var w=o(u.target);if(w.hasClass("blockOverlay")&&r.onOverlayClick){r.onOverlayClick()}if(w.parents("div."+r.blockMsgClass).length>0){return true}return w.parents().children().filter("div.blockUI").length===0}function h(s){if(!q){return}var r=q[s===true?q.length-1:0];if(r){r.focus()}}function c(v,z,A){var u=v.parentNode,r=v.style;var B=((u.offsetWidth-v.offsetWidth)/2)-d(u,"borderLeftWidth");var w=((u.offsetHeight-v.offsetHeight)/2)-d(u,"borderTopWidth");if(z){r.left=B>0?(B+"px"):"0"}if(A){r.top=w>0?(w+"px"):"0"}}function d(s,r){return parseInt(o.css(s,r),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}})();