(function($){$.fn.dynDateTime=function(options){$.fn.dynDateTime.defaults={displayArea:null,button:null,eventName:"click",ifFormat:"%Y/%m/%d",daFormat:"%Y/%m/%d",singleClick:true,dateStatusFunc:null,dateText:null,firstDay:null,align:"Br",range:[1900,2999],weekNumbers:true,flat:null,flatCallback:null,onSelect:null,onClose:null,onUpdate:null,date:null,showsTime:false,timeFormat:"24",electric:true,step:2,position:null,cache:true,showOthers:false,multiple:null,debug:false,includeDayInTitle:true,preClick:null,CalCss:"calendar",Table:"table",ArrowButtons:"button",Navigation:"nav",Title:"title",HeadRow:"headrow",DayRow:"daynames",DayCell:"name",WeekendColor:"weekend",HighLight:"hilite",Active:"active",BodyDay:"day",BodyDayOtherMonths:"day.othermonth",BodyDayOtherMonthWeekend:"day.othermonth.oweekend",Bodywn:"wn",RowHighLight:"rowhilite",CellHightLight:"hilite",CellActive:"active",CellSelected:"selected",CellWeekend:"weekend",CellToday:"today",CellDisabled:"disabled ",CellEmpty:"emptycell",RowEmpty:"emptyrow",FooterRow:"footrow",ToolTip:"ttip",FootHighLight:"hilite",FootActive:"active",ComboBox:"combo",ComboLabel:"label",ComboLabelForIE:"label-IEfix",ComboActive:"active",ComboHighLight:"hilite",CellTime:"time",Hour:"hour",Minute:"minute",AmPm:"ampm",Colon:"colon",TimeSpan:"span.hilite",TimeActive:"span.Ac"};var opts=$.extend({},$.fn.dynDateTime.defaults,options);return this.each(function(){var this_inputField=this;var this_displayArea=null;var this_button=null;var this_flat=null;if(opts.displayArea){try{this_displayArea=eval("jQuery(this)"+opts.displayArea+".get(0);")}catch(err){opts.displayArea=null}}if(opts.button){try{this_button=eval("jQuery(this)"+opts.button+".get(0);")}catch(err){opts.button=null}}if(opts.flat){try{this_flat=eval("jQuery(this)"+opts.flat+".get(0);")}catch(err){opts.flat=null}}if(!(this_flat||opts.multiple||this_inputField||this_displayArea||this_button)){log("opts");return}function onSelect(cal){var p=cal.opts;var update=(cal.dateClicked||p.electric);if(update==true){if(this_inputField){this_inputField.value=cal.date.print(p.ifFormat);$(this_inputField).trigger("change")}if(this_displayArea){this_displayArea.innerHTML=cal.date.print(p.daFormat)}if(typeof p.onUpdate=="function"){p.onUpdate(cal)}if(p.flat){if(typeof p.flatCallback=="function"){p.flatCallback(cal)}}if(p.singleClick&&cal.dateClicked){cal.callCloseHandler()}}}if(this_flat!=null){var cal=new Calendar(opts.firstDay,opts.date,opts.onSelect||onSelect);cal.showsOtherMonths=opts.showOthers;cal.showsTime=opts.showsTime;cal.time24=(opts.timeFormat=="24");cal.opts=opts;cal.weekNumbers=opts.weekNumbers;cal.setRange(opts.range[0],opts.range[1]);cal.setDateStatusHandler(opts.dateStatusFunc);cal.getDateText=opts.dateText;applyStyle(cal,opts);if(opts.ifFormat){cal.setDateFormat(opts.ifFormat)}if(this_inputField&&typeof this_inputField.value=="string"){log("rar")}cal.create(this_flat);cal.show();return}var triggerEl=this_button||this_displayArea||this_inputField;triggerEl["on"+opts.eventName]=function(){log("clicked");var dateEl=this_inputField||this_displayArea;if(opts.preClick){opts.preClick(dateEl)}if(dateEl&&dateEl.disabled){return}var dateFmt=this_inputField?opts.ifFormat:opts.daFormat;var mustCreate=false;var cal=dateEl.calendar;if(dateEl){opts.date=Date.parseDate(dateEl.value||dateEl.innerHTML,dateFmt)}if(!(cal&&opts.cache)){dateEl.calendar=cal=new Calendar(opts.firstDay,opts.date,opts.onSelect||onSelect,opts.onClose||function(cal){cal.hide()});cal.showsTime=opts.showsTime;cal.time24=(opts.timeFormat=="24");cal.weekNumbers=opts.weekNumbers;mustCreate=true}else{if(opts.date){cal.setDate(opts.date)}cal.hide()}if(opts.multiple){cal.multiple={};for(var i=opts.multiple.length-1;i>=0;--i){var d=opts.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d}}cal.showsOtherMonths=opts.showOthers;cal.yearStep=opts.step;cal.setRange(opts.range[0],opts.range[1]);cal.opts=opts;cal.setDateStatusHandler(opts.dateStatusFunc);cal.getDateText=opts.dateText;cal.setDateFormat(dateFmt);applyStyle(cal,opts);if(mustCreate){cal.create()}cal.refresh();if(!opts.position){cal.showAtElement(this_button||this_displayArea||this_inputField,opts.align)}else{cal.showAt(opts.position[0],opts.position[1])}return false}});function log(msg){if(opts.debug){window.loadFirebugConsole();if(window.console&&window.console.log){window.console.log("dynDateTime: "+msg)}}}function applyStyle(cal,opts){cal.includeDayInTitle=opts.includeDayInTitle;cal.CalCss=opts.CalCss;cal.Table=opts.Table;cal.ArrowButtons=opts.ArrowButtons;cal.Navigation=opts.Navigation;cal.Title=opts.Title;cal.HeadRow=opts.HeadRow;cal.DayRow=opts.DayRow;cal.DayCell=opts.DayCell;cal.WeekendColor=opts.WeekendColor;cal.HighLight=opts.HighLight;cal.Active=opts.Active;cal.BodyDay=opts.BodyDay;cal.BodyDayOtherMonths=opts.BodyDayOtherMonths;cal.BodyDayOtherMonthWeekend=opts.BodyDayOtherMonthWeekend;cal.Bodywn=opts.Bodywn;cal.RowHighLight=opts.RowHighLight;cal.CellHightLight=opts.CellHightLight;cal.CellActive=opts.CellActive;cal.CellSelected=opts.CellSelected;cal.CellWeekend=opts.CellWeekend;cal.CellToday=opts.CellToday;cal.CellDisabled=opts.CellDisabled;cal.CellEmpty=opts.CellEmpty;cal.RowEmpty=opts.RowEmpty;cal.FooterRow=opts.FooterRow;cal.ToolTip=opts.ToolTip;cal.FootHighLight=opts.FootHighLight;cal.FootActive=opts.FootActive;cal.ComboBox=opts.ComboBox;cal.ComboLabel=opts.ComboLabel;cal.ComboLabelForIE=opts.ComboLabelForIE;cal.ComboActive=opts.ComboActive;cal.ComboHighLight=opts.ComboHighLight;cal.CellTime=opts.CellTime;cal.Hour=opts.Hour;cal.Minute=opts.Minute;cal.AmPm=opts.AmPm;cal.Colon=opts.Colon;cal.TimeSpan=opts.TimeSpan;cal.TimeActive=opts.TimeActive}}})(jQuery);Calendar=function(c,d,a,f){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=a||null;this.onClose=f||null;this.dragging=false;this.hidden=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof c=="number"?c:Calendar._FD;this.showsOtherMonths=false;this.dateStr=d;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.includeDayInTitle=false;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;this.CalCss="calendar";this.Table="table";this.ArrowButtons="button";this.Navigation="nav";this.Title="title";this.HeadRow="headrow";this.DayRow="daynames";this.DayCell="name";this.WeekendColor="weekend";this.HighLight="hilite";this.Active="active";this.BodyDay="day";this.BodyDayOtherMonths="day.othermonth";this.BodyDayOtherMonthWeekend="day.othermonth.oweekend";this.Bodywn="wn";this.RowHighLight="rowhilite";this.CellHightLight="hilite";this.CellActive="active";this.CellSelected="selected";this.CellWeekend="weekend";this.CellToday="today";this.CellDisabled="disabled ";this.CellEmpty="emptycell";this.RowEmpty="emptyrow";this.FooterRow="footrow";this.ToolTip="ttip";this.FootHighLight="hilite";this.FootActive="active";this.ComboBox="combo";this.ComboLabel="label";this.ComboLabelForIE="label-IEfix";this.ComboActive="active";this.ComboHighLight="hilite";this.CellTime="time";this.Hour="hour";this.Minute="minute";this.AmPm="ampm";this.Colon="colon";this.TimeSpan="span.hilite";this.TimeActive="span.Ac";if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined"){Calendar._SDN_len=3}var b=new Array();for(var e=8;e>0;){b[--e]=Calendar._DN[e].substr(0,Calendar._SDN_len)}Calendar._SDN=b;if(typeof Calendar._SMN_len=="undefined"){Calendar._SMN_len=3}b=new Array();for(var e=12;e>0;){b[--e]=Calendar._MN[e].substr(0,Calendar._SMN_len)}Calendar._SMN=b}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(b){var a=jQuery(b).offset();return{x:a.left,y:a.top}};Calendar.isRelated=function(c,a){var d=a.relatedTarget;if(!d){var b=a.type;if(b=="mouseover"){d=a.fromElement}else{if(b=="mouseout"){d=a.toElement}}}while(d){if(d==c){return true}d=d.parentNode}return false};Calendar.removeClass=function(c,b){if(!(c&&c.className)){return}var d=c.className.split(" ");var a=new Array();for(var e=d.length;e>0;){if(d[--e]!=b){a[a.length]=d[e]}}c.className=a.join(" ")};Calendar.addClass=function(b,a){Calendar.removeClass(b,a);b.className+=" "+a};Calendar.getElement=function(b){var a=Calendar.is_ie?window.event.srcElement:b.currentTarget;while(a.nodeType!=1||/^div$/i.test(a.tagName)){a=a.parentNode}return a};Calendar.getTargetElement=function(b){var a=Calendar.is_ie?window.event.srcElement:b.target;while(a.nodeType!=1){a=a.parentNode}return a};Calendar.stopEvent=function(a){a||(a=window.event);if(Calendar.is_ie){a.cancelBubble=true;a.returnValue=false}else{a.preventDefault();a.stopPropagation()}return false};Calendar.addEvent=function(a,c,b){if(a.attachEvent){a.attachEvent("on"+c,b)}else{if(a.addEventListener){a.addEventListener(c,b,true)}else{a["on"+c]=b}}};Calendar.removeEvent=function(a,c,b){if(a.detachEvent){a.detachEvent("on"+c,b)}else{if(a.removeEventListener){a.removeEventListener(c,b,true)}else{a["on"+c]=null}}};Calendar.createElement=function(b,a){var c=null;if(document.createElementNS){c=document.createElementNS("http://www.w3.org/1999/xhtml",b)}else{c=document.createElement(b)}if(typeof a!="undefined"){a.appendChild(c)}return c};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true)}}};Calendar.findMonth=function(a){if(typeof a.month!="undefined"){return a}else{if(typeof a.parentNode.month!="undefined"){return a.parentNode}}return null};Calendar.findYear=function(a){if(typeof a.year!="undefined"){return a}else{if(typeof a.parentNode.year!="undefined"){return a.parentNode}}return null};Calendar.showMonthsCombo=function(){var b=Calendar._C;if(!b){return false}var b=b;var d=b.activeDiv;var a=b.monthsCombo;if(b.hilitedMonth){Calendar.removeClass(b.hilitedMonth,b.HighLight)}if(b.activeMonth){Calendar.removeClass(b.activeMonth,b.Active)}var f=b.monthsCombo.getElementsByTagName("div")[b.date.getMonth()];Calendar.addClass(f,b.Active);b.activeMonth=f;var c=a.style;c.display="block";if(d.navtype<0){c.left=d.offsetLeft+"px"}else{var e=a.offsetWidth;if(typeof e=="undefined"){e=50}c.left=(d.offsetLeft+d.offsetWidth-e)+"px"}c.top=(d.offsetTop+d.offsetHeight)+"px"};Calendar.showYearsCombo=function(c){var a=Calendar._C;if(!a){return false}var a=a;var e=a.activeDiv;var j=a.yearsCombo;if(a.hilitedYear){Calendar.removeClass(a.hilitedYear,a.HighLight)}if(a.activeYear){Calendar.removeClass(a.activeYear,a.Active)}a.activeYear=null;var k=a.date.getFullYear()+(c?1:-1);var h=j.firstChild;var b=false;for(var g=12;g>0;--g){if(k>=a.minYear&&k<=a.maxYear){h.innerHTML=k;h.year=k;h.style.display="block";b=true}else{h.style.display="none"}h=h.nextSibling;k+=c?a.yearStep:-a.yearStep}if(b){var f=j.style;f.display="block";if(e.navtype<0){f.left=e.offsetLeft+"px"}else{var d=j.offsetWidth;if(typeof d=="undefined"){d=50}f.left=(e.offsetLeft+e.offsetWidth-d)+"px"}f.top=(e.offsetTop+e.offsetHeight)+"px"}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false}if(cal.timeout){clearTimeout(cal.timeout)}var el=cal.activeDiv;if(!el){return false}var target=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,cal.Active);if(target==el||target.parentNode==el){Calendar.cellClick(el,ev)}var mon=Calendar.findMonth(target);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler()}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler()}}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev)}};Calendar.tableMouseOver=function(g){var p=Calendar._C;if(!p){return}var n=p.activeDiv;var h=Calendar.getTargetElement(g);if(h==n||h.parentNode==n){Calendar.addClass(n,p.HighLight+" "+p.Active);Calendar.addClass(n.parentNode,p.RowHighLight)}else{if(typeof n.navtype=="undefined"||(n.navtype!=50&&(n.navtype==0||Math.abs(n.navtype)>2))){Calendar.removeClass(n,p.Active)}Calendar.removeClass(n,p.HighLight);Calendar.removeClass(n.parentNode,p.RowHighLight)}g||(g=window.event);if(n.navtype==50&&h!=n){var j=Calendar.getAbsolutePos(n);var o=n.offsetWidth;var f=g.clientX;var k;var c=true;if(f>j.x+o){k=f-j.x-o;c=false}else{k=j.x-f}if(k<0){k=0}var d=n._range;var e=n._current;var m=Math.floor(k/10)%d.length;for(var q=d.length;--q>=0;){if(d[q]==e){break}}while(m-->0){if(c){if(--q<0){q=d.length-1}}else{if(++q>=d.length){q=0}}}var l=d[q];n.innerHTML=l;p.onUpdateTime()}var a=Calendar.findMonth(h);if(a){if(a.month!=p.date.getMonth()){if(p.hilitedMonth){Calendar.removeClass(p.hilitedMonth,p.HighLight)}Calendar.addClass(a,p.HighLight);p.hilitedMonth=a}else{if(p.hilitedMonth){Calendar.removeClass(p.hilitedMonth,p.HighLight)}}}else{if(p.hilitedMonth){Calendar.removeClass(p.hilitedMonth,p.HighLight)}var b=Calendar.findYear(h);if(b){if(b.year!=p.date.getFullYear()){if(p.hilitedYear){Calendar.removeClass(p.hilitedYear,p.HighLight)}Calendar.addClass(b,p.HighLight);p.hilitedYear=b}else{if(p.hilitedYear){Calendar.removeClass(p.hilitedYear,p.HighLight)}}}else{if(p.hilitedYear){Calendar.removeClass(p.hilitedYear,p.HighLight)}}}return Calendar.stopEvent(g)};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a)){return Calendar.stopEvent(a)}};Calendar.calDragIt=function(a){var e=Calendar._C;if(!(e&&e.dragging)){return false}var b;var d;if(Calendar.is_ie){d=window.event.clientY+document.body.scrollTop;b=window.event.clientX+document.body.scrollLeft}else{b=a.pageX;d=a.pageY}e.hideShowCovered();var c=e.element.style;c.left=(b-e.xOffs)+"px";c.top=(d-e.yOffs)+"px";return Calendar.stopEvent(a)};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false}cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev)}cal.hideShowCovered()};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false}var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300){with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver)}else{addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver)}addClass(el,cal.HighLight+" "+cal.Active);addEvent(document,"mouseup",tableMouseUp)}}else{if(cal.isPopup){cal._dragStart(ev)}}if(el.navtype==-1||el.navtype==1){if(cal.timeout){clearTimeout(cal.timeout)}cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)}else{if(el.navtype==-2||el.navtype==2){if(cal.timeout){clearTimeout(cal.timeout)}cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)}else{cal.timeout=null}}return Calendar.stopEvent(ev)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);if(Calendar.is_ie){document.selection.empty()}};Calendar.dayMouseOver=function(a){var b=Calendar.getElement(a);if(Calendar.isRelated(b,a)||Calendar._C||b.disabled){return false}if(b.ttip){if(b.ttip.substr(0,1)=="_"){b.ttip=b.caldate.print(b.calendar.ttDateFormat)+b.ttip.substr(1)}b.calendar.tooltips.innerHTML=b.ttip}if(b.navtype!=300){Calendar.addClass(b,b.calendar.HighLight);if(b.caldate){Calendar.addClass(b.parentNode,b.calendar.RowHighLight)}}return Calendar.stopEvent(a)};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled){return false}removeClass(el,el.calendar.HighLight);if(el.caldate){removeClass(el.parentNode,el.calendar.RowHighLight)}if(el.calendar){el.calendar.tooltips.innerHTML=_TT.SEL_DATE}return stopEvent(ev)}};Calendar.cellClick=function(n,g){var a=n.calendar;var c=false;var o=false;var l=null;if(typeof n.navtype=="undefined"){if(a.currentDateEl){Calendar.removeClass(a.currentDateEl,a.CellSelected);Calendar.addClass(n,a.CellSelected);c=(a.currentDateEl==n);if(!c){a.currentDateEl=n}}a.date.setDateOnly(n.caldate);l=a.date;var m=!(a.dateClicked=!n.otherMonth);if(!m&&!a.currentDateEl){a._toggleMultipleDate(new Date(l))}else{o=!n.disabled}if(m){a._init(a.firstDayOfWeek,l)}if(a.includeDayInTitle){a.title.innerHTML=Calendar._MN[l.getMonth()]+" "+l.getDate()+", "+l.getFullYear()}}else{if(n.navtype==200){Calendar.removeClass(n,a.HighLight);a.callCloseHandler();return}l=new Date(a.date);if(n.navtype==0){l.setDateOnly(new Date())}a.dateClicked=false;var d=l.getFullYear();var b=l.getMonth();function p(i){var q=l.getDate();var r=l.getMonthDays(i);if(q>r){l.setDate(r)}l.setMonth(i)}switch(n.navtype){case 400:Calendar.removeClass(n,a.HighLight);var k=Calendar._TT.ABOUT;if(typeof k!="undefined"){k+=a.showsTime?Calendar._TT.ABOUT_TIME:""}else{k='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n'}alert(k);return;case -2:if(d>a.minYear){l.setFullYear(d-1)}break;case -1:if(b>0){p(b-1)}else{if(d-->a.minYear){l.setFullYear(d);p(11)}}break;case 1:if(b<11){p(b+1)}else{if(d<a.maxYear){l.setFullYear(d+1);p(0)}}break;case 2:if(d<a.maxYear){l.setFullYear(d+1)}break;case 100:a.setFirstDayOfWeek(n.fdow);return;case 50:var f=n._range;var j=n.innerHTML;for(var e=f.length;--e>=0;){if(f[e]==j){break}}if(g&&g.shiftKey){if(--e<0){e=f.length-1}}else{if(++e>=f.length){e=0}}var h=f[e];n.innerHTML=h;a.onUpdateTime();return;case 0:if((typeof a.getDateStatus=="function")&&a.getDateStatus(l,l.getFullYear(),l.getMonth(),l.getDate())){return false}break}if(!l.equalsTo(a.date)){a.setDate(l);o=true}else{if(n.navtype==0){o=c=true}}}if(o){g&&a.callHandler()}if(c){Calendar.removeClass(n,a.hilite);g&&a.callCloseHandler()}};Calendar.prototype.create=function(g){var r=null;if(!g){r=document.getElementsByTagName("body")[0];this.isPopup=true}else{r=g;this.isPopup=false}this.date=this.dateStr?new Date(this.dateStr):new Date();var k=Calendar.createElement("table");this.table=k;k.cellSpacing=0;k.cellPadding=0;k.calendar=this;Calendar.addEvent(k,"mousedown",Calendar.tableMouseDown);var m=Calendar.createElement("div");this.element=m;m.className=this.CalCss;if(this.isPopup){m.style.position="absolute";m.style.display="none"}m.appendChild(k);var e=Calendar.createElement("thead",k);var f=null;var l=null;var p=this;var c=function(i,t,j,s){f=Calendar.createElement("td",l);f.colSpan=t;f.className=p.ArrowButtons;if(j!=0&&Math.abs(j)<=2){f.className+=" "+p.Navigation}Calendar._add_evs(f);f.calendar=p;f.navtype=j;f.innerHTML="<div id='"+s+"' unselectable='on'>"+i+"</div>";return f};l=Calendar.createElement("tr",e);var d=7;(this.isPopup)&&--d;(this.weekNumbers)&&++d;this.title=c("",d,300);this.title.className=p.Title;if(this.isPopup){this.title.ttip=Calendar._TT.DRAG_TO_MOVE;this.title.style.cursor="move";c("&#x00d7;",1,200,"CALENDAR_CLOSE").ttip=Calendar._TT.CLOSE}l=Calendar.createElement("tr",e);l.className=p.HeadRow;this._nav_py=c("&#x00ab;",1,-2,"PREV_YEAR");this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=c("&#x2039;",1,-1,"PREV_MONTH");this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=c(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=c("&#x203a;",1,1,"NEXT_MONTH");this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=c("&#x00bb;",1,2,"NEXT_YEAR");this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;l=Calendar.createElement("tr",e);l.className=p.DayRow;if(this.weekNumbers){f=Calendar.createElement("td",l);f.className=p.DayCell+" "+p.Bodywn;f.innerHTML=Calendar._TT.WK}for(var q=7;q>0;--q){f=Calendar.createElement("td",l);if(!q){f.navtype=100;f.calendar=this;Calendar._add_evs(f)}}this.firstdayname=(this.weekNumbers)?l.firstChild.nextSibling:l.firstChild;this._displayWeekdays();var b=Calendar.createElement("tbody",k);this.tbody=b;for(q=6;q>0;--q){l=Calendar.createElement("tr",b);if(this.weekNumbers){f=Calendar.createElement("td",l)}for(var o=7;o>0;--o){f=Calendar.createElement("td",l);f.calendar=this;Calendar._add_evs(f)}}if(this.showsTime){l=Calendar.createElement("tr",b);l.className=p.CellTime;f=Calendar.createElement("td",l);f.className=p.CellTime;f.colSpan=2;f.innerHTML=Calendar._TT.TIME||"&nbsp;";f=Calendar.createElement("td",l);f.className=p.CellTime;f.colSpan=this.weekNumbers?4:3;(function(){function v(D,B,z,F){var A=Calendar.createElement("span",f);A.className=D;A.innerHTML=B;A.calendar=p;A.ttip=Calendar._TT.TIME_PART;A.navtype=50;A._range=[];if(typeof z!="number"){A._range=z}else{for(var E=z;E<=F;++E){var C;if(E<10&&F>=10){C="0"+E}else{C=""+E}A._range[A._range.length]=C}}Calendar._add_evs(A);return A}var x=p.date.getHours();var s=p.date.getMinutes();var u=!p.time24;var w=(x>12);if(u&&w){x-=12}var i=v("hour",x,u?1:0,u?12:23);var t=Calendar.createElement("span",f);t.innerHTML=":";t.className=this.Colon;var j=v("minute",s,0,59);var y=null;f=Calendar.createElement("td",l);f.className=p.CellTime;f.colSpan=2;if(u){y=v("ampm",w?"pm":"am",["am","pm"])}else{f.innerHTML="&nbsp;"}p.onSetTime=function(){var B,z=this.date.getHours(),A=this.date.getMinutes();if(u){B=(z>=12);if(B){z-=12}if(z==0){z=12}y.innerHTML=B?"pm":"am"}i.innerHTML=(z<10)?("0"+z):z;j.innerHTML=(A<10)?("0"+A):A};p.onUpdateTime=function(){var A=this.date;var B=parseInt(i.innerHTML,10);if(u){if(/pm/i.test(y.innerHTML)&&B<12){B+=12}else{if(/am/i.test(y.innerHTML)&&B==12){B=0}}}var z=A.getDate();var C=A.getMonth();var D=A.getFullYear();A.setHours(B);A.setMinutes(parseInt(j.innerHTML,10));A.setFullYear(D);A.setMonth(C);A.setDate(z);this.dateClicked=false;this.callHandler()}})()}else{this.onSetTime=this.onUpdateTime=function(){}}var a=Calendar.createElement("tfoot",k);l=Calendar.createElement("tr",a);l.className=p.FooterRow;f=c(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);f.className=p.ToolTip;if(this.isPopup){f.ttip=Calendar._TT.DRAG_TO_MOVE;f.style.cursor="move"}this.tooltips=f;m=Calendar.createElement("div",this.element);this.monthsCombo=m;m.className=p.ComboBox;for(q=0;q<Calendar._MN.length;++q){var n=Calendar.createElement("div");n.className=Calendar.is_ie?p.ComboLabelForIE:p.ComboLabel;n.month=q;n.innerHTML=Calendar._SMN[q];m.appendChild(n)}m=Calendar.createElement("div",this.element);this.yearsCombo=m;m.className=p.ComboBox;for(q=12;q>0;--q){var h=Calendar.createElement("div");h.className=Calendar.is_ie?p.ComboLabelForIE:p.ComboLabel;m.appendChild(h)}this._init(this.firstDayOfWeek,this.date);r.appendChild(this.element)};Calendar._keyEvent=function(d){var k=window._dynarch_popupCalendar;if(!k||k.multiple){return false}(Calendar.is_ie)&&(d=window.event);var e=(Calendar.is_ie||d.type=="keypress"),m=d.keyCode;if(d.ctrlKey){switch(m){case 37:e&&Calendar.cellClick(k._nav_pm);break;case 38:e&&Calendar.cellClick(k._nav_py);break;case 39:e&&Calendar.cellClick(k._nav_nm);break;case 40:e&&Calendar.cellClick(k._nav_ny);break;default:return false}}else{switch(m){case 32:Calendar.cellClick(k._nav_now);break;case 27:e&&k.callCloseHandler();break;case 37:case 38:case 39:case 40:if(e){var l,c,i,j,h,g;l=m==37||m==38;g=(m==37||m==39)?1:7;function a(){h=k.currentDateEl;var n=h.pos;c=n&15;i=n>>4;j=k.ar_days[i][c]}a();function f(){var n=new Date(k.date);n.setDate(n.getDate()-g);k.setDate(n)}function b(){var n=new Date(k.date);n.setDate(n.getDate()+g);k.setDate(n)}while(1){switch(m){case 37:if(--c>=0){j=k.ar_days[i][c]}else{c=6;m=38;continue}break;case 38:if(--i>=0){j=k.ar_days[i][c]}else{f();a()}break;case 39:if(++c<7){j=k.ar_days[i][c]}else{c=0;m=40;continue}break;case 40:if(++i<k.ar_days.length){j=k.ar_days[i][c]}else{b();a()}break}break}if(j){if(!j.disabled){Calendar.cellClick(j)}else{if(l){f()}else{b()}}}}break;case 13:if(e){Calendar.cellClick(k.currentDateEl,d)}break;default:return false}}return Calendar.stopEvent(d)};Calendar.prototype._init=function(s,t){var g=new Date(),A=g.getFullYear(),a=g.getMonth(),b=g.getDate();this.table.style.visibility="hidden";var d=t.getFullYear();if(d<this.minYear){d=this.minYear;t.setFullYear(d)}else{if(d>this.maxYear){d=this.maxYear;t.setFullYear(d)}}this.firstDayOfWeek=s;this.date=new Date(t);var w=t.getMonth();var v=t.getDate();var q=t.getMonthDays();t.setDate(1);var z=(t.getDay()-this.firstDayOfWeek)%7;if(z<0){z+=7}t.setDate(-z);t.setDate(t.getDate()+1);var o=this.tbody.firstChild;var m=Calendar._SMN[w];var p=this.ar_days=new Array();var n=Calendar._TT.WEEKEND;var l=this.multiple?(this.datesCells={}):null;for(var e=0;e<6;++e,o=o.nextSibling){var h=o.firstChild;if(this.weekNumbers){h.className=this.BodyDay+" "+this.BodyDaywn;h.innerHTML=t.getWeekNumber();h=h.nextSibling}o.className="daysrow";var y=false,c,u=p[e]=[];for(var x=0;x<7;++x,h=h.nextSibling,t.setDate(c+1)){c=t.getDate();var k=t.getDay();h.className=this.BodyDay;h.pos=e<<4|x;u[x]=h;var B=(t.getMonth()==w);if(!B){if(this.showsOtherMonths){h.className+=" "+this.BodyDayOtherMonths;h.otherMonth=true}else{h.className=this.BodyDay;h.innerHTML="&nbsp;";h.disabled=true;continue}}else{h.otherMonth=false;y=true}h.disabled=false;h.innerHTML=this.getDateText?this.getDateText(t,c):c;if(l){l[t.print("%Y%m%d")]=h}if(this.getDateStatus){var r=this.getDateStatus(t,d,w,c);if(this.getDateToolTip){var f=this.getDateToolTip(t,d,w,c);if(f){h.title=f}}if(r===true){h.className+=" "+this.CellDisabled;h.disabled=true}else{if(/disabled/i.test(r)){h.disabled=true}h.className+=" "+r}}if(!h.disabled){h.caldate=new Date(t);h.ttip="_";if(!this.multiple&&B&&c==v&&this.hiliteToday){h.className+=" "+this.CellSelected;this.currentDateEl=h}if(t.getFullYear()==A&&t.getMonth()==a&&c==b){h.className+=" "+this.CellToday;h.ttip+=Calendar._TT.PART_TODAY}if(n.indexOf(k.toString())!=-1){h.className+=h.otherMonth?" "+this.BodyDayOtherMonthWeekend:" "+this.WeekendColor}}}if(!(y||this.showsOtherMonths)){o.className=this.RowEmpty}}this.title.innerHTML=Calendar._MN[w];if(this.opts.includeDayInTitle){this.title.innerHTML+=" "+v}this.title.innerHTML+=", "+d;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var c in this.multiple){var b=this.datesCells[c];var a=this.multiple[c];if(!a){continue}if(b){b.className+=" "+this.CellSelected}}}};Calendar.prototype._toggleMultipleDate=function(b){if(this.multiple){var e=b.print("%Y%m%d");var c=this.datesCells[e];if(c){var a=this.multiple[e];if(!a){Calendar.addClass(c,this.CellSelected);this.multiple[e]=b}else{Calendar.removeClass(c,this.CellSelected);delete this.multiple[e]}}}};Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};Calendar.prototype.setDate=function(a){if(!a.equalsTo(this.date)){this._init(this.firstDayOfWeek,a)}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};Calendar.prototype.setRange=function(c,b){this.minYear=c;this.maxYear=b};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat))}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this)}this.hideShowCovered()};Calendar.prototype.destroy=function(){var a=this.element.parentNode;a.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(b){var a=this.element;a.parentNode.removeChild(a);b.appendChild(a)};Calendar._checkCalendar=function(a){var b=window._dynarch_popupCalendar;if(!b){return false}var c=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);for(;c!=null&&c!=b.element;c=c.parentNode){}if(c==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(a)}};Calendar.prototype.show=function(){var a=this.table.getElementsByTagName("tr");for(var d=a.length;d>0;){var f=a[--d];Calendar.removeClass(f,this.RowHighLight);var e=f.getElementsByTagName("td");for(var b=e.length;b>0;){var c=e[--b];Calendar.removeClass(c,this.CellHightLight);Calendar.removeClass(c,this.CellActive)}}this.element.style.display="block";this.element.style.zIndex=9;this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)}this.hideShowCovered()};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)}this.element.style.display="none";this.hidden=true;this.hideShowCovered()};Calendar.prototype.showAt=function(a,b){var c=this.element.style;c.left=a+"px";c.top=b+"px";this.show()};Calendar.prototype.showAtElement=function(d,b){var c=this;var e=Calendar.getAbsolutePos(d);if(!b||typeof b!="string"){this.showAt(e.x,e.y+d.offsetHeight);return true}function a(f){if(f.x<0){f.x=0}if(f.y<0){f.y=0}var j=document.createElement("div");var i=j.style;i.position="absolute";i.right=i.bottom=i.width=i.height="0px";document.body.appendChild(j);var g=jQuery(j).offset();document.body.removeChild(j);g.left+=jQuery(document.body).scrollLeft();var h=f.x+f.width-g.left;if(h>0){f.x-=h}g.top+=jQuery(document.body).scrollTop();h=f.y+f.height-g.top;if(h>0){f.y-=f.height-40}}this.element.style.display="block";Calendar.continuation_for_the_khtml_browser=function(){var i=c.element.offsetWidth;var g=c.element.offsetHeight;c.element.style.display="none";var j=b.substr(0,1);var f="l";if(b.length>1){f=b.substr(1,1)}switch(j){case"T":e.y-=g;break;case"B":e.y+=d.offsetHeight;break;case"C":e.y+=(d.offsetHeight-g)/2;break;case"t":e.y+=d.offsetHeight-g;break;case"b":break}switch(f){case"L":e.x-=i;break;case"R":e.x+=d.offsetWidth;break;case"C":e.x+=(d.offsetWidth-i)/2;break;case"l":e.x+=d.offsetWidth-i;break;case"r":break}e.width=i;e.height=g+40;c.monthsCombo.style.display="none";a(e);c.showAt(e.x,e.y)};if(Calendar.is_khtml){setTimeout("Calendar.continuation_for_the_khtml_browser()",10)}else{Calendar.continuation_for_the_khtml_browser()}};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};Calendar.prototype.parseDate=function(b,a){if(!a){a=this.dateFormat}this.setDate(Date.parseDate(b,a))};Calendar.prototype.hideShowCovered=function(){if(!Calendar.is_ie&&!Calendar.is_opera){return}function j(k){var i=k.style.visibility;if(!i){if(document.defaultView&&typeof(document.defaultView.getComputedStyle)=="function"){if(!Calendar.is_khtml){i=document.defaultView.getComputedStyle(k,"").getPropertyValue("visibility")}else{i=""}}else{if(k.currentStyle){i=k.currentStyle.visibility}else{i=""}}}return i}var s=new Array("applet","iframe","select");var l=this.element;var h=Calendar.getAbsolutePos(l);var c=h.x;var e=l.offsetWidth+c;var a=h.y;var f=l.offsetHeight+a;for(var q=s.length;q>0;){var b=document.getElementsByTagName(s[--q]);var g=null;for(var r=b.length;r>0;){g=b[--r];h=Calendar.getAbsolutePos(g);var o=h.x;var m=g.offsetWidth+o;var d=h.y;var n=g.offsetHeight+d;if(this.hidden||(o>e)||(m<c)||(d>f)||(n<a)){if(!g.__msh_save_visibility){g.__msh_save_visibility=j(g)}g.style.visibility=g.__msh_save_visibility}else{if(!g.__msh_save_visibility){g.__msh_save_visibility=j(g)}g.style.visibility="hidden"}}}};Calendar.prototype._displayWeekdays=function(){var c=this.firstDayOfWeek;var a=this.firstdayname;var e=Calendar._TT.WEEKEND;for(var b=0;b<7;++b){a.className=this.BodyDay+" "+this.DayCell;var d=(b+c)%7;if(b){a.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[d]);a.navtype=100;a.calendar=this;a.fdow=d;Calendar._add_evs(a)}if(e.indexOf(d.toString())!=-1){Calendar.addClass(a,this.WeekendColor)}a.innerHTML=Calendar._SDN[(b+c)%7];a=a.nextSibling}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};Calendar.prototype._dragStart=function(ev){if(this.dragging){return}this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX}var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd)}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.parseDate=function(l,n){var g=new Date();var k=0;var r=-1;var e=0;var c=l.split(/\W+/);var s=n.match(/%./g);var q=0,p=0;var h=0;var f=0;for(q=0;q<c.length;++q){if(!c[q]){continue}switch(s[q]){case"%d":case"%e":e=parseInt(c[q],10);break;case"%m":r=parseInt(c[q],10)-1;break;case"%Y":case"%y":k=parseInt(c[q],10);(k<100)&&(k+=(k>29)?1900:2000);break;case"%b":case"%B":for(p=0;p<12;++p){if(Calendar._MN[p].substr(0,c[q].length).toLowerCase()==c[q].toLowerCase()){r=p;break}}break;case"%H":case"%I":case"%k":case"%l":h=parseInt(c[q],10);break;case"%P":case"%p":if(/pm/i.test(c[q])&&h<12){h+=12}else{if(/am/i.test(c[q])&&h>=12){h-=12}}break;case"%M":f=parseInt(c[q],10);break}}if(isNaN(k)){k=g.getFullYear()}if(isNaN(r)){r=g.getMonth()}if(isNaN(e)){e=g.getDate()}if(isNaN(h)){h=g.getHours()}if(isNaN(f)){f=g.getMinutes()}if(k!=0&&r!=-1&&e!=0){return new Date(k,r,e,h,f,0)}k=0;r=-1;e=0;for(q=0;q<c.length;++q){if(c[q].search(/[a-zA-Z]+/)!=-1){var o=-1;for(p=0;p<12;++p){if(Calendar._MN[p].substr(0,c[q].length).toLowerCase()==c[q].toLowerCase()){o=p;break}}if(o!=-1){if(r!=-1){e=r+1}r=o}}else{if(parseInt(c[q],10)<=12&&r==-1){r=c[q]-1}else{if(parseInt(c[q],10)>31&&k==0){k=parseInt(c[q],10);(k<100)&&(k+=(k>29)?1900:2000)}else{if(e==0){e=c[q]}}}}}if(k==0){k=g.getFullYear()}if(r!=-1&&e!=0){return new Date(k,r,e,h,f,0)}return g};Date.prototype.getMonthDays=function(b){var a=this.getFullYear();if(typeof b=="undefined"){b=this.getMonth()}if(((0==(a%4))&&((0!=(a%100))||(0==(a%400))))&&b==1){return 29}else{return Date._MD[b]}};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var b=new Date(this.getFullYear(),0,0,0,0,0);var c=a-b;return Math.floor(c/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var b=a.getDay();a.setDate(a.getDate()-(b+6)%7+3);var c=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((c-a.valueOf())/(7*86400000))+1};Date.prototype.equalsTo=function(a){return((this.getFullYear()==a.getFullYear())&&(this.getMonth()==a.getMonth())&&(this.getDate()==a.getDate())&&(this.getHours()==a.getHours())&&(this.getMinutes()==a.getMinutes()))};Date.prototype.setDateOnly=function(b){var a=new Date(b);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};Date.prototype.print=function(l){var v=this.getMonth();var f=this.getDate();var j=this.getFullYear();var h=this.getWeekNumber();var q=this.getDay();var o={};var r=this.getHours();var e=(r>=12);var t=(e)?(r-12):r;var k=this.getDayOfYear();if(t==0){t=12}var g=this.getMinutes();var u=this.getSeconds();o["%a"]=Calendar._SDN[q];o["%A"]=Calendar._DN[q];o["%b"]=Calendar._SMN[v];o["%B"]=Calendar._MN[v];o["%C"]=1+Math.floor(j/100);o["%d"]=(f<10)?("0"+f):f;o["%e"]=f;o["%H"]=(r<10)?("0"+r):r;o["%I"]=(t<10)?("0"+t):t;o["%j"]=(k<100)?((k<10)?("00"+k):("0"+k)):k;o["%k"]=r;o["%l"]=t;o["%m"]=(v<9)?("0"+(1+v)):(1+v);o["%M"]=(g<10)?("0"+g):g;o["%n"]="\n";o["%p"]=e?"PM":"AM";o["%P"]=e?"pm":"am";o["%s"]=Math.floor(this.getTime()/1000);o["%S"]=(u<10)?("0"+u):u;o["%t"]="\t";o["%U"]=o["%W"]=o["%V"]=(h<10)?("0"+h):h;o["%u"]=q+1;o["%w"]=q;o["%y"]=(""+j).substr(2,2);o["%Y"]=j;o["%%"]="%";var p=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml){return l.replace(p,function(a){return o[a]||a})}var c=l.match(p);for(var b=0;b<c.length;b++){var n=o[c[b]];if(n){p=new RegExp(c[b],"g");l=l.replace(p,n)}}return l};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(b){var a=new Date(this);a.__msh_oldSetFullYear(b);if(a.getMonth()!=this.getMonth()){this.setDate(28)}this.__msh_oldSetFullYear(b)};window._dynarch_popupCalendar=null;Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");Calendar._DNfi=new Array("S","M","T","W","T","F","S","S");Calendar._FD=0;Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December");Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Calendar._TT={};Calendar._TT.INFO="About the calendar";Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \xab, \xbb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";jQuery.cookie=function(d,h,f){if(typeof h!="undefined"){f=f||{};if(h===null){h="";f.expires=-1}var g="";if(f.expires&&(typeof f.expires=="number"||f.expires.toUTCString)){var l;if(typeof f.expires=="number"){l=new Date();l.setTime(l.getTime()+(f.expires*24*60*60*1000))}else{l=f.expires}g="; expires="+l.toUTCString()}var b=f.path?"; path="+(f.path):"";var c=f.domain?"; domain="+(f.domain):"";var j=f.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(h),g,b,c,j].join("");if(typeof saveWidgetPref!="undefined"){saveWidgetPref(d,encodeURIComponent(h))}}else{var a=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var m=0;m<k.length;m++){var e=jQuery.trim(k[m]);if(e.substring(0,d.length+1)==(d+"=")){a=decodeURIComponent(e.substring(d.length+1));break}}}return a}};var iNettuts={jQuery:$,settings:{columns:".column",widgetSelector:".ui-widget",handleSelector:".ui-widget-header",contentSelector:".ui-widget-content",saveToCookie:"",widgetDefault:{movable:true,removable:false,collapsible:true,editable:false,printable:false,colorClasses:["color-yellow","color-red","color-blue","color-white","color-orange","color-green"]},widgetIndividual:{}},init:function(){this.sortWidgets();this.addWidgetControls();this.makeSortable()},getWidgetSettings:function(d){var b=this.jQuery,a=this.settings,c=b("#"+d+"[data-widget-settings]");if(c.length>0){a.widgetIndividual[d]=b.extend(a.widgetIndividual[d],JSON.parse(c.attr("data-widget-settings")))}return(d&&a.widgetIndividual[d])?b.extend({},a.widgetDefault,a.widgetIndividual[d]):a.widgetDefault},addWidgetControls:function(){var b=this,c=this.jQuery,a=this.settings;c(a.widgetSelector,c(a.columns)).each(function(){var e=b.getWidgetSettings(this.id);if(e.removable){c('<a href="javascript:;" title="Remove" class="remove">.</a>').mousedown(function(g){g.stopPropagation()}).click(function(){if(confirm("This widget will be removed, ok?")){c(this).parents(a.widgetSelector).animate({opacity:0},function(){c(this).wrap("<div/>").parent().slideUp(function(){c(this).remove()})})}return false}).appendTo(c(a.handleSelector,this))}if(e.editable){c('<a href="javascript:;" title="Edit Widget" class="edit">.</a>').mousedown(function(j){var k=c("h3",c(this).parent()).attr("EditAction");var g=parseInt(c("h3",c(this).parent()).attr("cbWidth"),10);var l=parseInt(c("h3",c(this).parent()).attr("cbHeight"),10);var i=c("h3",c(this).parent()).attr("title");var h="Save";if(c("h3",c(this).parent()).attr("cbsavetext")){h=c("h3",c(this).parent()).attr("cbsavetext")}parent.$.fn.colorbox({href:k,open:true,iframe:true,width:g,height:l,title:i,close:'<button id="Save">'+h+'</button><button id="Close">Cancel</button>',onClosed:false});j.stopPropagation()}).appendTo(c(a.handleSelector,this))}if(e.collapsible){c('<a href="javascript:;" title="Collapse Widget" class="collapse">.</a>').mousedown(function(g){g.stopPropagation()}).click(function(){c(this).parents(a.widgetSelector).toggleClass("collapsed");b.savePreferences();return false}).prependTo(c(a.handleSelector,this))}if(e.printable&&!isTabletDevice()){c('<a href="javascript:;" title="Print Home Page Message" class="print"><ins class="print">&nbsp;</ins></a>').mousedown(function(g){var h=document.getElementById("divHomePageMessageIframe");if(h!=null){h.contentWindow.focus();h.contentWindow.print()}g.stopPropagation()}).appendTo(c(a.handleSelector,this))}if(e.printable){c('<a href="javascript:;" title="View Expanded Current Homepage" class="expand"><ins class="expand">&nbsp;</ins></a>').mousedown(function(g){var h=document.getElementById("divHomePageMessageIframe");if(h!=null){parent.$.fn.colorbox({href:h.src,iframe:true,open:true,title:"Homepage",width:"100%",height:"100%",close:'<button id="Print">Print</button><button id="Close">Close</button>',onClosed:false});parent.$("#cboxClose").unbind("click");parent.$("#Print").click(function(){var i=document.getElementById("divHomePageMessageIframe").contentWindow;i.focus();i.print()})}g.stopPropagation()}).appendTo(c(a.handleSelector,this))}if(e.printable){var f=DefaultHomepage=="1"?"default":"selected";var d=DefaultHomepage=="1"?"selected":"default";c('<a style="width:35px;margin-left:10px;" href="javascript:;" title="View Board Homepage" class="board-hp-button boardhomepage-'+f+'"><ins class="board-hp-button boardhomepage-'+f+'">&nbsp;</ins></a>').mousedown(function(h){var j=document.getElementById("divHomePageMessageIframe");if(j!=null){var g=c("#divHomePageMessageIframe").contents().find("#divHomeMessage");var i='<div style="height:'+g.height()+'px;"> <img src="/ParagonLS/Scripts/autocompletefb/indicator.gif"/> Loading Please Wait...</div>';if(g!=null){g.html(i)}window.setTimeout("setHomepage(2)",200);if(c(".board-hp-button").hasClass("boardhomepage-default")){c(".board-hp-button").removeClass("boardhomepage-default")}if(!c(".board-hp-button").hasClass("boardhomepage-selected")){c(".board-hp-button").addClass("boardhomepage-selected")}if(!c(".mls-hp-button").hasClass("mlshomepage-default")){c(".mls-hp-button").addClass("mlshomepage-default")}if(c(".mls-hp-button").hasClass("mlshomepage-selected")){c(".mls-hp-button").removeClass("mlshomepage-selected")}}h.stopPropagation()}).appendTo(c(a.handleSelector,this));c('<a style="width:25px;" href="javascript:;" title="View MLS Homepage" class="mls-hp-button mlshomepage-'+d+'"><ins class="mls-hp-button mlshomepage-'+d+'">&nbsp;</ins></a>').mousedown(function(h){var j=document.getElementById("divHomePageMessageIframe");if(j!=null){var g=c("#divHomePageMessageIframe").contents().find("#divHomeMessage");var i='<div style="height:'+g.height()+'px;"> <img src="/ParagonLS/Scripts/autocompletefb/indicator.gif"/> Loading Please Wait...</div>';if(g!=null){g.html(i)}window.setTimeout("setHomepage(1)",200);if(c(".mls-hp-button").hasClass("mlshomepage-default")){c(".mls-hp-button").removeClass("mlshomepage-default")}if(!c(".mls-hp-button").hasClass("mlshomepage-selected")){c(".mls-hp-button").addClass("mlshomepage-selected")}if(!c(".board-hp-button").hasClass("boardhomepage-default")){c(".board-hp-button").addClass("boardhomepage-default")}if(c(".board-hp-button").hasClass("boardhomepage-selected")){c(".board-hp-button").removeClass("boardhomepage-selected")}}h.stopPropagation()}).appendTo(c(a.handleSelector,this))}});c(".edit-box").each(function(){c("input",this).keyup(function(){c(this).parents(a.widgetSelector).find("h3").text(c(this).val().length>20?c(this).val().substr(0,20)+"...":c(this).val());b.savePreferences()});c("ul.colors li",this).click(function(){var d=/\bcolor-[\w]{1,}\b/,e=c(this).parents(a.widgetSelector).attr("class").match(d);if(e){c(this).parents(a.widgetSelector).removeClass(e[0]).addClass(c(this).attr("class").match(d)[0]);b.savePreferences()}return false})})},makeSortable:function(){var b=this,d=this.jQuery,a=this.settings,c=(function(){var e="";d(a.widgetSelector,d(a.columns)).each(function(f){if(!b.getWidgetSettings(this.id).movable){if(!this.id){this.id="widget-no-id-"+f}e+="#"+this.id+","}});if(e===""){return d("> li",a.columns)}e=e.substring(0,e.length-1);return d("> li:not("+e+")",a.columns)})();c.find(a.handleSelector).css({cursor:"move"}).mousedown(function(f){c.css({width:""});d(this).parent().css({width:d(this).parent().width()+"px"})}).mouseup(function(){if(!d(this).parent().hasClass("dragging")){d(this).parent().css({width:""})}else{d(a.columns).sortable("disable")}});d(a.columns).sortable({items:c,connectWith:d(".columnsort"),handle:a.handleSelector,placeholder:"widget-placeholder",forcePlaceholderSize:true,revert:300,delay:100,opacity:0.8,containment:"document",start:function(f,g){d(g.helper).addClass("dragging")},stop:function(f,g){d(g.item).css({width:""}).removeClass("dragging");d(a.columns).sortable("enable");b.savePreferences()}})},savePreferences:function(){var f=this,b=this.jQuery,c=this.settings,a="";if(!c.saveToCookie){return}b(c.columns).each(function(g){a+=(g===0)?"":"|";b(c.widgetSelector,this).each(function(h){if(b(this).prop("id").length>0){a+=(h===0)?"":";";a+=b(this).prop("id")+",";a+=b(this).prop("class").match(/\bcolor-[\w]{1,}\b/)+",";a+=b("h3:eq(0)",this).text().replace(/\|/g,"[-PIPE-]").replace(/,/g,"[-COMMA-]")+",";a+=b(c.contentSelector,this).css("display")==="none"?"collapsed":"not-collapsed"}})});tCookie=a.split("|");var d=0;var e=0;for(d=0;d<=2;d++){if(tCookie[d].length==0){e++;alert("Each column must contain at least one report category!");window.location=window.location.href;return}}b.cookie(c.saveToCookie,a,{expires:10,path:widgetPrefPath})},sortWidgets:function(){var b=this,d=this.jQuery,a=this.settings;var c=d.cookie(a.saveToCookie);if(!a.saveToCookie||!c){d("body").css({background:"#f2f5f7"});d(a.columns).css({visibility:"visible"});return}d(a.columns).each(function(e){var g=d(this),f=c.split("|")[e].split(";");d(f).each(function(){if(!this.length){return}var j=this.split(","),k=d("#"+j[0]);if(d(k).length==0){return}var i=/\bcolor-[\w]{1,}\b/,h=d(k).attr("class").match(i);if(h){d(k).removeClass(h[0]).addClass(j[1])}if(j[3]==="collapsed"){d(k).addClass("collapsed")}d("#"+j[0]).remove();d(g).append(k)})});d("body").css({background:"#f2f5f7"});d(a.columns).css({visibility:"visible"})}};(function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(v){return $.type(v)==="string"},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn)){for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{if(isStr(fn)){fn=eval(fn)}if($.isFunction(fn)){g(fn)(Instance)}}catch(ex){}}}function g(f){return f}};$.layout={version:"1.3.rc30.74",revision:0.033007,browser:{mozilla:!!$.browser.mozilla,webkit:!!$.browser.webkit||!!$.browser.safari,msie:!!$.browser.msie,isIE6:$.browser.msie&&$.browser.version==6,boxModel:$.support.boxModel!==false||!$.browser.msie,version:$.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(el){var $el=$(el),layout=$el.data("layout")||$el.data("parentLayout");if(layout){var $cont=layout.container;if($cont.data("layoutPane")){return $cont}var $pane=$cont.closest("."+$.layout.defaults.panes.paneClass);if($pane.data("layoutPane")){return $pane}}return null},getParentPaneInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("layoutPane"):null},getParentLayoutInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("parentLayout"):null},getEventObject:function(evt){return typeof evt==="object"&&evt.stopPropagation?evt:null},parsePaneName:function(evt_or_pane){var evt=$.layout.getEventObject(evt_or_pane);if(evt){evt.stopPropagation();return $(this).data("layoutEdge")}else{return evt_or_pane}},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||($.effects.effect&&$.effects.effect.slide))}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(dim){var $c=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body");var d={width:$c.css("width")-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/)?d[dim]:d},showInvisibly:function($E,force){if($E&&$E.length&&(force||$E.css("display")==="none")){var s=$E[0].style,CSS={display:s.display||"",visibility:s.visibility||""};$E.css({display:"block",visibility:"hidden"});return CSS}return{}},getElementDimensions:function($E,inset){var d={css:{},inset:{}},x=d.css,i={bottom:0},N=$.layout.cssNum,off=$E.offset(),b,p,ei;d.offsetLeft=off.left;d.offsetTop=off.top;if(!inset){inset={}}$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);ei=e.toLowerCase();d.inset[ei]=inset[ei]>=0?inset[ei]:p;i[ei]=d.inset[ei]+b});x.width=$E.css("width");x.height=$E.height();x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);d.outerWidth=$E.outerWidth();d.outerHeight=$E.outerHeight();d.innerWidth=max(0,d.outerWidth-i.left-i.right);d.innerHeight=max(0,d.outerHeight-i.top-i.bottom);d.layoutWidth=$E.innerWidth();d.layoutHeight=$E.innerHeight();return d},getElementStyles:function($E,list){var CSS={},style=$E[0].style,props=list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];if(p.match(/(border|padding|margin)$/)){for(j=0;j<4;j++){s=sides[j];if(p==="border"){for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a]}}else{CSS[p+s]=style[p+s]}}}else{CSS[p]=style[p]}}return CSS},cssWidth:function($E,outerWidth){if(outerWidth<=0){return 0}if(!$.layout.browser.boxModel){return outerWidth}var b=$.layout.borderWidth,n=$.layout.cssNum,W=outerWidth-b($E,"Left")-b($E,"Right")-n($E,"paddingLeft")-n($E,"paddingRight");return max(0,W)},cssHeight:function($E,outerHeight){if(outerHeight<=0){return 0}if(!$.layout.browser.boxModel){return outerHeight}var b=$.layout.borderWidth,n=$.layout.cssNum,H=outerHeight-b($E,"Top")-b($E,"Bottom")-n($E,"paddingTop")-n($E,"paddingBottom");return max(0,H)},cssNum:function($E,prop,allowAuto){if(!$E.jquery){$E=$($E)}var CSS=$.layout.showInvisibly($E),p=$.css($E[0],prop,true),v=allowAuto&&p=="auto"?p:Math.round(parseFloat(p)||0);$E.css(CSS);return v},borderWidth:function(el,side){if(el.jquery){el=el[0]}var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);return $.css(el,b+"Style",true)==="none"?0:Math.round(parseFloat($.css(el,b+"Width",true))||0)},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return($.layout.browser.msie&&x<0&&y<0)||((x>=L&&x<=R)&&(y>=T&&y<=B))},msg:function(info,popup,debugTitle,debugOpts){if($.isPlainObject(info)&&window.debugData){if(typeof popup==="string"){debugOpts=debugTitle;debugTitle=popup}else{if(typeof debugTitle==="object"){debugOpts=debugTitle;debugTitle=null}}var t=debugTitle||"log( <object> )",o=$.extend({sort:false,returnHTML:false,display:false},debugOpts);if(popup===true||o.display){debugData(info,t,o)}else{if(window.console){console.log(debugData(info,t,o))}}}else{if(popup){alert(info)}else{if(window.console){console.log(info)}else{var id="#layoutLogger",$l=$(id);if(!$l.length){$l=createLog()}$l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+info.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}}function createLog(){var pos=$.support.fixedPosition?"fixed":"absolute",$e=$('<div id="layoutLogger" style="position: '+pos+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");$e.css("left",$(window).width()-$e.outerWidth()-5);if($.ui.draggable){$e.draggable({handle:":first-child"})}return $e}}};$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:false,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:true,showErrorMessages:true,showDebugMessages:false,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1000,resizer_drag:10000},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button \n\nInvalid ",containerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\n\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskContents:false,maskObjects:false,maskZindex:null,resizingGrid:false,livePaneResizing:false,liveContentResizing:false,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:false,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,animatePaneSizing:false,children:null,containerSelector:"",initChildren:true,destroyChildren:true,resizeChildren:true,triggerEventsOnLoad:false,triggerEventsDuringLiveResize:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};$.layout.optionsMap={layout:("name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onunload").split(","),center:("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(","),noDefault:("paneSelector,resizerCursor,customHotkey").split(",")};$.layout.transformData=function(hash,addKeys){var json=addKeys?{panes:{},center:{}}:{},branch,optKey,keys,key,val,i,c;if(typeof hash!=="object"){return json}for(optKey in hash){branch=json;val=hash[optKey];keys=optKey.split("__");c=keys.length-1;for(i=0;i<=c;i++){key=keys[i];if(i===c){if($.isPlainObject(val)){branch[key]=$.layout.transformData(val)}else{branch[key]=val}}else{if(!branch[key]){branch[key]={}}branch=branch[key]}}}return json};$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(opts){var map=$.layout.backwardCompatibility.map,oldData,newData,value;for(var itemPath in map){oldData=getBranch(itemPath);value=oldData.branch[oldData.key];if(value!==undefined){newData=getBranch(map[itemPath],true);newData.branch[newData.key]=value;delete oldData.branch[oldData.key]}}function getBranch(path,create){var a=path.split("."),c=a.length-1,D={branch:opts,key:a[c]},i=0,k,undef;for(;i<c;i++){k=a[i];if(D.branch[k]==undefined){if(create){D.branch=D.branch[k]={}}else{D.branch={}}}else{D.branch=D.branch[k]}}return D}},renameAllOptions:function(opts){var ren=$.layout.backwardCompatibility.renameOptions;ren(opts);if(opts.defaults){if(typeof opts.panes!=="object"){opts.panes={}}$.extend(true,opts.panes,opts.defaults);delete opts.defaults}if(opts.panes){ren(opts.panes)}$.each($.layout.config.allPanes,function(i,pane){if(opts[pane]){ren(opts[pane])}});return opts}};$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(true,{},$.layout.defaults),effects=options.effects=$.extend(true,{},$.layout.effects),state={id:"layout"+$.now(),initialized:false,paneResizing:false,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=setTimeout(fn,ms)},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s]}}},_log=function(msg,popup,debug){var o=options;if((o.showErrorMessages&&!debug)||(debug&&o.showDebugMessages)){$.layout.msg(o.name+" / "+msg,(popup!==false))}return false},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(!hasPane&&$.type(pane)==="boolean"){skipBoundEvents=pane;pane=""}if(fn){try{if(isStr(fn)){if(fn.match(/,/)){args=fn.split(","),fn=eval(args[0])}else{fn=eval(fn)}}if($.isFunction(fn)){if(args.length){retVal=g(fn)(args[1])}else{if(hasPane){retVal=g(fn)(pane,$Ps[pane],s,o,lName)}else{retVal=g(fn)(Instance,s,o,lName)}}}}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),false);if($.type(ex)==="string"&&string.length){_log("Exception:  "+ex,false)}}}if(!skipBoundEvents&&retVal!==false){if(hasPane){$P=$Ps[pane];o=options[pane];s=state[pane];$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]);if(shrt){$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])}}else{$N.triggerHandler("layout"+lng,[Instance,s,o,lName]);if(shrt){$N.triggerHandler("layout"+shrt,[Instance,s,o,lName])}}}if(hasPane&&evtName==="onresize_end"){resizeChildren(pane+"",true)}return retVal;function g(f){return f}},_fixIframe=function(pane){if(browser.mozilla){return}var $P=$Ps[pane];if(state[pane].tagName==="IFRAME"){$P.css(_c.hidden).css(_c.visible)}else{$P.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(pane,outerSize){var fn=_c[pane].dir=="horz"?cssH:cssW;return fn($Ps[pane],outerSize)},cssMinDims=function(pane){var $P=$Ps[pane],dir=_c[pane].dir,d={minWidth:1001-cssW($P,1000),minHeight:1001-cssH($P,1000)};if(dir==="horz"){d.minSize=d.minHeight}if(dir==="vert"){d.minSize=d.minWidth}return d},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el)){$E=$Ps[el]}else{if(!el.jquery){$E=$(el)}}w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&$E.data("autoHidden")&&$E.innerHeight()>0){$E.show().data("autoHidden",false);if(!browser.mozilla){$E.css(_c.hidden).css(_c.visible)}}}else{if(autoHide&&!$E.data("autoHidden")){$E.hide().data("autoHidden",true)}}},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el)){$E=$Ps[el]}else{if(!el.jquery){$E=$(el)}}h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!browser.mozilla){$E.css(_c.hidden).css(_c.visible)}}}else{if(autoHide&&!$E.data("autoHidden")){$E.hide().data("autoHidden",true)}}},_parseSize=function(pane,size,dir){if(!dir){dir=_c[pane].dir}if(isStr(size)&&size.match(/%/)){size=(size==="100%")?-1:parseInt(size,10)/100}if(size===0){return 0}else{if(size>=1){return parseInt(size,10)}}var o=options,avail=0;if(dir=="horz"){avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?o.south.spacing_open:0)}else{if(dir=="vert"){avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0)}}if(size===-1){return avail}else{if(size>0){return round(avail*size)}else{if(pane=="center"){return 0}else{var dim=(dir==="horz"?"height":"width"),$P=$Ps[pane],$C=dim==="height"?$Cs[pane]:false,vis=$.layout.showInvisibly($P),szP=$P.css(dim),szC=$C?$C.css(dim):0;$P.css(dim,"auto");if($C){$C.css(dim,"auto")}size=(dim==="height")?$P.outerHeight():$P.outerWidth();$P.css(dim,szP).css(vis);if($C){$C.css(dim,szC)}return size}}}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(_c[pane].dir==="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}},setSizeLimits=function(pane,slide){if(!isInitialized()){return}var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,type=c.sizeType.toLowerCase(),isSliding=(slide!=undefined?slide:s.isSliding),$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.oppositeEdge[pane],altS=state[altPane],$altP=$Ps[altPane],altPaneSize=(!$altP||altS.isVisible===false||altS.isSliding?0:(dir=="horz"?$altP.outerHeight():$altP.outerWidth())),altPaneSpacing=((!$altP||altS.isHidden?0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0),containerSize=(dir=="horz"?sC.innerHeight:sC.innerWidth),minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=(containerSize-paneSpacing-(isSliding?0:(_parseSize("center",minCenterSize,dir)+altPaneSize+altPaneSpacing))),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=min((o.maxSize?_parseSize(pane,o.maxSize):100000),limitSize),r=s.resizerPosition={},top=sC.inset.top,left=sC.inset.left,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case"north":r.min=top+minSize;r.max=top+maxSize;break;case"west":r.min=left+minSize;r.max=left+maxSize;break;case"south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case"east":r.min=left+W-maxSize-rW;r.max=left+W-minSize-rW;break}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.inset.top;d.bottom+=sC.inset.bottom;d.left+=sC.inset.left;d.right+=sC.inset.right;return d},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),o=options[pane],root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state===_closed?_open:_closed,classes=(root+_hover)+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates){classes+=(root+_alt+_hover)+(root+_pane+_alt+_hover)}if(type=="resizer"&&$El.hasClass(root+_slide)){classes+=(root+_slide+_hover)+(root+_pane+_slide+_hover)}return $.trim(classes)},addHover=function(evt,el){var $E=$(el||this);if(evt&&$E.data("layoutRole")==="toggler"){evt.stopPropagation()}$E.addClass(getHoverClasses($E))},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true))},onResizerEnter=function(evt){var pane=$(this).data("layoutEdge"),s=state[pane];if(s.isClosed||s.isResizing||state.paneResizing){return}if($.fn.disableSelection){$("body").disableSelection()}if(options.maskPanesEarly){showMasks(pane,{resizing:true})}},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave";timer.clear(pane+"_openSlider");timer.clear(name);if(!el){timer.set(name,function(){onResizerLeave(evt,e)},200)}else{if(!state.paneResizing){if($.fn.enableSelection){$("body").enableSelection()}if(options.maskPanesEarly){hideMasks()}}}},_create=function(){initOptions();var o=options,s=state;s.creatingLayout=true;runPluginCallbacks(Instance,$.layout.onCreate);if(false===_runCallbacks("onload_start")){return"cancel"}_initContainer();initHotkeys();$(window).bind("unload."+sID,unload);runPluginCallbacks(Instance,$.layout.onLoad);if(o.initPanes){_initLayoutElements()}delete s.creatingLayout;return state.initialized},isInitialized=function(){if(state.initialized||state.creatingLayout){return true}else{return _initLayoutElements()}},_initLayoutElements=function(retry){var o=options;if(!$N.is(":visible")){if(!retry&&browser.webkit&&$N[0].tagName==="BODY"){setTimeout(function(){_initLayoutElements(true)},50)}return false}if(!getPane("center").length){return _log(o.errors.centerPaneMissing)}state.creatingLayout=true;$.extend(sC,elDims($N,o.inset));initPanes();if(o.scrollToBookmarkOnLoad){var l=self.location;if(l.hash){l.replace(l.hash)}}if(Instance.hasParentLayout){o.resizeWithWindow=false}else{if(o.resizeWithWindow){$(window).bind("resize."+sID,windowResize)}}delete state.creatingLayout;state.initialized=true;runPluginCallbacks(Instance,$.layout.onReady);_runCallbacks("onload_end");return true},createChildren=function(evt_or_pane,opts){var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane];if(!$P){return}var $C=$Cs[pane],s=state[pane],o=options[pane],sm=options.stateManagement||{},cos=opts?(o.children=opts):o.children;if($.isPlainObject(cos)){cos=[cos]}else{if(!cos||!$.isArray(cos)){return}}$.each(cos,function(idx,co){if(!$.isPlainObject(co)){return}var $containers=co.containerSelector?$P.find(co.containerSelector):($C||$P);$containers.each(function(){var $cont=$(this),child=$cont.data("layout");if(!child){setInstanceKey({container:$cont,options:co},s);if(sm.includeChildren&&state.stateData[pane]){var paneChildren=state.stateData[pane].children||{},childState=paneChildren[co.instanceKey],co_sm=co.stateManagement||(co.stateManagement={autoLoad:true});if(co_sm.autoLoad===true&&childState){co_sm.autoSave=false;co_sm.includeChildren=true;co_sm.autoLoad=$.extend(true,{},childState)}}child=$cont.layout(co);if(child){refreshChildren(pane,child)}}})})},setInstanceKey=function(child,parentPaneState){var $c=child.container,o=child.options,sm=o.stateManagement,key=o.instanceKey||$c.data("layoutInstanceKey");if(!key){key=(sm&&sm.cookie?sm.cookie.name:"")||o.name}if(!key){key="layout"+(++parentPaneState.childIdx)}else{key=key.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_")}o.instanceKey=key;$c.data("layoutInstanceKey",key);return key},refreshChildren=function(pane,newChild){var $P=$Ps[pane],pC=children[pane],s=state[pane],o;if($.isPlainObject(pC)){$.each(pC,function(key,child){if(child.destroyed){delete pC[key]}});if($.isEmptyObject(pC)){pC=children[pane]=null}}if(!newChild&&!pC){newChild=$P.data("layout")}if(newChild){newChild.hasParentLayout=true;o=newChild.options;setInstanceKey(newChild,s);if(!pC){pC=children[pane]={}}pC[o.instanceKey]=newChild.container.data("layout")}Instance[pane].children=children[pane];if(!newChild){createChildren(pane)}},windowResize=function(){var o=options,delay=Number(o.resizeWithWindowDelay);if(delay<10){delay=100}timer.clear("winResize");timer.set("winResize",function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N,o.inset);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight){resizeAll()}},delay);if(!timer.data.winResizeRepeater){setWindowResizeRepeater()}},setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0){timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll()},delay)}},unload=function(){var o=options;_runCallbacks("onunload_start");runPluginCallbacks(Instance,$.layout.onUnload);_runCallbacks("onunload_end")},_initContainer=function(){var N=$N[0],$H=$("html"),tag=sC.tagName=N.tagName,id=sC.id=N.id,cls=sC.className=N.className,o=options,name=o.name,props="position,margin,padding,border",css="layoutCSS",CSS={},hid="hidden",parent=$N.data("parentLayout"),pane=$N.data("layoutEdge"),isChild=parent&&pane,num=$.layout.cssNum,$parent,n;sC.selector=$N.selector.split(".slice")[0];sC.ref=(o.name?o.name+" layout / ":"")+tag+(id?"#"+id:cls?".["+cls+"]":"");sC.isBody=(tag==="BODY");if(!isChild&&!sC.isBody){$parent=$N.closest("."+$.layout.defaults.panes.paneClass);parent=$parent.data("parentLayout");pane=$parent.data("layoutEdge");isChild=parent&&pane}$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);var layoutMethods={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(name in layoutMethods){$N.bind("layout"+name.toLowerCase()+"."+sID,Instance[layoutMethods[name]||name])}if(isChild){Instance.hasParentLayout=true;parent.refreshChildren(pane,Instance)}if(!$N.data(css)){if(sC.isBody){$N.data(css,$.extend(styles($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")}));$H.data(css,$.extend(styles($H,"padding"),{height:"auto",overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")}))}else{$N.data(css,styles($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY"))}}try{CSS={overflow:hid,overflowX:hid,overflowY:hid};$N.css(CSS);if(o.inset&&!$.isPlainObject(o.inset)){n=parseInt(o.inset,10)||0;o.inset={top:n,bottom:n,left:n,right:n}}if(sC.isBody){if(!o.outset){o.outset={top:num($H,"paddingTop"),bottom:num($H,"paddingBottom"),left:num($H,"paddingLeft"),right:num($H,"paddingRight")}}else{if(!$.isPlainObject(o.outset)){n=parseInt(o.outset,10)||0;o.outset={top:n,bottom:n,left:n,right:n}}}$H.css(CSS).css({height:"100%",border:"none",padding:0,margin:0});if(browser.isIE6){$N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"});if(!o.inset){o.inset=elDims($N).inset}}else{$N.css({width:"auto",height:"auto",margin:0,position:"absolute"});$N.css(o.outset)}$.extend(sC,elDims($N,o.inset))}else{var p=$N.css("position");if(!p||!p.match(/(fixed|absolute|relative)/)){$N.css("position","relative")}if($N.is(":visible")){$.extend(sC,elDims($N,o.inset));if(sC.innerHeight<1){_log(o.errors.noContainerHeight.replace(/CONTAINER/,sC.ref))}}}if(num($N,"minWidth")){$N.parent().css("overflowX","auto")}if(num($N,"minHeight")){$N.parent().css("overflowY","auto")}}catch(ex){}},initHotkeys=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false}})},initOptions=function(){var data,d,pane,key,val,i,c,o;opts=$.layout.transformData(opts,true);opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){data=$.layout.optionsMap.noDefault;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}data=$.layout.optionsMap.layout;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}}data=$.layout.optionsMap.layout;var rootKeys=$.layout.config.optionRootKeys;for(key in opts){val=opts[key];if($.inArray(key,rootKeys)<0&&$.inArray(key,data)<0){if(!opts.panes[key]){opts.panes[key]=$.isPlainObject(val)?$.extend(true,{},val):val}delete opts[key]}}$.extend(true,options,opts);$.each(_c.allPanes,function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);d=options.panes;o=options[pane];if(pane==="center"){data=$.layout.optionsMap.center;for(i=0,c=data.length;i<c;i++){key=data[i];if(!opts.center[key]&&(opts.panes[key]||!o[key])){o[key]=d[key]}}}else{o=options[pane]=$.extend(true,{},d,o);createFxOptions(pane);if(!o.resizerClass){o.resizerClass="ui-layout-resizer"}if(!o.togglerClass){o.togglerClass="ui-layout-toggler"}}if(!o.paneClass){o.paneClass="ui-layout-pane"}});var zo=opts.zIndex,z=options.zIndexes;if(zo>0){z.pane_normal=zo;z.content_mask=max(zo+1,z.content_mask);z.resizer_normal=max(zo+2,z.resizer_normal)}delete options.panes;function createFxOptions(pane){var o=options[pane],d=options.panes;if(!o.fxSettings){o.fxSettings={}}if(!d.fxSettings){d.fxSettings={}}$.each(["_open","_close","_size"],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n,fxName=o[sName]=o[sName]||d[sName]||o.fxName||d.fxName||"none",fxExists=$.effects&&($.effects[fxName]||($.effects.effect&&$.effects.effect[fxName]));if(fxName==="none"||!options.effects[fxName]||!fxExists){fxName=o[sName]="none"}var fx=options.effects[fxName]||{},fx_all=fx.all||null,fx_pane=fx[pane]||null;o[sSpeed]=o[sSpeed]||d[sSpeed]||o.fxSpeed||d.fxSpeed||null;o[sSettings]=$.extend(true,{},fx_all,fx_pane,d.fxSettings,o.fxSettings,d[sSettings],o[sSettings])});delete o.fxName;delete o.fxSpeed;delete o.fxSettings}},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#"){return $N.find(sel).eq(0)}else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0)}},initPanes=function(evt){evtPane(evt);$.each(_c.allPanes,function(idx,pane){addPane(pane,true)});initHandles();$.each(_c.borderPanes,function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane)}});sizeMidPanes("center");$.each(_c.allPanes,function(idx,pane){afterInitPane(pane)})},addPane=function(pane,force){if(!force&&!isInitialized()){return}var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,fx=s.fx,spacing=o.spacing_open||0,isCenter=(pane==="center"),CSS={},$P=$Ps[pane],size,minSize,maxSize,child;if($P){removePane(pane,false,true,false)}else{$Cs[pane]=false}$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";$P.data("layoutCSS",styles($P,props))}Instance[pane]={name:pane,pane:$Ps[pane],content:$Cs[pane],options:options[pane],state:state[pane],children:children[pane]};$P.data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"pane"}).css(c.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var paneMethods={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},name;for(name in paneMethods){$P.bind("layoutpane"+name.toLowerCase()+"."+sID,Instance[paneMethods[name]||name])}initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||100000;if(size>0){size=max(min(size,maxSize),minSize)}s.autoResize=o.autoResize;s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;if(!s.pins){s.pins=[]}}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;setPanePosition(pane);if(dir==="horz"){CSS.height=cssH($P,size)}else{if(dir==="vert"){CSS.width=cssW($P,size)}}$P.css(CSS);if(dir!="horz"){sizeMidPanes(pane,true)}if(state.initialized){initHandles(pane);initHotkeys(pane)}if(o.initClosed&&o.closable&&!o.initHidden){close(pane,true,true)}else{if(o.initHidden||o.initClosed){hide(pane)}else{if(!s.noRoom){$P.css("display","block")}}}$P.css("visibility","visible");if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(state.initialized){afterInitPane(pane)}},afterInitPane=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane];if(!$P){return}if($P.data("layout")){refreshChildren(pane,$P.data("layout"))}if(s.isVisible){if(state.initialized){resizeAll()}else{sizeContent(pane)}if(o.triggerEventsOnLoad){_runCallbacks("onresize_end",pane)}else{resizeChildren(pane,true)}}if(o.initChildren&&o.children){createChildren(pane)}},setPanePosition=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane],$R=$Rs[pane],o=options[pane],s=state[pane],side=_c[pane].side,CSS={};if(!$P){return}switch(pane){case"north":CSS.top=sC.inset.top;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case"south":CSS.bottom=sC.inset.bottom;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case"west":CSS.left=sC.inset.left;break;case"east":CSS.right=sC.inset.right;break;case"center":}$P.css(CSS);if($R&&s.isClosed){$R.css(side,sC.inset[side])}else{if($R&&!s.isHidden){$R.css(side,sC.inset[side]+getPaneSize(pane))}}})},initHandles=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P){return}var o=options[pane],s=state[pane],c=_c[pane],paneId=o.paneSelector.substr(0,1)==="#"?o.paneSelector.substr(1):"",rClass=o.resizerClass,tClass=o.togglerClass,spacing=(s.isVisible?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(s.isVisible?"-open":"-closed"),I=Instance[pane],$R=I.resizer=$Rs[pane]=$("<div></div>"),$T=I.toggler=(o.closable?$Ts[pane]=$("<div></div>"):false);if(!s.isVisible&&o.slidable){$R.attr("title",o.tips.Slide).css("cursor",o.sliderCursor)}$R.attr("id",paneId?paneId+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(o.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N);if(o.resizerDblClickToggle){$R.bind("dblclick."+sID,toggle)}if($T){$T.attr("id",paneId?paneId+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-open").css("display","none").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo($T)}enableClosable(pane)}initResizable(pane);if(s.isVisible){setAsOpen(pane)}else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}});sizeHandles()},initContent=function(pane,resize){if(!isInitialized()){return}var o=options[pane],sel=o.contentSelector,I=Instance[pane],$P=$Ps[pane],$C;if(sel){$C=I.content=$Cs[pane]=(o.findNestedContent)?$P.find(sel).eq(0):$P.children(sel).eq(0)}if($C&&$C.length){$C.data("layoutRole","content");if(!$C.data("layoutCSS")){$C.data("layoutCSS",styles($C,"height"))}$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);$P.css(_c.content.cssDemoPane)}if($P.css("overflowX").match(/(scroll|auto)/)){$P.css("overflow","hidden")}state[pane].content={};if(resize!==false){sizeContent(pane)}}else{I.content=$Cs[pane]=false}},initResizable=function(panes){var draggingAvailable=$.layout.plugins.draggable,side;panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(idx,pane){var o=options[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var s=state[pane],z=options.zIndexes,c=_c[pane],side=c.dir=="horz"?"top":"left",$P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,lastPos=0,r,live,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed){$R.attr("title",o.tips.Resize).css("cursor",o.resizerCursor)}$R.draggable({containment:$N[0],axis:(c.dir=="horz"?"y":"x"),delay:0,distance:1,grid:o.resizingGrid,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:z.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.livePaneResizing;if(false===_runCallbacks("ondrag_start",pane)){return false}s.isResizing=true;state.paneResizing=pane;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;lastPos=ui.position[side];$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;$("body").disableSelection();showMasks(pane,{resizing:true})},drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding){$Ps[pane].css("zIndex",z.pane_sliding)}}var limit=0;if(ui.position[side]<r.min){ui.position[side]=r.min;limit=-1}else{if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1}}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=(limit>0&&pane.match(/(north|west)/))||(limit<0&&pane.match(/(south|east)/))?o.tips.maxSizeWarning:o.tips.minSizeWarning}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=""}if(live&&Math.abs(ui.position[side]-lastPos)>=o.liveResizingTolerance){lastPos=ui.position[side];resizePanes(e,ui,pane)}},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+" "+resizerPaneClass);s.isResizing=false;state.paneResizing=false;resizePanes(e,ui,pane,true)}})});var resizePanes=function(evt,ui,pane,resizingDone){var dragPos=ui.position,c=_c[pane],o=options[pane],s=state[pane],resizerPos;switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=sC.layoutHeight-dragPos.top-o.spacing_open;break;case"east":resizerPos=sC.layoutWidth-dragPos.left-o.spacing_open;break}var newSize=resizerPos-sC.inset[c.side];if(!resizingDone){if(Math.abs(newSize-s.size)<o.liveResizingTolerance){return}manualSizePane(pane,newSize,false,true);sizeMasks()}else{if(false!==_runCallbacks("ondrag_end",pane)){manualSizePane(pane,newSize,false,true)}hideMasks(true);if(s.isSliding){showMasks(pane,{resizing:true})}}}},sizeMask=function(){var $M=$(this),pane=$M.data("layoutMask"),s=state[pane];if(s.tagName=="IFRAME"&&s.isVisible){$M.css({top:s.offsetTop,left:s.offsetLeft,width:s.outerWidth,height:s.outerHeight})}},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(pane,args){var c=_c[pane],panes=["center"],z=options.zIndexes,a=$.extend({objectsOnly:false,animation:false,resizing:true,sliding:state[pane].isSliding},args),o,s;if(a.resizing){panes.push(pane)}if(a.sliding){panes.push(_c.oppositeEdge[pane])}if(c.dir==="horz"){panes.push("west");panes.push("east")}$.each(panes,function(i,p){s=state[p];o=options[p];if(s.isVisible&&(o.maskObjects||(!a.objectsOnly&&o.maskContents))){getMasks(p).each(function(){sizeMask.call(this);this.style.zIndex=s.isSliding?z.pane_sliding+1:z.pane_normal+1;this.style.display="block"})}})},hideMasks=function(force){if(force||!state.paneResizing){$Ms.hide()}else{if(!force&&!$.isEmptyObject(state.panesSliding)){var i=$Ms.length-1,p,$M;for(;i>=0;i--){$M=$Ms.eq(i);p=$M.data("layoutMask");if(!options[p].maskObjects){$M.hide()}}}}},getMasks=function(pane){var $Masks=$([]),$M,i=0,c=$Ms.length;for(;i<c;i++){$M=$Ms.eq(i);if($M.data("layoutMask")===pane){$Masks=$Masks.add($M)}}if($Masks.length){return $Masks}else{return createMasks(pane)}},createMasks=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes,$Masks=$([]),isIframe,el,$M,css,i;if(!o.maskContents&&!o.maskObjects){return $Masks}for(i=0;i<(o.maskObjects?2:1);i++){isIframe=o.maskObjects&&i==0;el=document.createElement(isIframe?"iframe":"div");$M=$(el).data("layoutMask",pane);el.className="ui-layout-mask ui-layout-mask-"+pane;css=el.style;css.display="block";css.position="absolute";css.background="#FFF";if(isIframe){el.frameborder=0;el.src="about:blank";css.opacity=0;css.filter="Alpha(Opacity='0')";css.border=0}if(s.tagName=="IFRAME"){css.zIndex=z.pane_normal+1;$N.append(el)}else{$M.addClass("ui-layout-mask-inside-pane");css.zIndex=o.maskZindex||z.content_mask;css.top=0;css.left=0;css.width="100%";css.height="100%";$P.append(el)}$Masks=$Masks.add(el);$Ms=$Ms.add(el)}return $Masks},destroy=function(evt_or_destroyChildren,destroyChildren){$(window).unbind("."+sID);$(document).unbind("."+sID);if(typeof evt_or_destroyChildren==="object"){evtPane(evt_or_destroyChildren)}else{destroyChildren=evt_or_destroyChildren}$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID);$Ms.remove();$.each(_c.allPanes,function(i,pane){removePane(pane,false,true,destroyChildren)});var css="layoutCSS";if($N.data(css)&&!$N.data("layoutRole")){$N.css($N.data(css)).removeData(css)}if(sC.tagName==="BODY"&&($N=$("html")).data(css)){$N.css($N.data(css)).removeData(css)}runPluginCallbacks(Instance,$.layout.onDestroy);unload();for(var n in Instance){if(!n.match(/^(container|options)$/)){delete Instance[n]}}Instance.destroyed=true;return Instance},removePane=function(evt_or_pane,remove,skipResize,destroyChild){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane];if($P&&$.isEmptyObject($P.data())){$P=false}if($C&&$.isEmptyObject($C.data())){$C=false}if($R&&$.isEmptyObject($R.data())){$R=false}if($T&&$.isEmptyObject($T.data())){$T=false}if($P){$P.stop(true,true)}var o=options[pane],s=state[pane],d="layout",css="layoutCSS",pC=children[pane],hasChildren=$.isPlainObject(pC)&&!$.isEmptyObject(pC),destroy=destroyChild!==undefined?destroyChild:o.destroyChildren;if(hasChildren&&destroy){$.each(pC,function(key,child){if(!child.destroyed){child.destroy(true)}if(child.destroyed){delete pC[key]}});if($.isEmptyObject(pC)){pC=children[pane]=null;hasChildren=false}}if($P&&remove&&!hasChildren){$P.remove()}else{if($P&&$P[0]){var root=o.paneClass,pRoot=root+"-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",classes=[root,root+_open,root+_closed,root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,true));$P.removeClass(classes.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if(hasChildren&&$C){$C.width($C.width());$.each(pC,function(key,child){child.resizeAll()})}else{if($C){$C.css($C.data(css)).removeData(css).removeData("layoutRole")}}if(!$P.data(d)){$P.css($P.data(css)).removeData(css)}}}if($T){$T.remove()}if($R){$R.remove()}Instance[pane]=$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=false;s={removed:true};if(!skipResize){resizeAll()}},_hidePane=function(pane){var $P=$Ps[pane],o=options[pane],s=$P[0].style;if(o.useOffscreenClose){if(!$P.data(_c.offscreenReset)){$P.data(_c.offscreenReset,{left:s.left,right:s.right})}$P.css(_c.offscreenCSS)}else{$P.hide().removeData(_c.offscreenReset)}},_showPane=function(pane){var $P=$Ps[pane],o=options[pane],off=_c.offscreenCSS,old=$P.data(_c.offscreenReset),s=$P[0].style;$P.show().removeData(_c.offscreenReset);if(o.useOffscreenClose&&old){if(s.left==off.left){s.left=old.left}if(s.right==off.right){s.right=old.right}}},hide=function(evt_or_pane,noAnimation){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(state.initialized&&false===_runCallbacks("onhide_start",pane)){return}s.isSliding=false;delete state.panesSliding[pane];if($R){$R.hide()}if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;if(!state.initialized){_hidePane(pane)}sizeMidPanes(_c[pane].dir==="horz"?"":"center");if(state.initialized||o.triggerEventsOnLoad){_runCallbacks("onhide_end",pane)}}else{s.isHiding=true;close(pane,false,noAnimation)}},show=function(evt_or_pane,openPane,noAnimation,noAlert){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===_runCallbacks("onshow_start",pane)){return}s.isShowing=true;s.isSliding=false;delete state.panesSliding[pane];if(openPane===false){close(pane,true)}else{open(pane,false,noAnimation,noAlert)}},toggle=function(evt_or_pane,slide){if(!isInitialized()){return}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane];if(evt){evt.stopImmediatePropagation()}if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane,!!slide)}else{close(pane)}}},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];_hidePane(pane);s.isClosed=true;s.isVisible=false},close=function(evt_or_pane,force,noAnimation,skipCallback){var pane=evtPane.call(this,evt_or_pane);if(!state.initialized&&$Ps[pane]){_closePane(pane);return}if(!isInitialized()){return}var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing,isHiding,wasSliding;$N.queue(function(queueNext){if(!$P||(!o.closable&&!s.isShowing&&!s.isHiding)||(!force&&s.isClosed&&!s.isShowing)){return queueNext()}var abort=!s.isShowing&&false===_runCallbacks("onclose_start",pane);isShowing=s.isShowing;isHiding=s.isHiding;wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(abort){return queueNext()}doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none");s.isMoving=true;s.isClosed=true;s.isVisible=false;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}if(s.isSliding){bindStopSlidingEvents(pane,false)}else{sizeMidPanes(_c[pane].dir==="horz"?"":"center",false)}setAsClosed(pane);if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(s.isClosed){close_2()}queueNext()})}else{_hidePane(pane);close_2();queueNext()}});function close_2(){s.isMoving=false;bindStartSlidingEvents(pane,true);var altPane=_c.oppositeEdge[pane];if(state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing){_runCallbacks("onclose_end",pane)}if(isShowing){_runCallbacks("onshow_end",pane)}if(isHiding){_runCallbacks("onhide_end",pane)}}}},setAsClosed=function(pane){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed";$R.css(side,sC.inset[side]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable&&$.layout.plugins.draggable){$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.tips.Open);$T.children(".content-open").hide();$T.children(".content-closed").css("display","block")}syncPinBtns(pane,false);if(state.initialized){sizeHandles()}},open=function(evt_or_pane,slide,noAnimation,noAlert){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing;$N.queue(function(queueNext){if(!$P||(!o.resizable&&!o.closable&&!s.isShowing)||(s.isVisible&&!s.isSliding)){return queueNext()}if(s.isHidden&&!s.isShowing){queueNext();show(pane,true);return}if(s.autoResize&&s.size!=o.size){sizePane(pane,o.size,true,true,true)}else{setSizeLimits(pane,slide)}var cbReturn=_runCallbacks("onopen_start",pane);if(cbReturn==="abort"){return queueNext()}if(cbReturn!=="NC"){setSizeLimits(pane,slide)}if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.tips.noRoomToOpen){alert(o.tips.noRoomToOpen)}return queueNext()}if(slide){bindStopSlidingEvents(pane,true)}else{if(s.isSliding){bindStopSlidingEvents(pane,false)}else{if(o.slidable){bindStartSlidingEvents(pane,false)}}}s.noRoom=false;makePaneFit(pane);isShowing=s.isShowing;delete s.isShowing;doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none");s.isMoving=true;s.isVisible=true;s.isClosed=false;if(isShowing){s.isHidden=false}if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isVisible){open_2()}queueNext()})}else{_showPane(pane);open_2();queueNext()}});function open_2(){s.isMoving=false;_fixIframe(pane);if(!s.isSliding){sizeMidPanes(_c[pane].dir=="vert"?"center":"",false)}setAsOpen(pane)}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC.inset[side]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding){$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding)}else{$R.removeClass(rClass+_sliding+" "+rClass+_pane+_sliding)}removeHover(0,$R);if(o.resizable&&$.layout.plugins.draggable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize)}else{if(!s.isSliding){$R.css("cursor","default")}}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.tips.Close);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block")}syncPinBtns(pane,!s.isSliding);$.extend(s,elDims($P));if(state.initialized){sizeHandles();sizeContent(pane,true)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible")){_runCallbacks("onopen_end",pane);if(s.isShowing){_runCallbacks("onshow_end",pane)}if(state.initialized){_runCallbacks("onresize_end",pane)}}},slideOpen=function(evt_or_pane){if(!isInitialized()){return}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane],delay=options[pane].slideDelay_open;if(evt){evt.stopImmediatePropagation()}if(s.isClosed&&evt&&evt.type==="mouseenter"&&delay>0){timer.set(pane+"_openSlider",open_NOW,delay)}else{open_NOW()}function open_NOW(){if(!s.isClosed){bindStopSlidingEvents(pane,true)}else{if(!s.isMoving){open(pane,true)}}}},slideClose=function(evt_or_pane){if(!isInitialized()){return}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],delay=s.isMoving?1000:300;if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close==="click"){close_NOW()}else{if(o.preventQuickSlideClose&&s.isMoving){return}else{if(o.preventPrematureSlideClose&&evt&&$.layout.isMouseOverElem(evt,$Ps[pane])){return}else{if(evt){timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay))}else{close_NOW()}}}}}function close_NOW(){if(s.isClosed){bindStopSlidingEvents(pane,false)}else{if(!s.isMoving){close(pane)}}}},slideToggle=function(evt_or_pane){var pane=evtPane.call(this,evt_or_pane);toggle(pane,true)},lockPaneForFX=function(pane,doLock){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes;if(doLock){showMasks(pane,{animation:true,objectsOnly:true});$P.css({zIndex:z.pane_animate});if(pane=="south"){$P.css({top:sC.inset.top+sC.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:sC.inset.left+sC.innerWidth-$P.outerWidth()})}}}else{hideMasks();$P.css({zIndex:(s.isSliding?z.pane_sliding:z.pane_normal)});if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"&&!$P.css("left").match(/\-99999/)){$P.css({left:"auto"})}}if(browser.msie&&o.fxOpacityFix&&o.fxName_open!="slide"&&$P.css("filter")&&$P.css("opacity")==1){$P[0].style.removeAttribute("filter")}}},bindStartSlidingEvents=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],evtName=o.slideTrigger_open.toLowerCase();if(!$R||(enable&&!o.slidable)){return}if(evtName.match(/mouseover/)){evtName=o.slideTrigger_open="mouseenter"}else{if(!evtName.match(/(click|dblclick|mouseenter)/)){evtName=o.slideTrigger_open="click"}}if(o.resizerDblClickToggle&&evtName.match(/click/)){$R[enable?"unbind":"bind"]("dblclick."+sID,toggle)}$R[enable?"bind":"unbind"](evtName+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?o.tips.Slide:"")},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],c=_c[pane],z=options.zIndexes,evtName=o.slideTrigger_close.toLowerCase(),action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];timer.clear(pane+"_closeSlider");if(enable){s.isSliding=true;state.panesSliding[pane]=true;bindStartSlidingEvents(pane,false)}else{s.isSliding=false;delete state.panesSliding[pane]}$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding+2:z.resizer_normal);if(!evtName.match(/(click|mouseleave)/)){evtName=o.slideTrigger_close="mouseleave"}$R[action](evtName,slideClose);if(evtName==="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+sID,cancelMouseOut)}if(!enable){timer.clear(pane+"_closeSlider")}else{if(evtName==="click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.tips.Close:"")}}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation()}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir==="vert",hasRoom=false;if(pane==="center"||(isSidePane&&s.noVerticalRoom)){hasRoom=(s.maxHeight>=0);if(hasRoom&&s.noRoom){_showPane(pane);if($R){$R.show()}s.isVisible=true;s.noRoom=false;if(isSidePane){s.noVerticalRoom=false}_fixIframe(pane)}else{if(!hasRoom&&!s.noRoom){_hidePane(pane);if($R){$R.hide()}s.isVisible=false;s.noRoom=true}}}if(pane==="center"){}else{if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize){sizePane(pane,s.maxSize,skipCallback,true,force)}else{if(s.size<s.minSize){sizePane(pane,s.minSize,skipCallback,true,force)}else{if($R&&s.isVisible&&$P.is(":visible")){var pos=s.size+sC.inset[c.side];if($.layout.cssNum($R,c.side)!=pos){$R.css(c.side,pos)}}}}if(s.noRoom){if(s.wasOpen&&o.closable){if(o.autoReopen){open(pane,false,true,true)}else{s.noRoom=false}}else{show(pane,s.wasOpen,true,true)}}}else{if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed){}else{if(o.closable){close(pane,true,true)}else{hide(pane,true)}}}}}},manualSizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],forceResize=force||(o.livePaneResizing&&!s.isResizing);s.autoResize=false;sizePane(pane,size,skipCallback,noAnimation,forceResize)},sizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side,dimName=_c[pane].sizeType.toLowerCase(),skipResizeWhileDragging=s.isResizing&&!o.triggerEventsDuringLiveResize,doFX=noAnimation!==true&&o.animatePaneSizing,oldSize,newSize;$N.queue(function(queueNext){setSizeLimits(pane);oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){queueNext();makePaneFit(pane,false,skipCallback);return}if(!force&&size===oldSize){return queueNext()}s.newSize=size;if(!skipCallback&&state.initialized&&s.isVisible){_runCallbacks("onresize_start",pane)}newSize=cssSize(pane,size);if(doFX&&$P.is(":visible")){var fx=$.layout.effects.size[pane]||$.layout.effects.size.all,easing=o.fxSettings_size.easing||fx.easing,z=options.zIndexes,props={};props[dimName]=newSize+"px";s.isMoving=true;$P.css({zIndex:z.pane_animate}).show().animate(props,o.fxSpeed_size,easing,function(){$P.css({zIndex:(s.isSliding?z.pane_sliding:z.pane_normal)});s.isMoving=false;delete s.newSize;sizePane_2();queueNext()})}else{$P.css(dimName,newSize);delete s.newSize;if($P.is(":visible")){sizePane_2()}else{s.size=size;$.extend(s,elDims($P))}queueNext()}});function sizePane_2(){var actual=dimName==="width"?$P.outerWidth():$P.outerHeight(),tries=[{pane:pane,count:1,target:size,actual:actual,correct:(size===actual),attempt:size,cssSize:newSize}],lastTry=tries[0],thisTry={},msg="Inaccurate size after resizing the "+pane+"-pane.";while(!lastTry.correct){thisTry={pane:pane,count:lastTry.count+1,target:size};if(lastTry.actual>size){thisTry.attempt=max(0,lastTry.attempt-(lastTry.actual-size))}else{thisTry.attempt=max(0,lastTry.attempt+(size-lastTry.actual))}thisTry.cssSize=cssSize(pane,thisTry.attempt);$P.css(dimName,thisTry.cssSize);thisTry.actual=dimName=="width"?$P.outerWidth():$P.outerHeight();thisTry.correct=(size===thisTry.actual);if(tries.length===1){_log(msg,false,true);_log(lastTry,false,true)}_log(thisTry,false,true);if(tries.length>3){break}tries.push(thisTry);lastTry=tries[tries.length-1]}s.size=size;$.extend(s,elDims($P));if(s.isVisible&&$P.is(":visible")){if($R){$R.css(side,size+sC.inset[side])}sizeContent(pane)}if(!skipCallback&&!skipResizeWhileDragging&&state.initialized&&s.isVisible){_runCallbacks("onresize_end",pane)}if(!skipCallback){if(!s.isSliding){sizeMidPanes(_c[pane].dir=="horz"?"":"center",skipResizeWhileDragging,force)}sizeHandles()}var altPane=_c.oppositeEdge[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback)}if(tries.length>1){_log(msg+"\nSee the Error Console for details.",true,true)}}},sizeMidPanes=function(panes,skipCallback,force){panes=(panes?panes:"east,west,center").split(",");$.each(panes,function(i,pane){if(!$Ps[pane]){return}var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=(pane=="center"),hasRoom=true,CSS={},visCSS=$.layout.showInvisibly($P),newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane==="center"){if(!force&&s.isVisible&&newCenter.width===s.outerWidth&&newCenter.height===s.outerHeight){$P.css(visCSS);return true}$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;s.newWidth=CSS.width;s.newHeight=CSS.height;CSS.width=cssW($P,CSS.width);CSS.height=cssH($P,CSS.height);hasRoom=CSS.width>=0&&CSS.height>=0;if(!state.initialized&&o.minWidth>newCenter.width){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&state.east.isVisible&&sizeE>minE){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE}if(reqPx>0&&state.west.isVisible&&sizeW>minW){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW}if(reqPx===0){if(sizeE&&sizeE!=minE){sizePane("east",newE,true,true,force)}if(sizeW&&sizeW!=minW){sizePane("west",newW,true,true,force)}sizeMidPanes("center",skipCallback,force);$P.css(visCSS);return}}}else{if(s.isVisible&&!s.noVerticalRoom){$.extend(s,elDims($P),cssMinDims(pane))}if(!force&&!s.noVerticalRoom&&newCenter.height===s.outerHeight){$P.css(visCSS);return true}CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;s.newSize=newCenter.height;CSS.height=cssH($P,newCenter.height);s.maxHeight=CSS.height;hasRoom=(s.maxHeight>=0);if(!hasRoom){s.noVerticalRoom=true}}if(hasRoom){if(!skipCallback&&state.initialized){_runCallbacks("onresize_start",pane)}$P.css(CSS);if(pane!=="center"){sizeHandles(pane)}if(s.noRoom&&!s.isClosed&&!s.isHidden){makePaneFit(pane)}if(s.isVisible){$.extend(s,elDims($P));if(state.initialized){sizeContent(pane)}}}else{if(!s.noRoom&&s.isVisible){makePaneFit(pane)}}$P.css(visCSS);delete s.newSize;delete s.newWidth;delete s.newHeight;if(!s.isVisible){return true}if(pane==="center"){var fix=browser.isIE6||!browser.boxModel;if($Ps.north&&(fix||state.north.tagName=="IFRAME")){$Ps.north.css("width",cssW($Ps.north,sC.innerWidth))}if($Ps.south&&(fix||state.south.tagName=="IFRAME")){$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}}if(!skipCallback&&state.initialized){_runCallbacks("onresize_end",pane)}})},resizeAll=function(evt_or_refresh){var oldW=sC.innerWidth,oldH=sC.innerHeight;evtPane(evt_or_refresh);if(!$N.is(":visible")){return}if(!state.initialized){_initLayoutElements();return}if(evt_or_refresh===true&&$.isPlainObject(options.outset)){$N.css(options.outset)}$.extend(sC,elDims($N,options.inset));if(!sC.outerHeight){return}if(evt_or_refresh===true){setPanePosition()}if(false===_runCallbacks("onresizeall_start")){return false}var shrunkH=(sC.innerHeight<oldH),shrunkW=(sC.innerWidth<oldW),$P,o,s;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane]){return}o=options[pane];s=state[pane];if(s.autoResize&&s.size!=o.size){sizePane(pane,o.size,true,true,true)}else{setSizeLimits(pane);makePaneFit(pane,false,true,true)}});sizeMidPanes("",true,true);sizeHandles();$.each(_c.allPanes,function(i,pane){$P=$Ps[pane];if(!$P){return}if(state[pane].isVisible){_runCallbacks("onresize_end",pane)}});_runCallbacks("onresizeall_end")},resizeChildren=function(evt_or_pane,skipRefresh){var pane=evtPane.call(this,evt_or_pane);if(!options[pane].resizeChildren){return}if(!skipRefresh){refreshChildren(pane)}var pC=children[pane];if($.isPlainObject(pC)){$.each(pC,function(key,child){child.resizeAll()})}},sizeContent=function(evt_or_panes,remeasure){if(!isInitialized()){return}var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.allPanes;$.each(panes,function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||!$C||!$P.is(":visible")){return true}if(!$C.length){initContent(pane,false);if(!$C){return}}if(false===_runCallbacks("onsizecontent_start",pane)){return}if((!s.isMoving&&!s.isResizing)||o.liveContentResizing||remeasure||m.top==undefined){_measure();if(m.hiddenFooters>0&&$P.css("overflow")==="hidden"){$P.css("overflow","visible");_measure();$P.css("overflow","hidden")}}var newH=s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH}if(state.initialized){_runCallbacks("onsizecontent_end",pane)}function _below($E){return max(s.css.paddingBottom,(parseInt($E.css("marginBottom"),10)||0))}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(".ui-layout-mask").not(ignore||":lt(0)"),$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length){m.spaceBelow=($F[0].offsetTop+$F.outerHeight())-m.bottom+_below($F)}else{m.spaceBelow=_below($C)}}})},sizeHandles=function(evt_or_panes){var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],$TC;if(!$P||!$R){return}var dir=_c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,left,offset,CSS={};if(spacing===0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir==="horz"){paneLen=sC.innerWidth;s.resizerLength=paneLen;left=$.layout.cssNum($P,"left");$R.css({width:cssW($R,paneLen),height:cssH($R,spacing),left:left>-9999?left:sC.inset.left})}else{paneLen=$P.outerHeight();s.resizerLength=paneLen;$R.css({height:cssH($R,paneLen),width:cssW($R,spacing),top:sC.inset.top+getPaneSize("north",true)})}removeHover(o,$R);if($T){if(togLen===0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen==="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(isStr(togAlign)){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=round((paneLen-togLen)/2)}}else{var x=parseInt(togAlign,10);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}if(dir==="horz"){var width=cssW($T,togLen);$T.css({width:width,height:cssH($T,spacing),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",round((width-$TC.outerWidth())/2))})}else{var height=cssH($T,togLen);$T.css({height:height,width:cssW($T,spacing),top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",round((height-$TC.outerHeight())/2))})}removeHover(0,$T)}if(!state.initialized&&(o.initHidden||s.noRoom)){$R.hide();if($T){$T.hide()}}})},enableClosable=function(evt_or_pane){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane],o=options[pane];if(!$T){return}o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane)}).css("visibility","visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.tips.Open:o.tips.Close).show()},disableClosable=function(evt_or_pane,hide){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane];if(!$T){return}options[pane].closable=false;if(state[pane].isClosed){open(pane,false,true)}$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(evt_or_pane){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable")){return}options[pane].slidable=true;if(state[pane].isClosed){bindStartSlidingEvents(pane,true)}},disableSlidable=function(evt_or_pane){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R){return}options[pane].slidable=false;if(state[pane].isSliding){close(pane,false,true)}else{bindStartSlidingEvents(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0])}},enableResizable=function(evt_or_pane){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable")){return}o.resizable=true;$R.draggable("enable");if(!state[pane].isClosed){$R.css("cursor",o.resizerCursor).attr("title",o.tips.Resize)}},disableResizable=function(evt_or_pane){if(!isInitialized()){return}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable")){return}options[pane].resizable=false;$R.draggable("disable").css("cursor","default").attr("title","");removeHover(null,$R[0])},swapPanes=function(evt_or_pane1,pane2){if(!isInitialized()){return}var pane1=evtPane.call(this,evt_or_pane1);state[pane1].edge=pane2;state[pane2].edge=pane1;if(false===_runCallbacks("onswap_start",pane1)||false===_runCallbacks("onswap_start",pane2)){state[pane1].edge=pane1;state[pane2].edge=pane2;return}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1]){$Ts[pane1].remove()}if($Ts[pane2]){$Ts[pane2].remove()}if($Rs[pane1]){$Rs[pane1].remove()}if($Rs[pane2]){$Rs[pane2].remove()}$Rs[pane1]=$Rs[pane2]=$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1]){$Ps[pane1].css(_c.visible)}if($Ps[pane2]){$Ps[pane2].css(_c.visible)}resizeAll();_runCallbacks("onswap_end",pane1);_runCallbacks("onswap_end",pane2);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return !$P?false:{pane:n,P:$P?$P[0]:false,C:$C?$C[0]:false,state:$.extend(true,{},state[n]),options:$.extend(true,{},options[n])}}function move(oPane,pane){if(!oPane){return}var P=oPane.P,C=oPane.C,oldPane=oPane.pane,c=_c[pane],s=$.extend(true,{},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"];fx[k+"_size"]=o[k+"_size"]});$Ps[pane]=$(P).data({layoutPane:Instance[pane],layoutEdge:pane}).css(_c.hidden).css(c.cssReq);$Cs[pane]=C?$(C):false;options[pane]=$.extend(true,{},oPane.options,fx);state[pane]=$.extend(true,{},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true,true)}else{$Rs[pane].css(c.side,sC.inset[c.side]+(state[pane].isVisible?getPaneSize(pane):0))}if(oPane.state.isVisible&&!s.isVisible){setAsOpen(pane,true)}else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}oPane=null}},syncPinBtns=function(pane,doPin){if($.layout.plugins.buttons){$.each(state[pane].pins,function(i,selector){$.layout.buttons.setPinState(Instance,$(selector),pane,doPin)})}};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=(CTRL&&code>=37&&code<=40),o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{if(CTRL||SHIFT){$.each(_c.borderPanes,function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code===(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane||!$Ps[pane]||!options[pane].closable||state[pane].isHidden){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(el){if(!isInitialized()){return}if(this&&this.tagName){el=this}var $P;if(isStr(el)){$P=$Ps[el]}else{if($(el).data("layoutRole")){$P=$(el)}else{$(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}})}}if(!$P||!$P.length){return}var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(options.zIndexes.resizer_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&!ofX.match(/(visible|auto)/)){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&!ofY.match(/(visible|auto)/)){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes,function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(el){if(!isInitialized()){return}if(this&&this.tagName){el=this}var $P;if(isStr(el)){$P=$Ps[el]}else{if($(el).data("layoutRole")){$P=$(el)}else{$(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}})}}if(!$P||!$P.length){return}var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",options.zIndexes.pane_normal)}$P.css(CSS);s.cssSaved=false}var $N=$(this).eq(0);if(!$N.length){return _log(options.errors.containerMissing)}if($N.data("layoutContainer")&&$N.data("layout")){return $N.data("layout")}var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:false,children:children,north:false,south:false,west:false,east:false,center:false};if(_create()==="cancel"){return null}else{return Instance}};$(function(){var b=$.layout.browser;if(b.msie){b.boxModel=$.support.boxModel}})})(jQuery);(function(a){if(!a.ui){a.ui={}}a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){var b=document.cookie,d=b?b.split(";"):[],f;for(var g=0,h=d.length;g<h;g++){f=a.trim(d[g]).split("=");if(f[0]==e){return decodeURIComponent(f[1])}}return null},write:function(d,b,e){var f="",h="",c=false,i=e||{},g=i.expires;if(g&&g.toUTCString){h=g}else{if(g===null||typeof g==="number"){h=new Date();if(g>0){h.setDate(h.getDate()+g)}else{h.setFullYear(1970);c=true}}}if(h){f+=";expires="+h.toUTCString()}if(i.path){f+=";path="+i.path}if(i.domain){f+=";domain="+i.domain}if(i.secure){f+=";secure"}document.cookie=d+"="+(c?"":encodeURIComponent(b))+f},clear:function(b){a.ui.cookie.write(b,"",{expires:-1})}};if(!a.cookie){a.cookie=function(b,c,e){var d=a.ui.cookie;if(c===null){d.clear(b)}else{if(c===undefined){return d.read(b)}else{d.write(b,c,e)}}}}a.layout.plugins.stateManagement=true;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,animateLoad:true,includeChildren:true,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(g,b,f){var h=g.options,e=h.stateManagement,d=a.extend(true,{},e.cookie,f||null),c=g.state.stateData=g.readState(b||e.stateKeys);a.ui.cookie.write(d.name||h.name||"Layout",a.layout.state.encodeJSON(c),d);return a.extend(true,{},c)},deleteCookie:function(c){var b=c.options;a.ui.cookie.clear(b.stateManagement.cookie.name||b.name||"Layout")},readCookie:function(d){var e=d.options;var b=a.ui.cookie.read(e.stateManagement.cookie.name||e.name||"Layout");return b?a.layout.state.decodeJSON(b):{}},loadCookie:function(d){var b=a.layout.state.readCookie(d);if(b){d.state.stateData=a.extend(true,{},b);d.loadState(b)}return b},loadState:function(m,g,b){if(!a.isPlainObject(g)||a.isEmptyObject(g)){return}g=m.state.stateData=a.layout.transformData(g);var l=m.options.stateManagement;b=a.extend({animateLoad:false,includeChildren:l.includeChildren},b);if(!m.state.initialized){var p=a.extend(true,{},g);a.each(a.layout.config.allPanes,function(h,c){if(p[c]){delete p[c].children}});a.extend(true,m.options,p)}else{var k=!b.animateLoad,p,d,n,e,i;a.each(a.layout.config.borderPanes,function(h,c){p=g[c];if(!a.isPlainObject(p)){return}s=p.size;d=p.initClosed;n=p.initHidden;ar=p.autoResize;e=m.state[c];i=e.isVisible;if(ar){e.autoResize=ar}if(!i){m._sizePane(c,s,false,false,false)}if(n===true){m.hide(c,k)}else{if(d===true){m.close(c,false,k)}else{if(d===false){m.open(c,false,k)}else{if(n===false){m.show(c,false,k)}}}}if(i){m._sizePane(c,s,false,false,k)}});if(b.includeChildren){var j,f;a.each(m.children,function(c,h){j=g[c]?g[c].children:0;if(j&&h){a.each(h,function(o,q){f=j[o];if(q&&f){q.loadState(f)}})}})}}},readState:function(q,l){if(a.type(l)==="string"){l={keys:l}}if(!l){l={}}var d=q.options.stateManagement,f=l.includeChildren,j=f!==undefined?f:d.includeChildren,b=l.stateKeys||d.stateKeys,t={isClosed:"initClosed",isHidden:"initHidden"},p=q.state,w=a.layout.config.allPanes,o={},e,h,v,u,c,g,m,k,r,z;if(a.isArray(b)){b=b.join(",")}b=b.replace(/__/g,".").split(",");for(var x=0,y=b.length;x<y;x++){e=b[x].split(".");h=e[0];v=e[1];if(a.inArray(h,w)<0){continue}u=p[h][v];if(u==undefined){continue}if(v=="isClosed"&&p[h]["isSliding"]){u=true}(o[h]||(o[h]={}))[t[v]?t[v]:v]=u}if(j){a.each(w,function(n,i){g=q.children[i];c=p.stateData[i];if(a.isPlainObject(g)&&!a.isEmptyObject(g)){z=o[i]||(o[i]={});if(!z.children){z.children={}}a.each(g,function(B,A){if(A.state.initialized){z.children[B]=a.layout.state.readState(A)}else{if(c&&c.children&&c.children[B]){z.children[B]=a.extend(true,{},c.children[B])}}})}})}return o},encodeJSON:function(b){return c(b);function c(l){var g=[],m=0,j,e,f,d=a.isArray(l);for(j in l){e=l[j];f=typeof e;if(f=="string"){e='"'+e+'"'}else{if(f=="object"){e=c(e)}}g[m++]=(!d?'"'+j+'":':"")+e}return(d?"[":"{")+g.join(",")+(d?"]":"}")}},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window["eval"]("("+c+")")||{}}catch(b){return{}}},_create:function(g){var b=a.layout.state,i=g.options,h=i.stateManagement;a.extend(g,{readCookie:function(){return b.readCookie(g)},deleteCookie:function(){b.deleteCookie(g)},saveCookie:function(d,e){return b.saveCookie(g,d,e)},loadCookie:function(){return b.loadCookie(g)},loadState:function(e,d){b.loadState(g,e,d)},readState:function(d){return b.readState(g,d)},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});g.state.stateData={};if(!h.autoLoad){return}if(a.isPlainObject(h.autoLoad)){if(!a.isEmptyObject(h.autoLoad)){g.loadState(h.autoLoad)}}else{if(h.enabled){if(a.isFunction(h.autoLoad)){var c={};try{c=h.autoLoad(g,g.state,g.options,g.options.name||"")}catch(f){}if(c&&a.isPlainObject(c)&&!a.isEmptyObject(c)){g.loadState(c)}}else{g.loadCookie()}}}},_unload:function(c){var d=c.options.stateManagement;if(d.enabled&&d.autoSave){if(a.isFunction(d.autoSave)){try{d.autoSave(c,c.state,c.options,c.options.name||"")}catch(b){}}else{c.saveCookie()}}}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=true;a.layout.defaults.autoBindCustomButtons=false;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(d){var e="ui-layout-button-",b=d.options.name||"",c;a.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(f,g){a.each(a.layout.config.borderPanes,function(i,h){a("."+e+g+"-"+h).each(function(){c=a(this).data("layoutName")||a(this).attr("layoutName");if(c==undefined||c===b){d.bindButton(this,g,h)}})})})},get:function(h,f,g,b){var d=a(f),i=h.options,c=i.errors.addButtonError;if(!d.length){a.layout.msg(c+" "+i.errors.selector+": "+f,true)}else{if(a.inArray(g,a.layout.config.borderPanes)<0){a.layout.msg(c+" "+i.errors.pane+": "+g,true);d=a("")}else{var e=i[g].buttonClass+"-"+b;d.addClass(e+" "+e+"-"+g).data("layoutName",i.name)}}return d},bind:function(c,f,b,e){var d=a.layout.buttons;switch(b.toLowerCase()){case"toggle":d.addToggle(c,f,e);break;case"open":d.addOpen(c,f,e);break;case"close":d.addClose(c,f,e);break;case"pin":d.addPin(c,f,e);break;case"toggle-slide":d.addToggle(c,f,e,true);break;case"open-slide":d.addOpen(c,f,e,true);break}return c},addToggle:function(c,e,b,d){a.layout.buttons.get(c,e,b,"toggle").click(function(f){c.toggle(b,!!d);f.stopPropagation()});return c},addOpen:function(c,e,b,d){a.layout.buttons.get(c,e,b,"open").attr("title",c.options[b].tips.Open).click(function(f){c.open(b,!!d);f.stopPropagation()});return c},addClose:function(c,d,b){a.layout.buttons.get(c,d,b,"close").attr("title",c.options[b].tips.Close).click(function(e){c.close(b);e.stopPropagation()});return c},addPin:function(g,e,f){var b=a.layout.buttons,d=b.get(g,e,f,"pin");if(d.length){var c=g.state[f];d.click(function(h){b.setPinState(g,a(this),f,(c.isSliding||c.isClosed));if(c.isSliding||c.isClosed){g.open(f)}else{g.close(f)}h.stopPropagation()});b.setPinState(g,d,f,(!c.isClosed&&!c.isSliding));c.pins.push(e)}return g},setPinState:function(i,b,h,k){var c=b.attr("pin");if(c&&k===(c=="down")){return}var j=i.options[h],d=j.buttonClass+"-pin",f=d+"-"+h,e=d+"-up "+f+"-up",g=d+"-down "+f+"-down";b.attr("pin",k?"down":"up").attr("title",k?j.tips.Unpin:j.tips.Pin).removeClass(k?e:g).addClass(k?g:e)},syncPinBtns:function(b,d,c){a.each(b.state[d].pins,function(e,f){a.layout.buttons.setPinState(b,a(f),d,c)})},_load:function(c){var e=a.layout.buttons;a.extend(c,{bindButton:function(g,f,h){return e.bind(c,g,f,h)},addToggleBtn:function(g,h,f){return e.addToggle(c,g,h,f)},addOpenBtn:function(g,h,f){return e.addOpen(c,g,h,f)},addCloseBtn:function(f,g){return e.addClose(c,f,g)},addPinBtn:function(f,g){return e.addPin(c,f,g)}});for(var d=0;d<4;d++){var b=a.layout.config.borderPanes[d];c.state[b].pins=[]}if(c.options.autoBindCustomButtons){e.init(c)}},_unload:function(b){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=true;a.layout.defaults.browserZoomCheckInterval=1000;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(b){if(a.layout.browserZoom.ratio()!==false){a.layout.browserZoom._setTimer(b)}},_setTimer:function(c){if(c.destroyed){return}var e=c.options,b=c.state,d=c.hasParentLayout?5000:Math.max(e.browserZoomCheckInterval,100);setTimeout(function(){if(c.destroyed||!e.resizeWithWindow){return}var f=a.layout.browserZoom.ratio();if(f!==b.browserZoom){b.browserZoom=f;c.resizeAll()}a.layout.browserZoom._setTimer(c)},d)},ratio:function(){var j=window,f=screen,g=document,m=g.documentElement||g.body,c=a.layout.browser,i=c.version,e,l,k;if((c.msie&&i>8)||!c.msie){return false}if(f.deviceXDPI&&f.systemXDPI){return h(f.deviceXDPI,f.systemXDPI)}if(c.webkit&&(e=g.body.getBoundingClientRect)){return h((e.left-e.right),g.body.offsetWidth)}if(c.webkit&&(l=j.outerWidth)){return h(l,j.innerWidth)}if((l=f.width)&&(k=m.clientWidth)){return h(l,k)}return false;function h(b,d){return(parseInt(b,10)/parseInt(d,10)*100).toFixed()}}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);(function(a){a.fn.criteriaSummary=function(f){var e=a.extend({},a.fn.criteriaSummary.defaults,f);a("#f_4007_Selection,#f_4008_Selection,#f_4009_Selection").addClass("f-cs-item");var d=function(){var g=a.data(this,"criteriaSummary:validate");if(typeof(g)=="function"&&!g(this)){return false}a(".f-cs-items").addRow(this)};function c(){var h=a(this).parent().siblings("table");a.focusFx.dontCountRightNow=true;a("tr",h).not(".cs-required").each(function(){a(this).removeRow()});a.focusFx.dontCountRightNow=false;a.focusFx.queueSearchFormCount(false);try{resizeReports()}catch(g){}}var b=function(){try{var k=a(this);if(k.hasClass("f-cs-disable")){return}a('.f-mutex-item[f="'+k.attr("f")+'"]').each(function(p,q){var o=a('tr[rel="f_'+a(q).attr("f")+'"]');if(o.length>0){o.removeRow(true)}else{a('tr[rel="'+a(q).attr("id")+'"]').removeRow(true)}});if(k.attr("id").indexOf("DaysBack")>-1){if(k.val().length>0){a("#f_4006_High,#f_4006_Low").val("").attr("disabled","disabled");a('tr[rel="f_4006"],tr[rel="f_4006_RunFromDate"]').remove()}else{a("#f_4006_Low,#f_4006_High").val("").removeAttr("disabled");a('tr[rel="'+k.attr("id")+'"]').remove();return}}var n=k.attr("id")=="f_4006_RunFrom";if(n&&a("#f_4006_DaysBack").length>0){if(k.prop("checked")){a("#f_4006_DaysBack,#f_4006_Low,#f_4006_High").val("").attr("disabled","disabled");a('tr[rel="f_4006_DaysBack"],tr[rel="f_4006"]').remove()}else{a("#f_4006_DaysBack,#f_4006_Low,#f_4006_High").removeAttr("disabled");a('tr[rel="'+k.attr("id")+'"]').remove()}}if(a("#f_4006_DaysBack").val()!=null){if(a("#f_4006_DaysBack").val().length>0){a("#f_4006_Low,#f_4006_High").val("").attr("disabled","disabled");a('tr[rel="f_4006_DaysBack"],tr[rel="f_4006"]').remove()}}var g=false;if(n){var l=k.attr("critsumvalue");if(k.prop("checked")||k.hasClass("cs-required")||(l!=null&&l.length>0)){g=false}else{g=true;if(!k.prop("checked")&&!k.hasClass("cs-required")){var j=a(".f-cs-items");var h=j.find('tr[rel="'+this.id+'"]');if(h!=null){a(h).remove()}if(k.attr("data-suppress-autocount")!=="true"){a.focusFx&&a.focusFx.searchFormAutoCount&&a.focusFx.searchFormAutoCount()}}}}if(!g){d.call(this);if(k.attr("data-suppress-autocount")!=="true"){a.focusFx&&a.focusFx.searchFormAutoCount&&a.focusFx.searchFormAutoCount()}}}finally{try{resizeReports()}catch(m){}}};a(".f-cs-clear-all").click(c);a('select.f-cs-item,input[type="radio"]').livequery("change",b);a(":input.f-cs-item").livequery("change",b).attr("data-suppress-autocount","true").each(function(){var h=a(this);var g=h.val();if(g!=null&&g.length>0&&(!h.hasClass("acfb-value")||g!="[]")){h.trigger("change")}}).removeAttr("data-suppress-autocount")};a.fn.criteriaSummaryValidate=function(b){return this.each(function(){a.data(this,"criteriaSummary:validate",b)})};a.fn.removeRow=function(f){var h=this.attr("rel");var c="";if(h.indexOf("__")>-1){var k=h.split("__");h=k[0];c="__"+k[1]}var g=a("#"+h+c);if(g.length==0){g=a("#"+h+"_Low"+c)}if(g.length==0){g=a("#"+h+"_Low__1");if(g.length>0){c="__1"}}if(!!f==false){if(g.hasClass("f-form-price")){b()}else{if(g.hasClass("acfb-value")){j()}else{if(g.hasClass("f-form-min")||g.hasClass("f-form-max")){e()}else{if(g.hasClass("f-checkboxlist")||(g.hasClass("f-cs-item")&&g.attr("type")=="checkbox")){d()}else{if(g.is("select")){g[0].selectedIndex=0}else{g.val("")}}}}}}if(!g.hasClass("acfb-value")){g.trigger("change")}this.remove();return;function b(){a("#"+h+"_Low"+c+",#"+h+"_High"+c).val("");a("#"+h+"_Low_1"+c+",#"+h+"_High_1"+c).val("000")}function j(){var l=g.parent();l.parent()[0].acfb.mergeResults([])}function e(){if(g.hasClass("acfb-input")){var l="";g.parent().parent()[0].acfb.mergeResults([]);if(g.hasClass("f-form-min")){l=g[0].id.replace("Low","High")}else{l=g[0].id.replace("High","Low")}a("#"+l).parent().parent()[0].acfb.mergeResults([])}else{a("#"+h+"_Low"+c+",#"+h+"_High"+c).val("")}}function d(){if(g.attr("type")=="checkbox"){g.prop("checked",false)}a.each(g.find("input"),function(){a(this).prop("checked",false)});a.focusFx&&a.focusFx.searchFormAutoCount&&a.focusFx.searchFormAutoCount()}};a.fn.addRow=function(e){var k=e.id;var q=a(e);var s=q.parents("div.f-form-field").find("label:first");var t=q.hasClass("f-cs-item-use-title")?q.attr("title"):s.html();var l="";var f=q.hasClass("cs-required");var b=null;if(q.hasClass("f-form-price")){l=j()}else{if(q.hasClass("acfb-value")){l=g(e);var h=a("input.acfb-input",q.parent());var u=a("label[for="+h.attr("id")+"]");if(h.hasClass("f-form-min")||h.hasClass("f-form-max")){l=c();k=s.attr("for")}else{if(u.length>0){t=(u.html()!=t?t+": ":"")+u.html()}}}else{if(typeof q.attr("csText")!="undefined"&&q.attr("csText").length>0){l=q.attr("csText")}else{if(q.hasClass("f-form-min")||q.hasClass("f-form-max")){l=c();k=s.attr("for")}else{if(a(e).attr("type")=="checkbox"){var o=a(e).attr("critsumvalue");if(o!=null&&o.length>0){k=s.attr("for");l=m()}else{if(a("#f_4006_RunFromDate").length>0){l=a("#f_4006_RunFromDate").val()}else{l=(a(e).prop("checked"))?"YES":"NO"}}}else{if(a(e).attr("name").indexOf("DaysBack")>0){l=e.value+" days back"}else{if(a(e).attr("name").indexOf("Selection")>0){l=a("#"+a(e).attr("name")+" :selected").text()}else{if(a(e).attr("type")=="radio"){var v=q.attr("id");var d=v.split("_");var n=d[0]+"_"+d[1];var p;var r=d[2]=="Ascending"?"ASC":"DESC";a("select.f-cs-item").each(function(){if(a(this).attr("id").indexOf(n)>-1){p=a(this)}});if(p!=undefined){k=p.attr("id");l=a("#"+p.attr("name")+" :selected").text()+", "+r}else{k=a(e).attr("name");l=a(e).attr("value")}}else{l=e.value}}}}}}}}return a(this).addCustomRow(k,t,l,null,f);function g(y){var z=a(y).parents("ul.acfb-holder");var A=z.find(".acfb-input");if(A&&z.css("display")=="none"&&A.attr("disabled")){a(".f-cs-items").addCustomRow(A.attr("id"),"","",null,false)}else{if(A){var B=a(y).val();var w=B.length>0?JSON.parse(B):new Array();var x="";var C="Data";if(A.attr("data")!==undefined){C=A.attr("data")}var D=(C.length==0);a.each(w,function(F,E){if(E.Required!=null){f=true}x+=(x.length>0?", ":"")+(D?E:E[C])});return x}}}function j(){var z="";var B=a(e).parent();var w,x,A,y;a("input",B).each(function(C){switch(C){case 0:k=q.parents("div.f-form-field").find("label").attr("for");w=a.trim(a(this).val());if(w.length==0){w="0"}break;case 1:x=a.trim(a(this).val());if(x.length==0){x="000"}break;case 2:A=a.trim(a(this).val());if(A.length==0){A="0"}break;case 3:y=a.trim(a(this).val());if(y.length==0){y="000"}break}});A=parseInt(A,10)*1000+parseInt(y,10);w=parseInt(w,10)*1000+parseInt(x,10);if(w>0&&A>0){z=w+" - "+A}else{if(A>0){z=" <= "+A}else{if(w>0){z=">="+w}}}return z}function m(){var w="";a.each(q.parents(".f-checkboxlist:first").find("input"),function(){var x=a(this);if(x.prop("checked")){w+=x.attr("critsumvalue")+", "}});return w.length>0?w.substring(0,w.length-2):""}function c(){var w=q.parents("div.f-form-field").find("label").attr("for");var x="";if(w.indexOf("__")>-1){var y=w.split("__");w=y[0];x="__"+y[1]}var E=q.parents("div.f-form-field").find("input");var z=q.parents("div.f-form-field").find("select[class*=f-form-time]");var D="";var A="";for(i=0;i<E.length;i++){var B="";var C=E[i].name;if(C.indexOf(w+"_Low"+x)>-1){if(a("#"+C).hasClass("acfb-input")||a("#"+C).hasClass("acfb-value")){if(a("#"+C).hasClass("acfb-value")){D=g("#"+C)}}else{D=a("#"+C).val()}if(D!=""&&z.length>=3){B=" "+a("#"+z[0].name).val()+":"+a("#"+z[1].name).val()+" "+a("#"+z[2].name).val();D+=B}}else{if(C.indexOf(w+"_High"+x)>-1){if(a("#"+C).hasClass("acfb-input")||a("#"+C).hasClass("acfb-value")){if(a("#"+C).hasClass("acfb-value")){A=g("#"+C)}}else{A=a("#"+C).val()}if(A!=""&&z.length==3){B=" "+a("#"+z[0].name).val()+":"+a("#"+z[1].name).val()+" "+a("#"+z[2].name).val()}if(A!=""&&z.length==6){B=" "+a("#"+z[3].name).val()+":"+a("#"+z[4].name).val()+" "+a("#"+z[5].name).val()}A+=B}}}if(D&&D.length>0&&A&&A.length>0){return D+" - "+A}if(D&&D.length>0){return">= "+D}if(A&&A.length>0){return"<= "+A}return""}};a.fn.addCustomRow=function(e,b,f,c,d){this.each(function(){a("tr[rel*=hdn"+e+"]:not([class^=hotsheet])").remove();var g=a(this.rows).filter('[rel="'+e+'"]');if(f.length>0&&g.length==0){$row=a("<tr></tr>");$row.attr("rel",e);$row.addClass(b.toLowerCase().replace(" ",""));if(d){$row.addClass("cs-required");$td=a('<th scope="row" class="f-cs-action"></th>');$row.append($td)}else{$td=a('<th scope="row" class="f-cs-action"><div class="f-cs-close" title="Remove"></div></th>');$row.append($td)}$td=a('<th scope="row" class="f-cs-action"><div class="f-cs-edit" title="Edit"></div></th>');$row.append($td);$td=a('<td class="f-cs-description">'+b+"</td>");$row.append($td);$td=a('<td class="f-cs-data">'+f+"</td>");$row.append($td);if(a("tr:last",this).length>0){a("tr:last",this).after($row)}else{a(this).append($row)}a(".f-cs-edit",$row).click(function(){var h=a(this).parents("tr:first").attr("rel");var k="";if(h.indexOf("__")>-1){var m=h.split("__");h=m[0];k="__"+m[1]}var j=a("#"+h+k);if(j.length==0){j=a("#"+h+"_Low"+k)}if(j.length==0){j=a("#"+h+"_Low__1");if(j.length>0){k="__1"}}if(j.hasClass("acfb-value")){j=j.parent().find(".acfb-input")}if(j.length>0){j.parents("fieldset:first").find("span.ui-icon-circle-triangle-s").parent().click();j.focus().parents("div.f-form-field").effect("highlight",{},3000);var l=j.offset().top;a("html,body").animate({scrollTop:l},1000)}});a(".f-cs-close",$row).click(function(){a(this).parents("tr").removeRow()});a(".ui-state-default",$row).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}else{if(f.length>0&&g.length>0){g.get(0).cells[3].innerHTML=f}else{if(g!=null){a(g).remove()}}}});return a(this)};a.fn.criteriaSummary.defaults={animate:false}})(jQuery);(function(a){a.dimensions={version:"@VERSION"};a.each(["Height","Width"],function(c,d){a.fn["inner"+d]=function(){if(!this[0]){return}var f=d=="Height"?"Top":"Left",e=d=="Height"?"Bottom":"Right";return this[d.toLowerCase()]()+b(this,"padding"+f)+b(this,"padding"+e)};a.fn["outer"+d]=function(f){if(!this[0]){return}var e=d=="Height"?"Top":"Left",g=d=="Height"?"Bottom":"Right";f=a.extend({margin:false},f||{});return this[d.toLowerCase()]()+b(this,"border"+e+"Width")+b(this,"border"+g+"Width")+b(this,"padding"+e)+b(this,"padding"+g)+(f.margin?(b(this,"margin"+e)+b(this,"margin"+g)):0)}});a.each(["Left","Top"],function(c,d){a.fn["scroll"+d]=function(e){if(!this[0]){return}return e!=undefined?this.each(function(){this==window||this==document?window.scrollTo(d=="Left"?e:a(window)["scrollLeft"](),d=="Top"?e:a(window)["scrollTop"]()):this["scroll"+d]=e}):this[0]==window||this[0]==document?self[(d=="Left"?"pageXOffset":"pageYOffset")]||a.boxModel&&document.documentElement["scroll"+d]||document.body["scroll"+d]:this[0]["scroll"+d]}});var b=function(d,c){return parseInt(a.css(d.jquery?d[0]:d,c))||0}})(jQuery);var config={mouseDownOnSelect:false};(function(a){a.fn.extend({autocomplete:function(d,c){var b=typeof d=="string";c=a.extend({},a.Autocompleter.defaults,{url:b?d:null,data:b?null:d,delay:b?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(p,u){var l={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,CONTROL:17,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var h=a(p).attr("autocomplete","off").addClass(u.inputClass);var t;var n="";var m=a.Autocompleter.Cache(u);var c=0;var d;var w=a.Autocompleter.Select(u,p,i,config);var g;a.browser.opera&&a(p.form).bind("submit.autocomplete",function(){if(g){g=false;return false}});h.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(x){d=x.keyCode;switch(x.keyCode){case l.UP:x.preventDefault();if(w.visible()){w.prev()}else{s(0,true)}break;case l.DOWN:x.preventDefault();if(w.visible()){w.next()}else{s(0,true)}break;case l.PAGEUP:x.preventDefault();if(w.visible()){w.pageUp()}else{s(0,true)}break;case l.PAGEDOWN:x.preventDefault();if(w.visible()){w.pageDown()}else{s(0,true)}break;case u.multiple&&a.trim(u.multipleSeparator)==","&&l.COMMA:case l.TAB:case l.RETURN:if(i()){x.preventDefault();g=true;return false}break;case l.ESC:w.hide();break;default:clearTimeout(t);if(w.visible()){w.hide()}t=setTimeout(s,u.delay);break}}).focus(function(){c++}).blur(function(){c=0;if(!config.mouseDownOnSelect){r()}}).click(function(){if(c++>1&&!w.visible()){s(0,true)}}).bind("search",function(){var x=(arguments.length>1)?arguments[1]:null;function y(A,B){var C=A.split(",");for(var D=0;D<C.length;D++){var E;if(B&&B.length){for(var z=0;z<B.length;z++){if(String(B[z].result).toLowerCase()==C[D].toLowerCase()){E=B[z];break}}}if(typeof x=="function"){x(E)}else{h.trigger("result",E&&[E.data,E.value])}}}a.each(v(h.val()),function(z,A){k(A,y,y)})}).bind("flushCache",function(){m.flush()}).bind("setOptions",function(){a.extend(u,arguments[1]);if("data" in arguments[1]){m.populate()}}).bind("unautocomplete",function(){w.unbind();h.unbind();a(p.form).unbind(".autocomplete")});function i(){var x=w.selected();if(!x){return false}var y=x.result;n="";if(u.multiple){var z=v(h.val());if(z.length>1){y=z.slice(0,z.length-1).join(u.multipleSeparator)+u.multipleSeparator+y}y+=u.multipleSeparator}h.val(y);f();var A=a.isFunction(u.formatLabel)?u.formatLabel(x):x.value;h.trigger("result",[x.data,A]);return true}function s(y,z){if(d==l.DEL){w.hide();return}var A=h.val();if(!z&&A==n){return}n=A;if(A.indexOf(",")>-1){var x="";a.each(A.split(","),function(C,B){x+=a.trim(B)+","});if(x.length>0){A=x.substring(0,x.length-1)}}else{A=e(A)}if(A.length>=u.minChars){h.addClass(u.loadingClass);if(!u.matchCase){A=A.toLowerCase()}k(A,b,f)}else{o();w.hide()}}function v(z){if(!z){return[""]}var y=z.split(u.multipleSeparator);var x=[];a.each(y,function(A,B){if(a.trim(B)){x[A]=a.trim(B)}});return x}function e(y){if(!u.multiple){return y}var x=v(y);return x[x.length-1]}function j(x,y){if(u.autoFill&&(e(h.val()).toLowerCase()==x.toLowerCase())&&d!=l.BACKSPACE){h.val(h.val()+y.substring(e(n).length));a.Autocompleter.Selection(p,n.length,n.length+y.length)}}function r(){clearTimeout(t);t=setTimeout(f,200)}function f(){a(p).removeClass("ac_show");var x=w.visible();w.hide();clearTimeout(t);o();if(u.mustMatch){h.search(function(z){if(!z){if(u.multiple){var y=v(h.val()).slice(0,-1);h.val(y.join(u.multipleSeparator)+(y.length?u.multipleSeparator:""))}else{h.val("")}}})}if(x){a.Autocompleter.Selection(p,p.value.length,p.value.length)}}function b(z,A){if(A&&A.length&&c){o();var B=z.split(",");if(B.length>1){for(var C=0;C<B.length;C++){var D;if(A&&A.length){for(var y=0;y<A.length;y++){if(String(A[y].result).toLowerCase()==B[C].toLowerCase()){D=A[y];break}}}if(typeof fn=="function"){fn(D)}else{h.trigger("result",D&&[D.data,D.value])}}}else{w.display(A,z);j(z,A[0].value);w.show()}}else{if(u.noResultsMessage.length>0){o();w.message(u.noResultsMessage);w.show()}else{f()}}}function k(B,y,z){if(!u.matchCase){B=B.toLowerCase()}var A=m.load(B);if(A&&A.length){y(B,A)}else{if((typeof u.url=="string")&&(u.url.length>0)){var x={timestamp:+new Date()};a.each(u.extraParams,function(F,E){x[F]=typeof E=="function"?E():E});var D=null;if(u.FormData!=null){D=u.FormData()}var C=a.extend({query:{q:e(B),limit:u.max,FormData:D}},x);if(u.contentType.indexOf("application/json")>-1){C=JSON.stringify(C)}a.ajax({mode:"abort",port:"autocomplete"+p.name,type:u.ajaxType,dataType:u.dataType,contentType:u.contentType,url:u.url,data:C,success:function(F){var E=u.parse&&u.parse(F)||q(F);m.add(B,E);y(B,E)}})}else{w.emptyList();z(B)}}}function q(B){var x=[];var z=B.split("\n");for(var A=0;A<z.length;A++){var y=a.trim(z[A]);if(y){y=y.split("|");x[x.length]={data:y,value:y[0],result:u.formatResult&&u.formatResult(y,y[0])||y[0]}}}return x}function o(){h.removeClass(u.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:0,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},FormData:null,selectFirst:true,formatItem:function(b){return b[0]},formatMatch:null,formatLabel:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(c,b){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180,autoPosition:true,attachTo:"body",ajaxType:"POST",dataType:"json",contentType:"application/json; charset=utf-8;",noResultsMessage:""};a.Autocompleter.Cache=function(f){var d={};var e=0;function b(j,k){if(!f.matchCase){j=j.toLowerCase()}var l=j.indexOf(k);if(f.matchContains=="word"){l=j.toLowerCase().search("\\b"+k.toLowerCase())}if(l==-1){return false}return l==0||f.matchContains}function c(i,j){if(e>f.cacheLength){g()}if(!d[i]){e++}d[i]=j}function h(){if(!f.data){return false}var p={},n=0;if(!f.url){f.cacheLength=1}p[""]=[];for(var o=0,j=f.data.length;o<j;o++){var l=f.data[o];l=(typeof l=="string")?[l]:l;var m=f.formatMatch(l,o+1,f.data.length);if(m===false){continue}var q=m.charAt(0).toLowerCase();if(!p[q]){p[q]=[]}var k={value:m,data:l,result:f.formatResult&&f.formatResult(l)||m};p[q].push(k);if(n++<f.max){p[""].push(k)}}a.each(p,function(r,s){f.cacheLength++;c(r,s)})}setTimeout(h,25);function g(){d={};e=0}return{flush:g,add:c,populate:h,load:function(l){if(!f.cacheLength||!e){return null}var r=null;if(f.FormData!=null){r=f.FormData()}if(r!=null){r=r[0].Value}if(!f.url&&f.matchContains=="ordered"){var m=[];var n=new Array();for(var o in d){if(o.length>0){var j=d[o];a.each(j,function(t,k){var q=k.value.split(" - ");if(q.length>1){var u=false;if(r!=null){for(var v=0;v<r.length;v++){if(q[0]==r[v].Data){u=true;break}}}if(!u){if(q[0].toLowerCase()==l){m.splice(0,0,k)}else{if(q[0].toLowerCase().indexOf(l)==0){m.push(k)}else{k.Data=q[0];k.Desc=q[1];n.push(k)}}}}else{k.Data=k.value;k.Desc=k.value;n.push(k)}})}}for(var p=n.length-1;p>=0;p--){f.matchContains=false;var s=n[p];if(b(s.Data,l)||b(s.Desc,l)){m.push(s);n.splice(p,1)}f.matchContains="ordered"}a.each(n,function(k,q){if(b(q.value,l)){m.push(q)}});return m}else{if(!f.url&&f.matchContains){var m=[];for(var o in d){if(o.length>0){var j=d[o];a.each(j,function(k,q){if(b(q.value,l)){m.push(q)}})}}return m}else{if(d[l]){return d[l]}else{if(f.matchSubset){for(var p=l.length-1;p>=f.minChars;p--){var j=d[l.substr(0,p)];if(j){var m=[];a.each(j,function(k,q){if(b(q.value,l)){m[m.length]=q}});return m}}}}}}return null}}};a.Autocompleter.Select=function(f,o,t,g){var b={ACTIVE:"ac_over"};var l,n=-1,j,q="",r=true,c,h,p;function e(){if(!r){p.html("");h.empty();return}c=a("<div/>").hide().addClass(f.resultsClass).css("position","absolute").appendTo(document.body);h=a("<ul/>").appendTo(c).mouseover(function(u){if(k(u).nodeName&&k(u).nodeName.toUpperCase()=="LI"){n=a("li",h).removeClass(b.ACTIVE).index(k(u));a(k(u)).addClass(b.ACTIVE)}}).click(function(u){a(k(u)).addClass(b.ACTIVE);t();o.focus();return false}).mousedown(function(){g.mouseDownOnSelect=true}).mouseup(function(){g.mouseDownOnSelect=false});p=a("<span/>").appendTo(c);if(f.width>0){c.css("width",f.width)}r=false}function k(u){var v=u.target;while(v&&v.tagName!="LI"){v=v.parentNode}if(!v){return[]}return v}function d(v){l.slice(n,n+1).removeClass(b.ACTIVE);m(v);var w=l.slice(n,n+1).addClass(b.ACTIVE);if(f.scroll){var u=0;l.slice(0,n).each(function(){u+=this.offsetHeight});if((u+w[0].offsetHeight-h.scrollTop())>h[0].clientHeight){h.scrollTop(u+w[0].offsetHeight-h.innerHeight())}else{if(u<h.scrollTop()){h.scrollTop(u)}}}}function m(u){n+=u;if(n<0){n=l.size()-1}else{if(n>=l.size()){n=0}}}function i(u){return f.max&&f.max<u?f.max:u}function s(){var u=i(j.length);for(var w=0;w<u;w++){if(!j[w]){continue}var x=f.formatItem(j[w].data,w+1,u,j[w].value,q);if(x===false){continue}var v=a("<li/>").html(f.highlight(x,q)).addClass(w%2==0?"ac_even":"ac_odd").appendTo(h)[0];a.data(v,"ac_data",j[w])}l=h.find("li");if(f.selectFirst){l.slice(0,1).addClass(b.ACTIVE);n=0}if(a.fn.bgiframe){h.bgiframe()}}return{display:function(v,u){e();j=v;q=u;s()},next:function(){d(1)},prev:function(){d(-1)},pageUp:function(){if(n!=0&&n-8<0){d(-n)}else{d(-8)}},pageDown:function(){if(n!=l.size()-1&&n+8>l.size()){d(l.size()-1-n)}else{d(8)}},hide:function(){c&&c.hide();l&&l.removeClass(b.ACTIVE);n=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(l.filter("."+b.ACTIVE)[0]||f.selectFirst&&l[0])},show:function(){a(o).addClass("ac_show");var u=a(o).offset();var y=u.top+o.offsetHeight;c.css({width:typeof f.width=="string"||f.width>0?f.width:a(o).width(),top:y,left:u.left}).show();if(f.autoPosition){var w=y+c.height();var v=c.height();v=v>f.scrollHeight?f.scrollHeight:v;if(w>a(window).height()){y=u.top-v;c.css("top",y)}}if(f.scroll){h.scrollTop(0);h.css({maxHeight:f.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var z=0;l.each(function(){z+=this.offsetHeight});var x=z>f.scrollHeight;h.css("height",x?f.scrollHeight:z);if(!x){l.width(h.width()-parseInt(l.css("padding-left"))-parseInt(l.css("padding-right")))}}}},selected:function(){var u=l&&l.filter("."+b.ACTIVE).removeClass(b.ACTIVE);return u&&u.length&&a.data(u[0],"ac_data")},emptyList:function(){h&&h.empty()},unbind:function(){c&&c.remove()},message:function(u){e();p.html(u);if(a.fn.bgiframe){h.bgiframe()}}}};a.Autocompleter.Selection=function(e,d,b){if(e.createTextRange){var c=e.createTextRange();c.collapse(true);c.moveStart("character",d);c.moveEnd("character",b);c.select()}else{if(e.setSelectionRange){e.setSelectionRange(d,b)}else{if(e.selectionStart){e.selectionStart=d;e.selectionEnd=b}}}}})(jQuery);jQuery.fn.autoCompletefb=function(d){var h=this;var m={BEFORE:0,AFTER:1,END:2};var j={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SPACE:49,DELETE:46};var g={ul:h,urlLookup:"",foundClass:".acfb-data",foundHoverClass:".acfb-data-hover",foundSelectedClass:".acfb-data-selected",inputClass:".acfb-input",inputHiddenClass:".acfb-input-hidden",requiredClass:"acfb-required",deleteImg:"delete.gif",mutexControls:[],multiple:true,nameDescLabel:false,acOptions:{},allowCommas:false};if(d){jQuery.extend(g,d);g.multiple=(g.acOptions.multiple!==false);g.safeInputClass=g.inputClass.replace(/\./,"");g.safeInputHiddenClass=g.inputHiddenClass.replace(/\./,"");g.safeFoundClass=g.foundClass.replace(/\./,"");g.safeFoundHoverClass=g.foundHoverClass.replace(/\./,"");g.safeFoundSelectedClass=g.foundSelectedClass.replace(/\./,"")}var e={lastKey:0,params:g,disableInput:function(){$(g.inputClass,h).attr("disabled","disabled")},enableInput:function(){$(g.inputClass,h).removeAttr("disabled")},getData:function(){var o="";$(g.foundClass,h).each(function(p){if(p>0){o+=","}o+=$("span",this).html()});return o},getValues:function(){var p=$("input[type = hidden]",h).val();var o=p.length>0?JSON.parse(p):new Array();return o},clearData:function(){$(g.foundClass,h).remove();if(!isTabletDevice()){$(g.inputClass,h).focus()}return h.acfb},setExtraParams:function(o){g.acOptions=$.extend(g.acOptions,{extraParams:o});$(g.inputClass,h).setOptions(g.acOptions)},setLookupUrl:function(p){var o=typeof p=="string";d=$.extend({},$.Autocompleter.defaults,{url:o?p:null,data:o?null:p,delay:o?$.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},g.acOptions);$(g.inputClass,h).setOptions(d)},dataHover:function(){$(this).addClass(g.safeFoundHoverClass)},dataDeHover:function(){$(this).removeClass(g.safeFoundHoverClass)},dataSelect:function(o){$(this).addClass(g.safeFoundSelectedClass)},dataDeSelect:function(o){$(this).removeClass(g.safeFoundSelectedClass)},handleDelete:function(u,r){var s=false;var q=null;var t=null;if($(g.foundSelectedClass).length>0){s=true;var p=$(g.foundSelectedClass);q=p.next(g.foundClass);t=p.prev(g.foundClass);e.removeFind($("img.p",p))}else{if(e.getValues().length>0&&$("input[type=text]",h).val().length==0){s=true;q=u.next(g.foundClass);t=u.prev(g.foundClass);e.removeFind($("img.p",u))}}if(s){if(r===true){t.addClass(g.safeFoundSelectedClass)}else{q.addClass(g.safeFoundSelectedClass)}}},getIndexOf:function(q,p){var o=-1;if(p.hasOwnProperty("ID")){p=p.ID}$.each(q,function(s,r){if(r!=null){if(r.hasOwnProperty("ID")){if(r.ID==p){o=s;return false}}else{if(r==p){o=s;return false}}}});return o},mergeResults:function(r){var s=$("input[type = hidden]",h);var p=s.val();var o=p.length>0?JSON.parse(p):new Array();var u=[];var t=false;$.each(o,function(w,x){var v=e.getIndexOf(r,x);if(v!==-1||(x.hasOwnProperty("ID")&&x.ID=="-1")){u.push(o[w])}else{t=true}});$.each(r,function(w,x){var v=e.getIndexOf(o,x);if(v===-1){u.push(r[w]);t=true}});if(t){var q=$("input[type=text]",h);s.val("");$("li.acfb-data",h).remove();$.each(u,function(w,v){f(q,v,null,false)});s.trigger("change")}},removeFind:function(v,s,q){var t=$("input[type=hidden]",h);var r=t.val();var p=r.length>0?JSON.parse(r):new Array();var u=false;$.each(p,function(w,o){if(o!=null){if(o.hasOwnProperty("ID")){if(o.ID==$(v).attr("rel")){p.splice(w,1);u=true}}else{if(o==$(v).attr("rel")){p.splice(w,1);u=true}}}});if(u){t.val(p.length==0?"":JSON.stringify(p));$(v).unbind("click").parent().remove();if(s!==false){t.trigger("change")}}if(!q&&!isTabletDevice()){$(g.inputClass,h).focus()}if($(g.inputClass+"-hidden",h).length>0&&p.length==0){$(g.inputClass,h).removeClass(g.safeInputHiddenClass)}return h.acfb},removeValue:function(s,p,q){var r=$("img.p[rel="+s+"]",h).get(0);return this.removeFind(r,p,q)}};$(g.inputClass,h).bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(p){var o=$(this);if(o.closest("ul").hasClass("acfb-no-input")){p.preventDefault();return false}switch(p.keyCode){case j.SPACE:break;case j.LEFT:if(o.val()==""){var q=$(g.foundSelectedClass,h);if(q.length==0){$(g.foundClass+":last",h).addClass(g.safeFoundSelectedClass)}else{q.removeClass(g.safeFoundSelectedClass);q.prev(g.foundClass).addClass(g.safeFoundSelectedClass)}return false}break;case j.RIGHT:if(o.val()==""){var q=$(g.foundSelectedClass,h);if(q.length==0){$(g.foundClass+":first",h).addClass(g.safeFoundSelectedClass)}else{q.removeClass(g.safeFoundSelectedClass);q.next(g.foundClass).addClass(g.safeFoundSelectedClass)}return false}break;case j.BACKSPACE:if(o.val()==""){if($(g.foundSelectedClass,h).length>0){e.handleDelete($(g.foundSelectedClass,h),true)}else{$(g.foundClass+":last",h).addClass(g.safeFoundSelectedClass)}return false}break;case j.DELETE:if(o.val()==""){e.handleDelete($(g.foundSelectedClass,h),false);return false}break;case j.COMMA:if(g.allowCommas){return}if(g.urlLookup.length!=0&&g.multiple&&!o.hasClass("ac_show")){b()}return false;default:break}});$(this).click(function(){if(!isTabletDevice()){$(g.inputClass,h).focus()}});$(g.inputClass,h).blur(function(o){if(config.mouseDownOnSelect){return false}$(g.foundClass+":last",h).after($(this));$(g.foundClass,h).trigger("deSelect");$(this).removeClass(g.safeInputHiddenClass);var p=$(g.inputClass,h).attr("Data").length==0;if(p){var o=jQuery.Event("keydown");o.keyCode=g.allowCommas?j.RETURN:j.COMMA;$(g.inputClass,h).trigger(o)}else{window.setTimeout(b,100)}});function b(){var o=$(g.inputClass,h).val();if(o.length>0){$(g.inputClass,h).trigger("search",function(p){if(p!=null){f($(g.inputClass,h),p.data)}})}$(g.inputClass,h).val("")}if(g.urlLookup.length!=0){$(g.inputClass,h).autocomplete(g.urlLookup,g.acOptions)}else{$(g.inputClass,h).keydown(function(o){if(g.allowCommas&&o.keyCode==j.COMMA){return}switch(o.keyCode){case j.RETURN:case j.COMMA:var q=$("input[type = hidden]",h).val();var p=q.length>0?JSON.parse(q):new Array();var r=$("input[type=text]",h).val();if(r.length>0){f($(this),r);$(g.inputClass,h).val("").focus();return false}return true;break;default:break}})}var a=$("input[type = hidden]",h);if(a.length>0&&a.val().length>0){var c=a.val();a.val("");var l=JSON.parse(c);var i=$("input[type=text]",h);$.each(l,function(p,o){f(i,o)})}$(g.inputClass,h).result(function(o,q,p){f($(this),q,p);$(g.inputClass,h).val("").focus();o.stopImmediatePropagation()});this.each(function(){this.acfb=e});return e;function f(z,A,H,B){var q=false;var E=$("input[type=hidden]",h).val();var o=E.length>0?JSON.parse(E):new Array();var u="Data";if(z.attr("data")!=null){u=z.attr("data")}var C=u.length==0;var I=C?A:A.ID;var F=C?A:A[u];var r=C?A:A.Description;var G=(!C&&A.hasOwnProperty("Required"))?A.Required:false;$.each(o,function(L,K){var J=C?K:K.ID;if(g.multiple===false){e.removeValue(J,false)}else{if(J==I){q=true}}});if(g.multiple===false){o=new Array()}if(!q){$.each(g.mutexControls,function(L,M){if(M!=$("input[type=text]",h).attr("id")){var J=$("#"+M);var K=J.parent().parent()[0].acfb;if(K!=null){$("input.acfb-value",J.parent()).attr("data-suppress-autocount","true");K.removeValue(I);$("input.acfb-value",J.parent()).removeAttr("data-suppress-autocount")}}});o.push(A);if(H==null){H=F}if(C&&typeof(I)=="string"){var s=[];var y=[];var x=[];if(g.allowCommas){s.push(H);y.push(I);x.push(r)}else{s=H.split(",");y=I.split(",");x=r.split(",")}var v=false;for(var w=0;w<s.length;w++){var t="";var D="";var p="";if(z.hasClass("f-form-integer-multiple")){t=k(s[w]);D=k(y[w]);p=k(x[w])}else{t=s[w];D=y[w];p=x[w]}if(o[o.length-1].indexOf(",")>-1){o[o.length-1]=t}else{if(o[o.length-1]!=t){o[o.length]=t}}if(t.length>0){n(t,o,D,p,false,G);v=true}}if(v&&B!==false){$("input[type = hidden]",h).trigger("change")}}else{n(H,o,I,r,B,G)}if($.browser.msie&&g.mutexControls.length>0){setTimeout("$('#"+z.attr("id")+"').focus();",100)}}}function k(r){var p=r.split("");var q="";var o=/[0-9]/;for(var s=0;s<p.length;s++){if(o.test(p[s])){q+=p[s]}}return q.substring(0,10)}function n(r,q,o,u,t,p){if(typeof(p)=="undefined"){p=false}u=u==null?r:u;var y=g.nameDescLabel&&r!=u?r+" - "+u:r;var s=$("<li/>").addClass(g.safeFoundClass).append($("<span></span>").attr("title",u).text(y));if(!p){$("<img/>").addClass("p").attr("rel",o).attr("src",g.deleteImg).attr("title","Remove").appendTo(s)}$("input[type = hidden]",h).val(JSON.stringify(q));if(t!==false){$("input[type = hidden]",h).trigger("change")}var v=$(g.inputClass,h).before(s);var w=$(v).prev("li:last");$(w).hover(e.dataHover,e.dataDeHover);$(w).bind("select",e.dataSelect);$(w).bind("deSelect",e.dataDeSelect);$(w).click(function(x){x.stopPropagation();e.lastKey=j.RIGHT;var z=$(g.inputClass,h);z.addClass(g.safeInputHiddenClass);$(this).after(z);$(g.foundSelectedClass,h).trigger("deSelect");$(this).trigger("select");if(!isTabletDevice()){z.focus()}});$(".p",w).click(function(x){e.removeFind(this);return false})}};(function(a){if(!a.focusFx){a.focusFx={}}a.extend(a.focusFx,{safeSubmit:false,requiredFields:[],countQueued:false,searchForm:function(){resizePage();a(window).bind("resize",resizePage);resizeReports();a("form").submit(function(){if(!a.focusFx.safeSubmit){return false}a.focusFx.safeSubmit=false;return true});a("#MainContent").fadeIn("slow");var j="";a("span.im-icon-required").each(function(){var e=a(this).parent().attr("for");e=a("#hdn"+e).length>0?"hdn"+e:e;a.focusFx.requiredFields.push(e)});if(a("#CountSearch *").length>1){a("#CountSearch button").css("margin-left","4px")}a("a.f-form-tooltip").qtip({style:{name:"cream",tip:true},position:{corner:{target:"topMiddle",tooltip:"bottomRight"},adjust:{screen:true}}});a(".f-form-map").click(a.focusFx.bingSearch);if(a("a.f-form-area-map-link")){if(window.g_searchType!=6){var b=a("a.f-form-area-map-link").parents()[0];if(b!=null){a(b).children("ul").attr("style","width:420px!important")}}}a("a.f-form-area-map-link").click(function(){parent.parent.$.fn.colorbox({href:window.g_areaMapLinkUrl,open:true,iframe:true,width:940,height:500,title:a(this).attr("title"),close:'<button id="Print">Print</button><button id="Close">Close</button>',onClosed:false})});$expandCollapse=a("form.f-form-search div.legend a,form.f-form-input div.legend a");if($expandCollapse.length>0){var c="ui-icon-circle-triangle-s";var k="ui-icon-circle-triangle-n";$expandCollapse.click(function(){a(this).parent().next().slideToggle("fast");$icon=a("span.ui-icon",this);if($icon.hasClass(c)){switchClassEx($icon,k,c)}else{switchClassEx($icon,c,k)}return false}).parent().click(function(){a(this).next().slideToggle("fast");$icon=a("a span.ui-icon",this);if($icon.hasClass(c)){switchClassEx($icon,k,c)}else{switchClassEx($icon,c,k)}return false});a("a.f-form-openall").click(function(){a("form.f-form-search div.legend a span."+c+",form.f-form-input div.legend a span."+c).each(function(){a(this).parent().click()})});a("a.f-form-closeall").click(function(){a("form.f-form-search div.legend a span."+k+",form.f-form-input div.legend a span."+k).each(function(){a(this).parent().click()})})}a("ul.acfb-no-input").click(function(){a(this).parent().find("a").click()});a(".f-form-lookup-partial,.f-form-area-partial,.f-form-property-type-partial,.f-form-how-sold-partial,.f-form-popup").click(function(o){o.preventDefault();var q=460,m=385,r=true;if(a(this).attr("cboxwidth")){q=a(this).attr("cboxwidth")}if(a(this).attr("cboxheight")){m=a(this).attr("cboxheight")}if(a(this).attr("cboxsavebutton")){r=a(this).attr("cboxsavebutton")=="true"}var p=a(this).attr("href");p+=p.indexOf("?")>0?"&searchID=":"?searchID=";p+=window.frameElement.id;if(window.g_searchType=="Tax"){p+="&fieldName="+a(this).attr("title")}var n="Save";if(a(this).attr("cboxsavebuttontext")){n=a(this).attr("cboxsavebuttontext")}parent.$.fn.colorbox({href:p,iframe:true,width:q,height:m,title:a(this).attr("title"),close:(r?'<button id="Save">'+n+"</button>":"")+'<button id="Close">Cancel</button>',onClosed:false})});a(".f-form-date").dynDateTime({ifFormat:"%m/%d/%Y",button:".next()",step:1,electric:false,preClick:function(m){var e=a(m);var n=e.attr("id");if((n=="f_4006_Low"||n=="f_4006_High")&&m.disabled){if(a("#f_4006_RunFrom").prop("checked")){a("#f_4006_RunFrom").removeAttr("checked");a.focusFx.hotSheetSetEnabled()}else{a("#f_4006_DaysBack").val("").keyup()}a("#f_4006_Low,#f_4006_High").val("").removeAttr("disabled")}}});a(".ui-state-default").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a("select.acfb-listing-owner").change(function(){a("a.acfb-listing-owner, ul.acfb-listing-owner").hide();a("ul.acfb-listing-owner input:hidden").attr("disabled",true);if(a(this).val()=="A"){a(".acfb-listing-owner-agent").show();a("ul.acfb-listing-owner-agent input").removeAttr("disabled")}else{if(a(this).val()=="AO"){a(".acfb-listing-owner-office").show();a("ul.acfb-listing-owner-office input").removeAttr("disabled")}else{if(a(this).val()=="AF"){a(".acfb-listing-owner-firm").show();a("ul.acfb-listing-owner-firm input").removeAttr("disabled")}}}a("ul.acfb-listing-owner:not(:hidden) input.acfb-value").each(function(){setTimeout(function(){a("ul.acfb-listing-owner:not(:hidden) input.acfb-value").trigger("change")},100)})});a.each((typeof g_ermsList!="undefined"?g_ermsList:[]),function(m,e){a('[id^="f_'+e+'__"]').addClass("f-form-erms")});a("input.acf").each(function(e){var m=a(this);l(m,m.attr("url"),m.attr("name"),m.attr("data"),m.attr("desc"),m.attr("extraParams"),m.attr("cacheType"))});a(".acfb-holder").click(function(){a("input:text",this).focus()});if(typeof(a.fn.criteriaSummary)=="function"){a(".f-cs-control").criteriaSummary()}a("#Search").click(a.focusFx.searchFormSubmit);a("#Count").click(function(){a.focusFx.queueSearchFormCount(false)});a("input.f-form-date").mask("99/99/9999");a("input.f-form-integer").focusMask("intMask");a("input.f-form-thousands").focusMask("intMask");a("input.f-form-decimal").focusMask("decMask");a("input.f-form-dollars").focusMask("intMask").blur(function(){var m=a.trim(a(this).val());var e=m.length;if(e==0){a(this).val("000")}else{if(e==1){a(this).val("00"+m)}else{if(e==2){a(this).val("0"+m)}}}});a("input.f-form-date").blur(function(){var e=a(this).val();if(e!=""){if(!validateDateString(e)){alert("The date entered is invalid.");a(this).val("")}}});if(typeof(a.fn.criteriaSummaryValidate)=="function"){a("form input.f-form-price").criteriaSummaryValidate(function(p){var m="";if(a(p).attr("id").indexOf("__")>-1){var w=a(p).attr("id").split("__");m="__"+w[1]}var t=a(p).attr("id").split("_",2);var n=a.trim(a("#f_"+t[1]+"_Low"+m).val());var v=a.trim(a("#f_"+t[1]+"_Low_1"+m).val());var o=a("#f_"+t[1]+"_High"+m);var e=a("#f_"+t[1]+"_High_1"+m);var r=a.trim(o.val());var s=a.trim(e.val());if((n!=""||v!="000")&&(r!=""||s!="000")){var u=parseInt(n==""?0:n,10)*1000+parseInt(v,10);var q=parseInt(r==""?0:r,10)*1000+parseInt(s,10);if(u>q){alert("Low price cannot be greater than high price.  Removed high price.");e.val("000");o.val("").focus();return false}}return true});var h=function(n){var e="";if(a(n).attr("id").indexOf("__")>-1){var q=a(n).attr("id").split("__");e="__"+q[1]}var o=a(n).attr("id").split("_",2);var m=a.trim(a("#f_"+o[1]+"_Low"+e).val());var p=a.trim(a("#f_"+o[1]+"_High"+e).val());return{low:m,high:p,lowEl:a("#f_"+o[1]+"_Low"+e),highEl:a("#f_"+o[1]+"_High"+e)}};a("form input.f-form-date").criteriaSummaryValidate(function(m){var o=h(m);var e=null;var n=null;if(o.low!=""){e=new Date(o.low)}if(o.high!=""){n=new Date(o.high)}if(n!=null&&n>new Date("06/06/2079")){alert("End date cannot be greater than 06/06/2079.  Removed end date.");o.highEl.val("").focus();return false}if(e!=null&&e<new Date("01/01/1900")||e>new Date("06/06/2079")){alert("Begin date cannot be less than 01/01/1900 or greater than 06/06/2079.  Removed begin date.");o.lowEl.val("").focus();return false}if(e!=null&&n!=null&&e>n){alert("Begin date cannot be greater than end date.  Removed end date.");o.highEl.val("").focus();return false}return true});a("form input.f-form-integer").criteriaSummaryValidate(function(m){var o=h(m);if(o.low!=""&&o.high!=""){var e=parseInt(o.low,10);var n=parseInt(o.high,10);if(e>n){alert("Min number cannot be greater than max number.  Removed max number.");o.highEl.val("").focus();return false}}return true});a("form input.f-form-integer-multiple").criteriaSummaryValidate(function(e){if(a.trim(a(e).val())==""){return true}var o=a(e).val().split(",");var n="";var q=[];for(var p in o){var m=parseInt(o[p],10);if(m=="NaN"||m.toString(10).length!=o[p].length){q.push(m)}else{n+=(n.length>0?",":"")+m}}if(q.length>0){alert("Invalid values were removed.");a(e).focus().val(n);return false}a(e).val(n);return true});a("form input.f-form-decimal").criteriaSummaryValidate(function(m){var o=h(m);if(o.low!=""&&o.high!=""){var e=parseFloat(o.low);var n=parseFloat(o.high);if(e>n){alert("Min number cannot be greater than max number.  Removed max number.");o.highEl.val("").focus();return false}}return true})}a.focusFx.searchFormAutoCount(true);var d=a("#focusControl").val();try{if(typeof(d)!="undefined"&&d!=""){a("#"+a("#focusControl").val()).focus()}else{a("form input:text:visible:first").focus()}}catch(f){}var i="input:text:enabled,select:select-one:enabled,select:select-multiple:enabled,textarea:enabled";a("div.f-form-field:last",a("div.fieldset")).keypress(function(m){if(m.keyCode==9&&!m.shiftKey){var n=a(this).parents("fieldset").next("fieldset");if(a("div.fieldset:hidden",n).length>0){m.preventDefault();a("div.legend",n).click();a("div.f-form-field:has("+i+") "+i,n).get(0).focus()}}});function g(e){return e.indexOf("f_11_")>-1?true:"ordered"}function l(n,t,z,p,e,u,w){if(p==undefined){p="Data"}if(e==undefined){e="Description"}var s=[];if(z.substr(0,6)=="f_517_"){s=["f_517_MH","f_517_MNH","f_517_MH1"]}var v=true;var m=false;if(u==null||u.length==0){u={}}else{u=JSON.parse(u);if(u.multiple!=null){v=u.multiple}if(u.matchCase!=null){matchCase=u.matchCase}if(u.allowCommas!=null){m=u.allowCommas}}var x=10;var q=null;if(a(n).hasClass("f-form-erms")){q=function(){return a.focusFx.searchFormBuildData(a(".f-form-erms"))};x=0}else{q=function(){return a.focusFx.searchFormBuildData(a(n))};x=0}var y=null;if(w!=null&&w.length>0){var o=z.split("_");if(window.top._cacheData!=null){var r=o.length>=4?o[3]:"1";if(w=="2"){t=window.top._cacheData[o[1]]}else{if(w=="1"){if(r.indexOf("-")>=0){r=r.split("-")[0]}t=window.top._cacheData[o[1]][r]}else{if(w=="3"){if(r.indexOf("-")==-1){t=window.top._cacheData[o[1]][r]}}}}y=function(A){return A.data.Data}}}return a("ul."+z).autoCompletefb({urlLookup:t,deleteImg:g_acfbDeleteImg,mutexControls:s,allowCommas:m,acOptions:{dataType:"json",width:300,multiple:v,cacheLength:x,parse:function(C){var A=new Array();for(var B=0;B<C.rows.length;B++){A[B]={data:C.rows[B],value:C.rows[B][p],result:C.rows[B][p]}}return A},formatItem:function(A){if(A[e].length>0){return A[p]+" - "+A[e]}else{return A[p]}},extraParams:u,FormData:q,noResultsMessage:"No Results Found.",matchContains:g(z),formatLabel:y}})}a("a.multipleaddress").each(function(){var m=a(this);var e={deleteImg:g_acfbDeleteImg,directionsUser:m.data("directionused"),streetLookup:m.data("streetlookup"),streetLookupPopupUrl:m.data("popupdataurl"),streetLookupPopupTitle:m.data("popuptitle"),streetLookupUrl:m.data("url")};a(this).multipleaddress(e)});a("a.wordsearch").each(function(){var e=JSON.parse(a(this).attr("extraparams"));e.applicationTabId=window;e.deleteImg=g_acfbDeleteImg;e.containerId="#MainContent";a(this).wordsearch(e)})},searchFormBuildData:function(c){var b=new Array();c.each(function(){var d=a("#hdn"+a(this).attr("name")).val();if(d.length>0){var e=a(this).attr("name");e=e.substring(e.indexOf("_")+1,e.length);if(e.indexOf("_")>=0){e=e.substring(0,e.indexOf("_"))}b[b.length]={Key:e,Value:JSON.parse(d)}}});if(b.length==0){return null}return b},loadViewSelectorNode:function(d,b){var c=new Object();c.viewID=a("a",d).attr("viewID");c.name=a("a",d).text();c.perPage=a("a",d).attr("perPage");c.type=a("a",d).attr("viewType");var e=JSON.stringify(c);if(a("#ViewSelected").length==0){a("form.f-form-search").append('<input type="hidden" id="ViewSelected" name="ViewSelected"/>')}a("#ViewSelected").val(e);if(b){a("#Search").click()}},searchFormAutoCount:function(c){if(a.focusFx.requiredFields.length>0){for(var b=0;b<a.focusFx.requiredFields.length;b++){if(a('table.f-cs-items tr[rel="'+a.focusFx.requiredFields[b]+'"]').length>0){a(a('span[title="Required"]')[b]).removeClass("im-icon-required").addClass("im-icon-not-required")}else{a(a('span[title="Required"]')[b]).removeClass("im-icon-not-required").addClass("im-icon-required")}}}if(window.g_autoCountEnabled){a.focusFx.queueSearchFormCount((c===true))}},dontCountRightNow:false,queueSearchFormCount:function(b){if(!a.focusFx.dontCountRightNow){var c=a("#Count");if(c.length==1){if(c.attr("disabled")!="disabled"){a.focusFx.searchFormCount(b===true)}else{a.focusFx.countQueued=true}}}},hasRequiredFields:function(e){var b=false;var d=new Array();var c=false;if(window.g_searchType==null){a("form.f-form-search input.required").each(function(){if(a(this).val().length==0){var f=true;if(a(this).parent().parent().attr("class")=="f-form-date-range"){if(c){f=false}c=true}if(f){b=true;d[d.length]=a(this).parent().parent().parent().find("label:first").text()}}});if(b){if(e){a.jGrowl("Please fill in the following required field(s):<br/><br/>"+d.join("<br/>"))}return true}}return false},searchFormCount:function(b){if(!a.focusFx.hasRequiredFields(!b)){if(b===true){a("#Count,#Clear").attr("disabled","disabled")}else{a("#Count,#Search,#Clear").attr("disabled","disabled")}a("#CountResult").val("Counting...");a("form.f-form-search").ajaxSubmit({url:g_urlCountAction,dataType:"json",type:"POST",timeout:120000,success:function(d){var c=typeof(d.result)=="object"?d.result.Count:d.result;if(d.status=="OK"){a("#CountResult").val(a("<div/>").text(a.formatNumber(c,{locale:"us"})).format({format:"#,##0"}).text());if(a.focusFx.countQueued){a.focusFx.countQueued=false;a.focusFx.searchFormCount(b);return}}else{a("#CountResult").val("Error.");a.jGrowl(c)}a("#Count,#Search,#Clear").removeAttr("disabled")},error:function(){a("#CountResult").val("Error.");a("#Count,#Search,#Clear").removeAttr("disabled")}})}else{}},searchFormSubmit:function(){if(!a.focusFx.hasRequiredFields(true)){a("#Count,#Search,#Clear").attr("disabled","disabled");var b=g_urlCountAction;if(b==""){doSubmit()}else{if(b.indexOf("?")>-1){b+="&fromSearch=true"}else{b+="?fromSearch=true"}a("form.f-form-search").ajaxSubmit({url:b,dataType:"json",type:"POST",success:function(e){var c=typeof(e.result)=="object"?e.result.Count:e.result;if(e.status=="OK"){if(parseInt(c,10)>0){var d=a("#ViewSelected").val();if(e.message!=null&&e.message=="MULTI_PAGE_WARNING"&&(d==null||d.indexOf("Spreadsheet")>-1)){parent.$.fn.colorbox({href:window.showWarningHtml+c,open:true,iframe:true,width:"575",height:"300",close:'<button id="OK">Continue</button> &nbsp; <button id="OkAndHide">Continue & Hide</button> &nbsp; <button id="Close">Cancel</button>',title:"Large Record Count",onClosed:false});parent.$("#cboxClose").unbind("click");parent.$("#Close").click(function(){parent.$.fn.colorbox.close()});parent.$("#OK").click(function(){parent.$.fn.colorbox.close();doSubmit(e)});parent.$("#OkAndHide").click(function(){parent.$.fn.colorbox.close();var f=a("form.f-form-search").attr("action");a("form.f-form-search").attr("action",f+"?HideWarn=true");doSubmit(e)})}else{doSubmit(e)}}else{a.jGrowl("No results found.  Please refine your criteria and try again.")}}else{a("#CountResult").val("Error.");a.jGrowl(c)}a("#Count,#Search,#Clear").removeAttr("disabled")},error:function(){a("#CountResult").val("Error.");a("#Count,#Search,#Clear").removeAttr("disabled");a.jGrowl("The server returned an error running the search.  Please try again.")}})}}}})})(jQuery);function resizeReports(){var a=$(".f-cs-control").height()+105;$("#Reports").height($(window).height()-a)}function resizePage(){$("div.ui-layout-west").height($(window).height()-29);resizeReports()}function doSubmit(b){var f=parent;var a=window.frameElement.id;if(!parent.$("#"+a).hasClass("ui-tabs-panel")){f=parent.parent;a=parent.frameElement.id}var d;if(a=="HomeTab"){var c=f.$("#app_tab_switcher a[tabDescription='Quick Search']");var e=buildTabDescription(b);if(c.length>0){d=c.attr("href").replace("#","");f.$("#app_tab_switcher").tabs("select","#"+d);d+="_1";f.$("a[href='#"+d+"']").html('<span class="">'+e+"</span>");f.$("a[href='#"+d+"']").attr("rel",e)}else{d=f.loadItemMain("Quick Search",e,"about:blank",true,"frmMain");d+="_1"}}else{if(window.g_replaceTabID!=null&&window.g_replaceTabID.length>0&&f.$("#"+window.g_replaceTabID).length>0){a=a.substring(0,a.indexOf("_"));d=window.g_replaceTabID;window.g_replaceTabID="";f.$("#"+a).tabs("select","#"+d);f.$("#"+a+" a[href=#"+d+"] span").html(buildTabDescription(b))}else{if(window.g_useSubSubTabForResults){d=f.appendOrActivateSubSubTab(buildTabDescription(b),a,"#")}else{var g=a.substring(0,a.lastIndexOf("_"));a=a.substring(0,a.indexOf("_"));d=g+"_2";parent.appendSubTabGroup(a,g,window.frameElement.id,d,buildTabDescription(b))}}}if(d!=null){setupParams(d);$.focusFx.safeSubmit=true;$("form.f-form-search").attr("target",d).submit()}$("#Count,#Search,#Clear").removeAttr("disabled")}function buildTabDescription(c){var a="Results";if(c!=null){if(typeof(c.result)=="object"&&typeof(c.result.listingCount!="undefined")&&c.result.listingCount>0){var a="Results ("+c.result.Count+" Records for "+c.result.listingCount+" Listings)"}else{var b=typeof(c.result)=="object"?c.result.Count:c.result;var a="Results ("+b+")"}}return a}function setupParams(a){if($("#searchID").length==0){$("form.f-form-search").append('<input type="hidden" id="searchID" name="searchID" value="'+a+'"/>')}else{$("#searchID").val(a)}setupSearchType()}function setupSearchType(){if(typeof window.g_searchType!=undefined&&window.g_searchType!=null&&$("#searchType").length==0){$("form.f-form-search").append('<input type="hidden" id="searchType" name="searchType" value="'+window.g_searchType+'"/>')}else{$("#searchType").val(window.g_searchType)}};(function(a){if(!a.focusFx){a.focusFx={}}a.extend(a.focusFx,{searchFormRules:function(){var e=11,y=27,E=28,B=33,s=34,x=43,u=44,n=46,r=47,D=476,c=620,l=621,G=622,j=623,C=624,t=628;var m=1,g=2,o=3,b=4,k=5,A=6;var f=[B,s,x,u,D,c,l,G,j,C,t];var q=[];if(typeof g_validAgentOfficeSearchStatuses!="undefined"&&g_validAgentOfficeSearchStatuses!=null&&g_validAgentOfficeSearchStatuses.length>0){if(g_validAgentOfficeSearchStatuses.length>1||g_validAgentOfficeSearchStatuses[0].length>0){q=[y,E,n,r]}}var d=a("input[id^=f_"+t+"_Low]");var h=a("input[id^=f_"+t+"_High]");var z=d.add(h);var p=a("input:hidden[id^=hdnf_"+e+"_]");if(p.length==0){p=a("input:hidden[id=hdnf_"+e+"]")}var F=[m,g,o,b,k,A];var i=[{id:B,statuses:F},{id:s,statuses:typeof g_searchExpireDateStatuses!="undefined"?g_searchExpireDateStatuses:[b]},{id:x,statuses:[g,o,A]},{id:u,statuses:[g,A]},{id:D,statuses:[g,o,b,k,A]},{id:c,statuses:F},{id:l,statuses:F},{id:G,statuses:F},{id:j,statuses:F},{id:C,statuses:F},{id:t,statuses:F}];a.each(i,function(I,H){H.lowControl=a("input[id^=f_"+H.id+"_Low]");H.highControl=a("input[id^=f_"+H.id+"_High]");H.controls=H.lowControl.add(H.highControl);H.controlsAndLinks=H.controls.add(a("input[id^=f_"+H.id+"_LowLink],input[id^=f_"+H.id+"_HighLink]"))});var w=function(H){var I=null;a.each(i,function(K,J){if(J.id==H){I=J;return false}});return I};var v=function(){var L=[];var N=[];if(p.length>0&&p.val()!=""){var M=JSON.parse(p.val());for(var J in M){N.push(M[J].ID);var K=parseInt(M[J].ID.split("_")[0],10);if(a.inArray(K,L)==-1){L.push(K)}}}if(q.length>0){var H=N.length>0;if(N.length>0){a.each(N,function(P,Q){var S=Q.split("_");var R=false;a.each(g_validAgentOfficeSearchStatuses,function(T,U){var V=U.split("_");if(V.length==1){if(V[0]==Q[0]){R=true;return false}}else{if(U==Q){R=true;return false}}});if(!R){H=false;return false}})}a.each(q,function(Q,R){var S=a("input[id^=f_"+R+"_]");if(S.length>0){var P=S.parent().parent();var T=P.parent().find("a.f-form-lookup-partial");if(H){S.removeAttr("disabled");P.removeClass("acfb-no-input");T.show()}else{S.attr("disabled","disabled");P.addClass("acfb-no-input");a("li.acfb-data",P).each(function(V,U){a("img.p",U).click()});T.hide()}}})}var I=(z.length>0&&(a.trim(d.val())!=""||a.trim(h.val())!=""));a.each(i,function(Q,R){if(R.statuses.length<F.length){var P=false;if(!I){a.each(R.statuses,function(T,S){if(a.inArray(parseInt(S,10),L)!=-1){P=true;return false}})}if(P){R.controlsAndLinks.removeClass("ui-state-disabled").removeAttr("disabled")}else{R.controlsAndLinks.attr("disabled","disabled").addClass("ui-state-disabled").filter("input:text").val("");a(".f-cs-items tr[rel^=f_"+R.id+"__]").remove()}}});if(z.length>0){var O=true;a.each(f,function(Q,R){if(R==t){return true}var P=w(R);if(P!=null&&P.lowControl.length>0){if(P.lowControl.val()!=""||P.highControl.val()!=""){O=false;return false}}});if(!O){z.attr("disabled","disabled").addClass("ui-state-disabled")}else{z.removeAttr("disabled").removeClass("ui-state-disabled")}}};p.expire();p.livequery("change",v);v();if(z.length>0){a.each(f,function(I,J){if(J==t){z.blur(function(){if(a.trim(d.val())!=""||a.trim(h.val())!=""){a.each(f,function(M,K){if(K!=t){var L=w(K);if(L!=null){L.controlsAndLinks.attr("disabled","disabled").addClass("ui-state-disabled")}}})}else{a.each(f,function(M,K){if(K!=t){var L=w(K);if(L!=null){L.controlsAndLinks.removeAttr("disabled").removeClass("ui-state-disabled")}}})}v()})}else{var H=w(J);if(H!=null){H.controls.blur(function(){v()})}}})}},getDateRange:function(d,c){var e=new Date();var f=new Date();switch(d){case 1:if(c>0){f.setDate(f.getDate()+c)}else{e.setDate(e.getDate()+c)}break;case 2:if(c>0){f.setMonth(f.getMonth()+c)}else{e.setMonth(f.getMonth()+c)}break;case 3:e.setMonth(e.getMonth()+c);e.setDate(1);f.setMonth(f.getMonth()+c);f=new Date(f.getFullYear(),f.getMonth()+1,0);break;case 4:e=new Date(e.getFullYear()+c,0,1);f=new Date(f.getFullYear()+c,12,0);break;case 5:e=new Date(e.getFullYear()+c,0,1);f=new Date(f.getFullYear()+c,f.getMonth(),f.getDate());break;case 6:var g=new Date();g.setMonth(e.getMonth()+(c*3));var b=(Math.ceil((g.getMonth()+1)/3)*3)-3;e=new Date(g.getFullYear(),b,1);f=new Date(g.getFullYear(),b+3,0);break}return{begin:e,end:f}}})})(jQuery);var m_VE_ReturnData="";(function(a){if(!a.focusFx){a.focusFx={}}a.extend(a.focusFx,{bingSearch:function(){if(a("#Map").length>0){var d="?";var b=a("#hdnf_518").val();if(b.length>0){var f=a("#Map").val();if(f.length>0){var c=JSON.parse(f);d+="&Address="+escape(c.address)+"&City="+escape(c.city)+"&State="+escape(c.state)+"&Zip="+escape(c.zip)+"&MapZoom="+c.zoom+"&CenterLat="+c.centerLat+"&CenterLng="+c.centerLng}}var e=a("a.f-form-map");m_VE_ReturnData=null;parent.$.fn.colorbox({href:e.attr("href")+d+"&tabName="+window.frameElement.id,open:true,iframe:true,width:a(window).width()-50,height:window.top.getAppHeight()-50,close:'<button id="Add">Add To Criteria</button><button id="Instant">Search Now</button><button id="Cancel">Cancel</button>',title:"Bing Map Search",onClosed:a.focusFx.processBingResult})}else{alert('The "Mapping" search control must be added to the layout for Mapping Search to work.')}return false},processBingResult:function(){if(m_VE_ReturnData!=null&&typeof m_VE_ReturnData=="object"){var g=m_VE_ReturnData.instant;a("#CountResult").val(a("<div/>").text(a.formatNumber(m_VE_ReturnData.count,{locale:"us"})).format({format:"#,##0"}).text());var c=a("#f_518");var f=c.parent().parent()[0].acfb;var e=[];for(var h=0;h<m_VE_ReturnData.shapes.length;h++){var k=m_VE_ReturnData.shapes[h].shapeType;var b="Rubberband";if(k=="1"){b="Radius"}else{if(k=="4"){b="Polygon"}}var d="Shape"+(h+1);var j={ID:d,Data:"Shape "+(h+1)+": "+b,Value:m_VE_ReturnData.shapes[h]};e.push(j)}m_VE_ReturnData.shapeArray=null;a("#Map").val(JSON.stringify(m_VE_ReturnData));a("#hdnf_518").addClass("f-cs-disable");f.mergeResults([]);if(g!="1"){a("#hdnf_518").removeClass("f-cs-disable")}f.mergeResults(e);if(g=="1"){a.focusFx.searchFormSubmit()}}}})})(jQuery);(function(a){function c(e,f,d){this.dec=e;this.group=f;this.neg=d}function b(d){var f=".";var g=",";var e="-";if(d=="us"||d=="ae"||d=="eg"||d=="il"||d=="jp"||d=="sk"||d=="th"||d=="cn"||d=="hk"||d=="tw"||d=="au"||d=="ca"||d=="gb"||d=="in"){f=".";g=","}else{if(d=="de"||d=="vn"||d=="es"||d=="dk"||d=="at"||d=="gr"||d=="br"){f=",";g="."}else{if(d=="cz"||d=="fr"||d=="fi"||d=="ru"||d=="se"){g=" ";f=","}else{if(d=="ch"){g="'";f="."}}}}return new c(f,g,e)}a.formatNumber=function(f,i){var i=a.extend({},a.fn.parse.defaults,i);var h=b(i.locale.toLowerCase());var d=h.dec;var g=h.group;var j=h.neg;var e=new String(f);e=e.replace(".",d).replace("-",j);return e};a.fn.parse=function(i){var i=a.extend({},a.fn.parse.defaults,i);var h=b(i.locale.toLowerCase());var e=h.dec;var f=h.group;var j=h.neg;var d="1234567890.-";var g=[];this.each(function(){var k=new String(a(this).text());if(a(this).is(":input")){k=new String(a(this).val())}while(k.indexOf(f)>-1){k=k.replace(f,"")}k=k.replace(e,".").replace(j,"-");var o="";var n=false;if(k.charAt(k.length-1)=="%"){n=true}for(var m=0;m<k.length;m++){if(d.indexOf(k.charAt(m))>-1){o=o+k.charAt(m)}}var l=new Number(o);if(n){l=l/100;l=l.toFixed(o.length-1)}g.push(l)});return g};a.fn.format=function(h){var h=a.extend({},a.fn.format.defaults,h);var g=b(h.locale.toLowerCase());var d=g.dec;var f=g.group;var i=g.neg;var e="0#-,.";return this.each(function(){var u=new String(a(this).text());if(a(this).is(":input")){u=new String(a(this).val())}var q="";var m=false;for(var y=0;y<h.format.length;y++){if(e.indexOf(h.format.charAt(y))==-1){q=q+h.format.charAt(y)}else{if(y==0&&h.format.charAt(y)=="-"){m=true;continue}else{break}}}var n="";for(var y=h.format.length-1;y>=0;y--){if(e.indexOf(h.format.charAt(y))==-1){n=h.format.charAt(y)+n}else{break}}h.format=h.format.substring(q.length);h.format=h.format.substring(0,h.format.length-n.length);while(u.indexOf(f)>-1){u=u.replace(f,"")}var l=new Number(u.replace(d,".").replace(i,"-"));if(n=="%"){l=l*100}var z="";var w=l%1;if(h.format.indexOf(".")>-1){var j=d;var v=h.format.substring(h.format.lastIndexOf(".")+1);var p=new String(w.toFixed(v.length));p=p.substring(p.lastIndexOf(".")+1);for(var y=0;y<v.length;y++){if(v.charAt(y)=="#"&&p.charAt(y)!="0"){j+=p.charAt(y);continue}else{if(v.charAt(y)=="#"&&p.charAt(y)=="0"){var r=p.substring(y);if(r.match("[1-9]")){j+=p.charAt(y);continue}else{break}}else{if(v.charAt(y)=="0"){j+=p.charAt(y)}}}}z+=j}else{l=Math.round(l)}var o=Math.floor(l);if(l<0){o=Math.ceil(l)}var k="";if(o==0){k="0"}else{var A="";if(h.format.indexOf(".")==-1){A=h.format}else{A=h.format.substring(0,h.format.indexOf("."))}var s=new String(Math.abs(o));var t=9999;if(A.lastIndexOf(",")!=-1){t=A.length-A.lastIndexOf(",")-1}var x=0;for(var y=s.length-1;y>-1;y--){k=s.charAt(y)+k;x++;if(x==t&&y!=0){k=f+k;x=0}}}z=k+z;if(l<0&&m&&q.length>0){q=i+q}else{if(l<0){z=i+z}}if(!h.decimalSeparatorAlwaysShown){if(z.lastIndexOf(d)==z.length-1){z=z.substring(0,z.length-1)}}z=q+z+n;if(a(this).is(":input")){a(this).val(z)}else{a(this).text(z)}})};a.fn.parse.defaults={locale:"us",decimalSeparatorAlwaysShown:false};a.fn.format.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:false}})(jQuery);(function(a,c,d,g){var e="multipleaddress",b={directionUsed:true,streetLookup:false,streetLookupUrl:"",streetLookupPopupUrl:"",streetLookupPopupTitle:"",acfbDeleteImg:"",applicationTabId:"",fieldId:"",actionLinks:'<a class="f-action-delete ui-corner-all ui-state-default" href="javascript:;" title="Delete"><span class="ui-icon ui-icon-circle-close">Delete</span></a><a class="f-action-edit ui-corner-all ui-state-default" href="javascript:;" title="Edit"><span class="ui-icon ui-icon-pencil">Edit</span></a>',directionList:["","E","N","NE","NW","S","SE","SW","W"]};function f(i,h){this.element=i;this.$element=a(i);this.$container=null;this.options=a.extend({},b,h);this._defaults=b;this._name=e;this.init()}f.prototype={init:function(){a(this.element).click({that:this},function(i){var m=i.data.that;var n=m.$element;var o=n.data("cboxwidth")?n.data("cboxwidth"):"70%";var j=n.data("cboxheight")?n.data("cboxheight"):"50%";var h=n.data("forid");var l="ma_"+h;var k=m.buildPopupMarkup(l,h);n.parent().find("a[rel]:first").focusOverlay({load:true,onBeforeLoad:function(){var p=this.getOverlay().find(".contentWrap:first");if(!p){return}p.html(k);m.initElements();var q=a("#hdn"+h).val();if(q.length>0){a.each(JSON.parse(q),function(t,u){var s=u.Addr.addr;var r=m.getAddr(s.low,s.high,s.dir,s.name);if(!m.exists(r)){m.buildInlineRow(r)}})}p.show()},onSave:function(){var r=m.$element.siblings("ul.acfb-holder:first").get(0).acfb;r.clearData();var q=0;var p=[];a("#ma_"+h).find("div.selected > div").each(function(t,u){var s={ID:h+"."+q,Data:a.data(this,"addr").toString(),Addr:a.data(this)};p.push(s);q++});r.mergeResults(p)}})})},buildPopupMarkup:function(h,i){var j=a('<div id="'+h+'" data-forid="'+i+'">'+this.buildHeader("Add Address")+"</div>");j.append(this.buildAddressControl()).append(this.buildHeader("Selected Addresses")).append('<div class="selected"></div>').append(this.buildInlineControl());return j[0].outerHTML},initElements:function(){a("#add").button({disabled:true});a("div.ma-container input.f-form-integer").focusMask("intMask");var h=this.options.acfbDeleteImg;this.$element.parent().find("div.contentWrap").find("ul.acfb-holder").each(function(){var i=a(this);var j="Data";var k="Description";a(this).autoCompletefb({urlLookup:i.data("url"),deleteImg:h,acOptions:{width:300,multiple:false,parse:function(n){var l=new Array();for(var m=0;m<n.rows.length;m++){l[m]={data:n.rows[m],value:n.rows[m][j],result:n.rows[m][j]}}return l},formatItem:function(l){return l[j]+" - "+l[k]},noResultsMessage:"No Results Found."},popupSettings:{url:i.data("popupdataurl"),width:600,title:i.data("popuptitle"),close:false,onSave:function(){var n=i.find("input.acf").attr("id");var o=i.get(0).acfb;o.clearData();var m=[];var l=[a("#table_"+n).jqGrid("getGridParam","selrow")];a.each(l,function(q,s){var r=a("#table_"+n).jqGrid("getRowData",s);var p={ID:r.ID,Data:r.Data};m.push(p)});o.mergeResults(m)}}})});a("#low,#high,#direction,#name").keyup({that:this},function(j){var i=j.data.that;i.updateAddState(this)});a("#direction").change({that:this},function(j){var i=j.data.that;i.updateAddState(this)});a("#hdnname").change({that:this},function(j){var i=j.data.that;i.updateAddState(this)});a("#add").click({that:this},function(k){var l=k.data.that;var j=l.getAddr(a.trim(a("#low").val()),a.trim(a("#high").val()),a.trim(a("#direction").val()),l.getAddrName("name"));if(!l.exists(j)){l.buildInlineRow(j)}a("#low,#high,#direction,#name,#hdnname").val("");var i=a(this);i.button("option","disabled",true);i.parent().parent().find("ul.acfb-holder")[0].acfb.clearData();a("#low").focus()});a(".selected",this.$container).delegate("a.f-action-delete","click",function(){a("#inlineeditor").appendTo("#inlinetemplate");a(this).parent().remove()});a(".selected",this.$container).delegate("a.f-action-edit","click",function(){var i;if(a("#inlineeditor").parent().attr("id")!="inlinetemplate"){i=a("#inlineeditor").parent();a("inlineeditor").appendTo("#inlinetemplate");a("span.f-data",i).text(a.data(i.get(0),"addr").toString()).show()}i=a(this).parent();i.find("span.f-data").hide();var j=a.data(i.get(0),"addr");a("#inlinelow").val(j.low);a("#inlinehigh").val(j.high);a("#inlinedirection").val(j.dir);var l=a("#inlinename");if(l.hasClass("acfb-input")){var k=l.parent().parent().get(0).acfb;if(k!=null&&j.nameJson!=null&&j.nameJson.length>0&&j.nameJson[0].Data.length>0){k.mergeResults(j.nameJson)}else{if(k!=null){k.mergeResults([])}}}else{a("#inlinename").val(j.name)}a("#inlineeditor").appendTo(i);a("#Save").attr("disabled","disabled")});a("#inlinesave").button().click({that:this},function(k){var l=k.data.that;var j=l.getAddr(a.trim(a("#inlinelow").val()),a.trim(a("#inlinehigh").val()),a.trim(a("#inlinedirection").val()),l.getAddrName("inlinename"));var i=a(this).parent().parent();a.data(i.get(0),"addr",j);a("#inlineeditor").appendTo("#inlinetemplate");a("span.f-data",i).text(j.toString()).show();a("#Save").removeAttr("disabled")});a("#inlinecancel").button().click(function(){var i=a(this).parents("div:first");a("#inlineeditor").appendTo("#inlinetemplate");a("span.f-data",i).show();a("#Save").removeAttr("disabled")})},buildHeader:function(h){return'<div class="ui-state-default legend">'+h+"</div>"},buildAddressControl:function(){var i="<table>";var h=["Low","High"];if(this.options.directionUsed){h[h.length]="Direction"}h[h.length]="Street Name";h[h.length]="";i+="<thead>";i+=this.buildRow(true,h);i+="</thead><tbody>";var k=[];k[0]='<input class="f-form-integer" id="low" maxlength="10" name="low" type="text" style="width: 75px;">';k[1]='<input class="f-form-integer" id="high" maxlength="10" name="high" type="text" style="width: 75px;" >';if(this.options.directionUsed){k[k.length]='<select id="direction">'+this.buildOptions(this.options.directionList)+"</select>"}if(this.options.streetLookup){var j="<fieldset>";j+='<div class="ui-widget-container fieldset">';j+='  <div class="f-form-field">';j+='      <ul class="ui-helper-reset acfb-holder name" data-popupdataurl="'+this.options.streetLookupPopupUrl+'" data-popuptitle="'+this.options.streetLookupPopupTitle+'" data-url="'+this.options.streetLookupUrl+'">';j+='          <li><input class="ac_input acfb-input acf" id="name" name="name" type="text" autocomplete="off"><input class="acfb-value f-cs-item" id="hdnname" name="hdnname" type="hidden"></li>';j+="      </ul>";j+="    </div>";j+="</div>";j+="</fieldset>";k[k.length]=j}else{k[k.length]='<input id="name" maxlength="50" name="name" style="width: 150px" type="text">'}k[k.length]='<input type="button" value="Add" id="add" disabled="disabled">';i+=this.buildRow(false,k);i+="</tbody></table>";return i},buildInlineControl:function(){var h='<div style="display:none;" id="inlinetemplate"><span id="inlineeditor">';h+='<div style="float: left; width: 220px;">';h+='<input class="f-form-integer" id="inlinelow" maxlength="10" name="low" type="text" style="width: 75px; margin-right: 5px;">';h+='<input class="f-form-integer" id="inlinehigh" maxlength="10" name="low" type="text" style="width: 75px;">';if(this.options.directionUsed){h+='<select id="inlinedirection">'+this.buildOptions(this.options.directionList)+"</select>"}h+="</div>";h+='<input id="inlinename" maxlength="50" name="inlinename" style="float: left; width: 150px" type="text" disabled="disabled">';h+='<input type="button" value="Save" id="inlinesave"/><input type="button" value="Cancel" id="inlinecancel"/></span></div>';return h},buildRow:function(l,k){var h="<tr>";for(var j=0;j<k.length;j++){h+=l?"<th>":"<td>";h+=k[j];h+=l?"</th>":"</td>"}h+="</tr>";return h},buildOptions:function(j){var h="";for(var k=0;k<j.length;k++){h+='<option value="'+j[k]+'">'+j[k]+"</option>"}return h},getAddr:function(i,j,h,k){return{low:i,high:j,dir:h,name:k,nameJson:[{Data:k,Description:k,ID:a(".f-action-delete").length}],toString:function(){return this.low+(this.low!==""||this.high!==""?"-":"")+this.high+" "+this.dir+" "+this.name}}},getAddrName:function(j){if(a("#hdn"+j).length>0){var i=a("#hdn"+j).val();if(i!=null&&i.length>0){var h=JSON.parse(i);return h.length>0?h[0].Data:""}}return a.trim(a("#"+j).val())},updateAddState:function(h){var i=(a.trim(a(h).val()).length>0);if(!i){a("#low,#high,#direction,#name,#hdnname").each(function(){if(a.trim(a(this).val()).length>0){i=true}})}a("#add").button("option","disabled",!i)},exists:function(h){return(a(".selected div",this.$container).filter(function(){return objectEqual(h,a.data(this,"addr"))}).length>0)},buildInlineRow:function(h){a("<div>"+this.options.actionLinks+'<span class="f-data">'+h.toString()+"</span></div>").appendTo(".selected",this.$container);a.data(a(".selected div:last",this.$container).get(0),"addr",h)}};objectEqual=function(i,h){if(typeof i===g&&typeof h!==g||typeof h===g&&typeof i!==g){return false}if(typeof i===g&&typeof h===g){return true}for(var j in i){if(typeof i[j]=="function"){continue}if(!h.hasOwnProperty(j)){return false}if(i[j]!==h[j]){return false}}for(var j in h){if(typeof h[j]=="function"){continue}if(!i.hasOwnProperty(j)){return false}if(h[j]!==i[j]){return false}}return true};a.fn[e]=function(h){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new f(this,h))}})}})(jQuery,window,document);(function(g,l,k,d){g.focusTools=g.focusTools||{version:"0.1"};g.focusTools.overlay={addEffect:function(q,s,r){c[q]=[s,r]},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:true,left:"center",load:false,mask:{color:"#fff",loadSpeed:200,opacity:0.8},oneInstance:true,speed:"normal",target:null,top:"10%"}};g.focusTools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function j(){if(g.browser.msie){var r=g(k).height(),q=g(l).height();return[l.innerWidth||k.documentElement.clientWidth||k.body.clientWidth,r-q<20?q:r]}return[g(k).width(),g(k).height()]}function i(q){if(q){return q.call(g.mask)}}var o,m,b,a,h;g.focusOverlayMask={load:function(q,s){if(b){return this}if(typeof q=="string"){q={color:q}}q=q||config;a=q=g.extend(g.extend({},g.focusTools.expose.conf),q);o=g("#"+q.maskId);if(!o.length){o=g("<div/>").attr("id",q.maskId);g("body").append(o)}var r=j();o.css({position:"absolute",top:0,left:0,width:r[0],height:r[1],display:"none",opacity:q.startOpacity,zIndex:q.zIndex});if(q.color){o.css("backgroundColor",q.color)}if(i(q.onBeforeLoad)===false){return this}if(q.closeOnEsc){g(k).on("keydown.mask",function(t){if(t.keyCode==27){g.focusOverlayMask.close(t)}})}if(q.closeOnClick){o.on("click.mask",function(t){g.focusOverlayMask.close(t)})}g(l).on("resize.mask",function(){g.focusOverlayMask.fit()});if(s&&s.length){h=s.eq(0).css("zIndex");g.each(s,function(){var t=g(this);if(!/relative|absolute|fixed/i.test(t.css("position"))){t.css("position","relative")}});m=s.css({zIndex:Math.max(q.zIndex+1,h=="auto"?0:h)})}o.css({display:"block"}).fadeTo(q.loadSpeed,q.opacity,function(){g.focusOverlayMask.fit();i(q.onLoad);b="full"});b=true;return this},close:function(){if(b){if(i(a.onBeforeClose)===false){return this}o.fadeOut(a.closeSpeed,function(){i(a.onClose);if(m){m.css({zIndex:h})}b=false});g(k).off("keydown.mask");o.off("click.mask");g(l).off("resize.mask")}return this},fit:function(){if(b){var q=j();o.css({width:q[0],height:q[1]})}},getMask:function(){return o},isLoaded:function(q){return q?b=="full":loaded},getConf:function(){return a},getExposed:function(){return m}};g.fn.focusOverlayMask=function(q){g.focusOverlayMask.load(q);return this};g.fn.expose=function(q){g.focusOverlayMask.load(q,this);return this};var e=[],c={};g.focusTools.overlay.addEffect("default",function(s,t){var q=this.getConf(),r=g(l);if(!q.fixed){s.top+=r.scrollTop();s.left+=r.scrollLeft()}s.position=q.fixed?"fixed":"absolute";this.getOverlay().css(s).fadeIn(q.speed,t)},function(q){this.getOverlay().fadeOut(this.getConf().closeSpeed,q)});var n="focusOverlay",p={load:false,addSaveButton:true,close:null,save:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",left:"center",mask:"darkgray",oneInstance:true,speed:"normal",target:null,top:"10%",onBeforeLoad:null,onLoad:null,onSave:null,onBeforeClose:null,onClose:null};function f(r,q){this.element=r;this.options=g.extend({},p,q);this._defaults=p;this._name=n;this.init()}f.prototype={init:function(){var v=g(this.element);var r=this,z=v.add(r),x=g(l),A,q,s,B,y=g.focusTools.expose&&(this.options.mask||this.options.expose),u=Math.random().toString().slice(10);if(y){if(typeof y=="string"){y={color:y}}y.closeOnClick=y.closeOnEsc=false}var t=this.options.target||v.attr("rel");s=t?g(t):null||v;if(!s.length){throw"Could not find Overlay: "+t}if(v&&v.index(s)==-1){v.click(function(w){r.load(w);return w.preventDefault()})}g.extend(r,{load:function(E){if(r.isOpened()){return r}var D=c[this.options.effect];if(!D){throw'Overlay: cannot find effect : "'+this.options.effect+'"'}if(this.options.oneInstance){g.each(e,function(){this.close(E)})}E=E||g.Event();E.type="onBeforeLoad";z.trigger(E);if(E.isDefaultPrevented()){return r}B=true;if(y){g(s).expose(y)}var G=this.options.top,w=this.options.left,C=s.outerWidth({margin:true}),F=s.outerHeight({margin:true});if(typeof G=="string"){G=G=="center"?Math.max((x.height()-F)/2,0):parseInt(G,10)/100*x.height()}if(w=="center"){w=Math.max((x.width()-C)/2,0)}D[0].call(r,{top:G,left:w},function(){if(B){E.type="onLoad";z.trigger(E)}});if(y&&this.options.closeOnClick){g.focusOverlayMask.getMask().one("click",r.close)}if(this.options.closeOnClick){g(k).on("click."+u,function(H){if(!g(H.target).parents(s).length){r.close(H)}})}if(this.options.closeOnEsc){g(k).on("keydown."+u,function(H){if(H.keyCode==27){r.close(H)}})}return r},save:function(w){w=w||g.Event();w.type="onSave";z.trigger(w);if(w.isDefaultPrevented()){return}return r.close(w)},close:function(w){if(!r.isOpened()){return r}w=w||g.Event();w.type="onBeforeClose";z.trigger(w);if(w.isDefaultPrevented()){return}B=false;c[this.options.effect][1].call(r,function(){w.type="onClose";z.trigger(w)});g(k).off("click."+u+" keydown."+u);var C=g("div.focus-overlay:visible").length;if(y&&C===1){g.focusOverlayMask.close()}return r},getOverlay:function(){return s},getTrigger:function(){return trigger},getClosers:function(){return A},isOpened:function(){return B},getConf:function(){return this.options}});g.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose,onSave".split(","),function(w,C){if(g.isFunction(r.options[C])){g(r).on(C,r.options[C])}r[C]=function(D){if(D){g(r).on(C,D)}return r}});q=s.find(this.options.save||".save");if(!q.length&&!this.options.save){q=g('<button class="save">Save</button>');s.prepend(q)}q.click(function(w){r.save(w)});A=s.find(this.options.close||".close");if(!A.length&&!this.options.close){A=g('<button class="close">Close</button>');s.prepend(A)}A.click(function(w){r.close(w)});s.find("button.save,button.close").button();if(this.options.load){r.load()}}};g.fn[n]=function(q){return this.each(function(){if(!g.data(this,"plugin_"+n)){g.data(this,"plugin_"+n,new f(this,q))}})}})(jQuery,window,document);(function(a,c,d,f){var e="wordsearch",b={fieldListUrl:"",containerId:"",acfbDeleteImg:"",applicationTabId:"",fieldId:""};function g(i,h){this.element=i;this.$element=a(i);this.$container=null;this.options=a.extend({},b,h);this._defaults=b;this._name=e;this._uniqueId=0;this.init()}g.prototype={init:function(){a(this.element).click({that:this},function(j){var k=j.data.that;k.buildElementIfNeeded();var i=k.cboxwidth!=null?k.cboxwidth:700;var h=k.cboxheight!=null?k.cboxheight:500;a.fn.colorbox({inline:true,href:k.$element.attr("link"),width:i,height:h,title:"Word Search",close:'<button id="Save">Save</button><button id="Close">Cancel</button>',onClosed:false,onComplete:function(){a("#cboxClose").unbind("click");a("#Close").click(function(){a.fn.colorbox.close()});a("#Save").click(function(){var l=k.options.applicationTabId.$("#"+k.options.fieldId);var n=l.parent().parent().get(0).acfb;var m=[];a("ul.wsCriteriaList .acfb-input",this.$container).each(function(){var p=a(this).attr("id");var o=a("#hdn"+p).val();if(o!=null&&o.length>0){a.each(JSON.parse(o),function(r,q){k._uniqueId++;var s=new Object();s.ID=l.attr("id")+"__"+p+"__"+k._uniqueId;s.Data=a("#fn_"+p).text()+": "+(q.Data||q);m.push(s)})}});n.mergeResults(m);a.fn.colorbox.close()})}})})},buildElementIfNeeded:function(){var h=this.$element.attr("link");if(a(h).length==0){a(this.options.containerId).append('<div style="display: none;"><div class="word_search_container ui-widget" id="'+h.replace("#","")+'">');this.$container=a(h);this.$container.append('<div class="wsField ui-widget-content fieldset ui-field_selection">').append('<div class="wsCriteria ui-widget-content fieldset ui-word_container">');var m=a(".wsField",this.$container);m.append('<div class="wsFieldTitle ui-state-default legend ui-label">Field Selection</div>').append('<div class="wsFieldText">Add a field to search</div>').append('<input type="text" class="wsFieldFilter watermark watermarkOn" watermarkValue="Search" value="Search" />').append('<input class="wsFieldAdd" type="button" title="Add" value="Add" /> <br />').append('<select class="wsWords" multiple="multiple"></select>');var i=a(".wsCriteria",this.$container);i.append('<div class="wsCriteriaTitle ui-state-default legend ui-label" >Word Search</div>').append('<div class="wsCriteriaClearAll"><a href="#">Clear All</a></div>').append('<div class="wsCriteriaText">Add criteria to selected field</div>').append('<ul  class="wsCriteriaList"></ul>');this.initElements()}else{this.$container=a(h);this.clearAllWordCriteria()}var l=this.options.applicationTabId.$("#hdn"+this.options.fieldId).val();if(l!=null&&l.length>0){var j=JSON.parse(l);var k=this;a.each(j,function(o,q){var r=a.trim(q.Data.split(":")[0]);var p=q.ID.split("__")[1];var n=a("#"+p);if(n.length==0){k.addSelectedWord(r,p);n=a("#"+p)}k._uniqueId++;q.Data=a.trim(q.Data.split(":")[1]);n.trigger("result",[q,q.Data])})}},initElements:function(){var h=this;this.blockUI("Loading Fields...");a.post(this.options.fieldListUrl,function(i){a.each(i,function(){a("select.wsWords",h.$container).append('<option value="'+this.Value+'">'+this.Text+"</option>")});a.unblockUI()});a("select.wsWords",this.$container).dblclick({that:this},this.addSelectedWordCriteria);a("input.wsFieldAdd",this.$container).click({that:this},this.addSelectedWordCriteria);a("div.wsCriteriaClearAll",this.$container).click(this.clearAllWordCriteria);a("ul.wsCriteriaList .remove",this.$container).live("click",this.removeSelectedWordCriteria);a("input.wsFieldFilter",this.$container).autocomplete(a.map(a("select.wsWords option",this.$container),function(i){return a(i).text()}));a("input.wsFieldFilter",this.$container).result(function(j,i){this.filterList(i[0])});a("input.watermark",this.$container).watermark()},addSelectedWordCriteria:function(i){var h=i.data.that;a("select option:selected").each(function(){var k=a(this).text();var j=a(this).val();h.addSelectedWord(k,j)})},addSelectedWord:function(i,h){if(a("#"+h).length==0){var j=this.acfbuild(h);a("ul.wsCriteriaList",this.$container).append('<li class="f-cs-action"><div class="ui-state-default ui-corner-all" title="Remove"><span class="ui-icon ui-icon-close remove" /></div><span class="wsFilteredWord" id="fn_'+h+'">'+i+'</span><span id="wsFilteredWordData">'+j+"</span></li>");a("."+h).autoCompletefb({deleteImg:this.options.deleteImg})}},acfbuild:function(i){var h="hdn"+i;var j='<ul class="'+i+' acfb-holder ui-helper-reset" style="width:300px !important;">';j=j+'<input class="acf acfb-input ac_input" type="text" id="'+i+'" name="'+i+'" value = "" url="" data="" desc="" />';j=j+'<input class="acfb-hidden-values" type="hidden" name="'+h+'" id="'+h+'" value = "" />';j=j+"</ul>";return j},clearAllWordCriteria:function(){a("ul.wsCriteriaList li",this.$container).remove();a("input.wsFieldFilter",this.$container).addClass("watermarkOn").val("Search")},removeSelectedWordCriteria:function(){a(this).parent().parent().remove()},filterList:function(h){a("select.wsWords",this.$container).children('@option[text="'+h+'"]').attr("selected","selected");a("input.wsFieldFilter",this.$container).val("")},blockUI:function(h){a.blockUI({message:h,fadeIn:0,overlayCSS:{backgroundColor:"#000",opacity:0.2},css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.85,color:"#fff",fontSize:"32px",fontWeight:"bold"},baseZ:10000})}};a.fn[e]=function(h){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new g(this,h))}})}})(jQuery,window,document);/* Copyright (c) 2008 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.0.3
 * Requires jQuery 1.1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
(function(a){a.extend(a.fn,{livequery:function(f,d,e){var c=this,g;if(a.isFunction(f)){e=d,d=f,f=undefined}a.each(a.livequery.queries,function(h,j){if(c.selector==j.selector&&c.context==j.context&&f==j.type&&(!d||d.$lqguid==j.fn.$lqguid)&&(!e||e.$lqguid==j.fn2.$lqguid)){return(g=j)&&false}});g=g||new a.livequery(this.selector,this.context,f,d,e);g.stopped=false;g.run();return this},expire:function(f,d,e){var c=this;if(a.isFunction(f)){e=d,d=f,f=undefined}a.each(a.livequery.queries,function(g,h){if(c.selector==h.selector&&c.context==h.context&&(!f||f==h.type)&&(!d||d.$lqguid==h.fn.$lqguid)&&(!e||e.$lqguid==h.fn2.$lqguid)&&!this.stopped){a.livequery.stop(h.id)}});return this}});a.livequery=function(f,e,c,d,g){this.selector=f;this.context=e||document;this.type=c;this.fn=d;this.fn2=g;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;d.$lqguid=d.$lqguid||a.livequery.guid++;if(g){g.$lqguid=g.$lqguid||a.livequery.guid++}return this};a.livequery.prototype={stop:function(){var c=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(d,e){c.fn2.apply(e)})}}this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}var f=this;var d=this.elements,e=a(this.selector,this.context),c=e.not(d);this.elements=e;if(this.type){c.bind(this.type,this.fn);if(d.length>0){a.each(d,function(g,h){if(a.inArray(h,e)<0){a.event.remove(h,f.type,f.fn)}})}}else{c.each(function(){f.fn.apply(this)});if(this.fn2&&d.length>0){a.each(d,function(g,h){if(a.inArray(h,e)<0){f.fn2.apply(h)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var c=a.livequery.queue.length;while(c--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(c,d){if(!a.fn[d]){return}var e=a.fn[d];a.fn[d]=function(){var f=e.apply(this,arguments);a.livequery.run();return f}})},run:function(c){if(c!=undefined){if(a.inArray(c,a.livequery.queue)<0){a.livequery.queue.push(c)}}else{a.each(a.livequery.queries,function(d){if(a.inArray(d,a.livequery.queue)<0){a.livequery.queue.push(d)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(c){if(c!=undefined){a.livequery.queries[c].stop()}else{a.each(a.livequery.queries,function(d){a.livequery.queries[d].stop()})}}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var b=a.prototype.init;a.prototype.init=function(e,d){var f=b.apply(this,arguments);if(e&&e.selector){f.context=e.context,f.selector=e.selector}if(typeof e=="string"){f.context=d||document,f.selector=e}return f};a.prototype.init.prototype=a.prototype})(jQuery);/*
 * jQuery blockUI plugin
 * Version 2.60.0-2013.04.05
 * @requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(){function a(o){o.fn._fadeIn=o.fn.fadeIn;var j=o.noop||function(){};var f=/MSIE/.test(navigator.userAgent);var e=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var l=document.documentMode||0;var n=o.isFunction(document.createElement("div").style.setExpression);o.blockUI=function(r){i(window,r)};o.unblockUI=function(r){b(window,r)};o.growlUI=function(s,r,t,u){var v=o('<div class="growlUI"></div>');if(s){v.append("<h1>"+s+"</h1>")}if(r){v.append("<h2>"+r+"</h2>")}if(t===undefined){t=3000}o.blockUI({message:v,fadeIn:700,fadeOut:1000,centerY:false,timeout:t,showOverlay:false,onUnblock:u,css:o.blockUI.defaults.growlCSS})};o.fn.block=function(r){if(this[0]===window){o.blockUI(r);return this}var s=o.extend({},o.blockUI.defaults,r||{});this.each(function(){var t=o(this);if(s.ignoreIfBlocked&&t.data("blockUI.isBlocked")){return}t.unblock({fadeOut:0})});return this.each(function(){if(o.css(this,"position")=="static"){this.style.position="relative";o(this).data("blockUI.static",true)}this.style.zoom=1;i(this,r)})};o.fn.unblock=function(r){if(this[0]===window){o.unblockUI(r);return this}return this.each(function(){b(this,r)})};o.blockUI.version=2.6;o.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var g=null;var q=[];function i(J,L){var H,r;var D=(J==window);var u=(L&&L.message!==undefined?L.message:undefined);L=o.extend({},o.blockUI.defaults,L||{});if(L.ignoreIfBlocked&&o(J).data("blockUI.isBlocked")){return}L.overlayCSS=o.extend({},o.blockUI.defaults.overlayCSS,L.overlayCSS||{});H=o.extend({},o.blockUI.defaults.css,L.css||{});if(L.onOverlayClick){L.overlayCSS.cursor="pointer"}r=o.extend({},o.blockUI.defaults.themedCSS,L.themedCSS||{});u=u===undefined?L.message:u;if(D&&g){b(window,{fadeOut:0})}if(u&&typeof u!="string"&&(u.parentNode||u.jquery)){var w=u.jquery?u[0]:u;var E={};o(J).data("blockUI.history",E);E.el=w;E.parent=w.parentNode;E.display=w.style.display;E.position=w.style.position;if(E.parent){E.parent.removeChild(w)}}o(J).data("blockUI.onUnblock",L.onUnblock);var A=L.baseZ;var y,O,N,G;if(f||L.forceIframe){y=o('<iframe class="blockUI" style="z-index:'+(A++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+L.iframeSrc+'"></iframe>')}else{y=o('<div class="blockUI" style="display:none"></div>')}if(L.theme){O=o('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(A++)+';display:none"></div>')}else{O=o('<div class="blockUI blockOverlay" style="z-index:'+(A++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(L.theme&&D){G='<div class="blockUI '+L.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:fixed">';if(L.title){G+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(L.title||"&nbsp;")+"</div>"}G+='<div class="ui-widget-content ui-dialog-content"></div>';G+="</div>"}else{if(L.theme){G='<div class="blockUI '+L.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:absolute">';if(L.title){G+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(L.title||"&nbsp;")+"</div>"}G+='<div class="ui-widget-content ui-dialog-content"></div>';G+="</div>"}else{if(D){G='<div class="blockUI '+L.blockMsgClass+' blockPage" style="z-index:'+(A+10)+';display:none;position:fixed"></div>'}else{G='<div class="blockUI '+L.blockMsgClass+' blockElement" style="z-index:'+(A+10)+';display:none;position:absolute"></div>'}}}N=o(G);if(u){if(L.theme){N.css(r);N.addClass("ui-widget-content")}else{N.css(H)}}if(!L.theme){O.css(L.overlayCSS)}O.css("position",D?"fixed":"absolute");if(f||L.forceIframe){y.css("opacity",0)}var B=[y,O,N],x=D?o("body"):o(J);o.each(B,function(){this.appendTo(x)});if(L.theme&&L.draggable&&o.fn.draggable){N.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var v=n&&(!o.support.boxModel||o("object,embed",D?null:J).length>0);if(e||v){if(D&&L.allowBodyStretch&&o.support.boxModel){o("html,body").css("height","100%")}if((e||!o.support.boxModel)&&!D){var K=d(J,"borderTopWidth"),R=d(J,"borderLeftWidth");var M=K?"(0 - "+K+")":0;var I=R?"(0 - "+R+")":0}o.each(B,function(z,T){var t=T[0].style;t.position="absolute";if(z<2){if(D){t.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+L.quirksmodeOffsetHack+') + "px"')}else{t.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(D){t.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{t.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(I){t.setExpression("left",I)}if(M){t.setExpression("top",M)}}else{if(L.centerY){if(D){t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}t.marginTop=0}else{if(!L.centerY&&D){var U=(L.css&&L.css.top)?parseInt(L.css.top,10):0;var S="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+U+') + "px"';t.setExpression("top",S)}}}})}if(u){if(L.theme){N.find(".ui-widget-content").append(u)}else{N.append(u)}if(u.jquery||u.nodeType){o(u).show()}}if((f||L.forceIframe)&&L.showOverlay){y.show()}if(L.fadeIn){var Q=L.onBlock?L.onBlock:j;var C=(L.showOverlay&&!u)?Q:j;var F=u?Q:j;if(L.showOverlay){O._fadeIn(L.fadeIn,C)}if(u){N._fadeIn(L.fadeIn,F)}}else{if(L.showOverlay){O.show()}if(u){N.show()}if(L.onBlock){L.onBlock()}}p(1,J,L);if(D){g=N[0];q=o(L.focusableElements,g);if(L.focusInput){setTimeout(h,20)}}else{c(N[0],L.centerX,L.centerY)}if(L.timeout){var P=setTimeout(function(){if(D){o.unblockUI(L)}else{o(J).unblock(L)}},L.timeout);o(J).data("blockUI.timeout",P)}}function b(v,r){var u;var y=(v==window);var x=o(v);var w=x.data("blockUI.history");var s=x.data("blockUI.timeout");if(s){clearTimeout(s);x.removeData("blockUI.timeout")}r=o.extend({},o.blockUI.defaults,r||{});p(0,v,r);if(r.onUnblock===null){r.onUnblock=x.data("blockUI.onUnblock");x.removeData("blockUI.onUnblock")}var t;if(y){t=o("body").children().filter(".blockUI").add("body > .blockUI")}else{t=x.find(">.blockUI")}if(r.cursorReset){if(t.length>1){t[1].style.cursor=r.cursorReset}if(t.length>2){t[2].style.cursor=r.cursorReset}}if(y){g=q=null}if(r.fadeOut){u=t.length;t.fadeOut(r.fadeOut,function(){if(--u===0){k(t,w,r,v)}})}else{k(t,w,r,v)}}function k(s,u,r,t){var z=o(t);s.each(function(w,A){if(this.parentNode){this.parentNode.removeChild(this)}});if(u&&u.el){u.el.style.display=u.display;u.el.style.position=u.position;if(u.parent){u.parent.appendChild(u.el)}z.removeData("blockUI.history")}if(z.data("blockUI.static")){z.css("position","static")}if(typeof r.onUnblock=="function"){r.onUnblock(t,r)}var x=o(document.body),v=x.width(),y=x[0].style.width;x.width(v-1).width(v);x[0].style.width=y}function p(w,s,r){var v=s==window,u=o(s);if(!w&&(v&&!g||!v&&!u.data("blockUI.isBlocked"))){return}u.data("blockUI.isBlocked",w);if(!v||!r.bindEvents||(w&&!r.showOverlay)){return}var t="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(w){o(document).bind(t,r,m)}else{o(document).unbind(t,m)}}function m(u){if(u.keyCode&&u.keyCode==9){if(g&&u.data.constrainTabKey){var s=q;var t=!u.shiftKey&&u.target===s[s.length-1];var v=u.shiftKey&&u.target===s[0];if(t||v){setTimeout(function(){h(v)},10);return false}}}var r=u.data;var w=o(u.target);if(w.hasClass("blockOverlay")&&r.onOverlayClick){r.onOverlayClick()}if(w.parents("div."+r.blockMsgClass).length>0){return true}return w.parents().children().filter("div.blockUI").length===0}function h(s){if(!q){return}var r=q[s===true?q.length-1:0];if(r){r.focus()}}function c(v,z,A){var u=v.parentNode,r=v.style;var B=((u.offsetWidth-v.offsetWidth)/2)-d(u,"borderLeftWidth");var w=((u.offsetHeight-v.offsetHeight)/2)-d(u,"borderTopWidth");if(z){r.left=B>0?(B+"px"):"0"}if(A){r.top=w>0?(w+"px"):"0"}}function d(s,r){return parseInt(o.css(s,r),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}})();